(function(){try{
"use strict";(()=>{var f=window.IntentProperties?window.IntentProperties.namespace||"intent":"blackcrow",a=window.blackcrow||window.intent||{},p=[];Array.isArray(a)&&(p=a,a={});a.BUNDLE_NAME="www_livelarq.js";a.BUILD_NUMBER="15515";a.TAG_SRC=window.blackcrowTagSrc||"JS";window.blackcrow=a;window.intent=a;var d=a.SITE_NAME||"livelarq",zi="init.blackcrow.ai";if(document.currentScript&&document.currentScript instanceof HTMLElement){let e=document.currentScript.src.split("/")[2];if(!e)throw new Error("Failed to extract CDN host from tag");zi=e}else a.TAG_SRC==="ShopifyAppExtension"&&(zi="shopify-init.blackcrow.ai");var l=`https://${zi}/`;var En=`
`;function oe(t,e){if(typeof t=="string"){let r=t.split(En);return r.splice(1,e),r.join(En)}return""}function uu(t){return typeof t=="string"?t.split(En).filter(o=>{o=o.toLowerCase();let n=l.toLowerCase(),i="www_livelarq.js".toLowerCase();return!(o.includes(n)&&o.includes(i))}).join(En):t}function Ji(){return a.TAG_SRC||"JS"}function y(){return Ji()==="ShopifyAppExtension"}function J(t,e,r,o){function n(i){typeof o=="function"&&o(i)}try{fetch(t,e).then(i=>{if(i.ok)typeof r=="function"&&r(i);else if(e?.mode!=="no-cors"){let c=`${i.status} ${i.statusText}`;try{i.json().then(s=>{let u=s.errors[0];c=`${u.error_type}: ${u.error_message}`,n(new Error(c))}).catch(()=>{n(new Error(c))})}catch{n(new Error(c))}}}).catch(n)}catch(i){n(i)}}function tm(){try{return window.location!==window.top.location}catch{return!0}}function Ao(){return y()?window.location.hostname:window.top.location.hostname}function fu(){return y()?window.location:tm()?window.top.location:window.location}function Ce(){return fu()?.pathname}function k(){return fu().href}function ve(){return window?.navigator?.userAgent}function Wt(t){return performance&&typeof performance.getEntriesByType=="function"&&performance.getEntriesByType(t)||[]}function bn(){return performance&&typeof performance.now=="function"&&performance.now()||0}function Wr(t,e){let r=globalThis.browser;if(y()&&r){J(t,{method:"POST",keepalive:!0,mode:"no-cors",body:e},()=>{},o=>{o.message=`${o.message} - ${t}`,o.status="warn",a.error(o)});return}window?.navigator?.sendBeacon(t,e)}var rm=["clicktripz","example","partner"],om=[".shopifypreview.","localhost.","demo.","staging.","development-","development.","dev-","dev.","devstore-","devstore.","development2","sandbox-","sandbox.","-sandbox"],nm=["localhost","127.0.0.1"];function im(){let t=Ao();return t===""||nm.includes(t)}function am(){let t=Ao().toLocaleLowerCase();return om.some(e=>t.indexOf(e.toLocaleLowerCase())!==-1)}function xt(t){return rm.indexOf(t.toLowerCase())!==-1||im()||am()}function le(t,e={},r="info"){if(xt(d))return;let o="https://monitor-api.blackcrow.ai/",n=!1,i=parseInt("15515",10)||0,c=JSON.stringify({message:t,status:r,service:"javascript-api",version:i,ddsource:"browser",ddtags:`env:${n?"dev":"production"},version:${i}`,"logger.name":"monitor-api","http.useragent":ve(),"view.site":d,...e});Wr(o,c)}function du(t){let e=Math.random();(t.overrideSampling||e>=.3&&e<.4)&&le(t.message,{status:t.status||"error","error.kind":t.name,"error.message":t.message,"error.stack":t.stack,"view.url":k(),"view.referrer":document.referrer})}function sm(t){let e=!0;return t.skipNotify&&(e=!1),t.message.indexOf("com.gargoylesoftware.htmlunit")!==-1&&(e=!1),e}function cm(t,e){let o=`BlackCrow${e?` ${e}`:""} ${t.stack}`;globalThis.console&&(globalThis.console.error?globalThis.console.error(o):globalThis.console.log(o))}function um(t){let e=new Error(t);return oe(e.stack,1)}function Sn(t,e={}){if(!t)return;t.stack||(t.stack=um(t.msg)),!1&&cm(t,e.appName),sm(t)&&typeof Sn.sendErrorToServer=="function"&&Sn.sendErrorToServer(t)}Sn.sendErrorToServer=du;a.error=Sn;function Pn(t,e){let r=document.createElement("link");r.rel=e,r.href=t,document.head.appendChild(r)}a.TAG_SRC!=="ShopifyAppExtension"&&!window.blackcrowpreconnected&&(Pn("https://api.blackcrow.ai/","preconnect"),Pn("https://api.blackcrow.ai/","dns-prefetch"),Pn(l,"preconnect"),Pn(l,"dns-prefetch"),window.blackcrowpreconnected=1);function S(t,e,r){if(t)if(typeof t.length<"u"){for(let o=0,n=t.length;o<n;o+=1)if(e.call(r,t[o],o,t)===!1)return}else{let o=Object.keys(t);for(let n=0,i=o.length;n<i;n+=1)if(e.call(r,t[o[n]],o[n],t)===!1)return}}var fm="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var lu=(t=21)=>{let e="",r=t;for(;r--;)e+=fm[Math.random()*64|0];return e};var pu=lu;function lt(t,e){if(y())return window.blackcrow.cookie.get(t);e=e||document.cookie;let r={};return S(e.split(/\s?;\s?/),o=>{let n=o.split(/\s?=\s?/);r[n.shift().trim()]=n.join("=").trim()}),r[t]}async function A(t,e){try{return y()?await globalThis.browser.cookie.get(t):lt(t,e)}catch{}return null}var Zi="_bcai_h",Io="_bcai_i",Ki="_bcai_e",xn="_bcai_t",mu="_bcai_up",Yi="_bcai_lpi",Xi="_bcai_vn",Qi="_bcai_vs",Tn="_bcai_v",ko="_bcai_pu",ea="_bcai_lpv",ta="_bcai_spv",An="_bcai_em",ra="_bcai_fn",oa="_bcai_ln",In="_bcai_ph",gu="_bcai_koc",hu="_bcai_khs",yu="_bcai_kps",na="_bcai_kid",vu="_bcai_pwo_ebc",Co="_bcai_isn",ia="_bcai_fcpes",kn="_bcai_fbcapi",aa="_bcai_aos_pes",qr="_bcai_urr",_u="fbclid",qt="_fbc",pt="_fbp",Cn="__kla_id";var Oo;function sa(){if(Oo)return Oo;let t=document.location.hostname.split("."),e,r=t.length;if(r===1)Oo="";else{for(;r>2;){r-=1,e=t.slice(1).join("."),document.cookie=`${xn}=1; domain=${e}`;let o=lt(xn);if(document.cookie=`${xn}=1; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=${e}`,!o)break;t.shift()}Oo=t.join(".")}return Oo}function Y(t,e,r){try{let o;if(r){let i=new Date;i.setTime(i.getTime()+r*60*1e3),o=`;expires=${i.toUTCString()}`}else o="";let n=`${t}=${e}${o};domain=${sa()};path=/`;y()?(browser.cookie.set(n),window.blackcrow.cookie.set(t,e)):document.cookie=n}catch{}}var lr;function Tt(){return lr||(lr=lt(Io),lr||(lr=pu(),Y(Io,lr,1051200)),lr)}function dm(t,e){var r,o,n,i,c,s,u,m,g,b;for(r=t.length&3,o=t.length-r,n=e,c=3432918353,u=461845907,b=0;b<o;)g=t.charCodeAt(b)&255|(t.charCodeAt(++b)&255)<<8|(t.charCodeAt(++b)&255)<<16|(t.charCodeAt(++b)&255)<<24,++b,g=(g&65535)*c+(((g>>>16)*c&65535)<<16)&4294967295,g=g<<15|g>>>17,g=(g&65535)*u+(((g>>>16)*u&65535)<<16)&4294967295,n^=g,n=n<<13|n>>>19,i=(n&65535)*5+(((n>>>16)*5&65535)<<16)&4294967295,n=(i&65535)+27492+(((i>>>16)+58964&65535)<<16);switch(g=0,r){case 3:g^=(t.charCodeAt(b+2)&255)<<16;case 2:g^=(t.charCodeAt(b+1)&255)<<8;case 1:g^=t.charCodeAt(b)&255,g=(g&65535)*c+(((g>>>16)*c&65535)<<16)&4294967295,g=g<<15|g>>>17,g=(g&65535)*u+(((g>>>16)*u&65535)<<16)&4294967295,n^=g}return n^=t.length,n^=n>>>16,n=(n&65535)*2246822507+(((n>>>16)*2246822507&65535)<<16)&4294967295,n^=n>>>13,n=(n&65535)*3266489909+(((n>>>16)*3266489909&65535)<<16)&4294967295,n^=n>>>16,n>>>0}var lm=4294967295,pm=108;function ca(t){return dm(t||"",pm)/lm}function te(t={}){let e=lt("_shopify_y")||Tt(),r=t.name||"",{force:o,allocations:n}=t,i=ca(`${e}${r}`);if(o)return n.find(m=>m.name===o)?.value;let c=0,s=[];S(t.allocations,m=>{if(s.push({min:c,max:c+m.percent,value:m.value}),c+=m.percent,c>1)throw new Error("Bucket allocation exceeds 100%")});let u;return S(s,m=>i>=m.min&&i<m.max?(u=m.value,!1):!0),u}function xe(){return document.referrer}function Gr(){return document.title}function mm(t,e){let r=e.split("[");return r.length>1?t&&t[r[0]]&&t[r[0]][parseInt(r[1],10)]:t&&t[e]}function w(t,e){if(!(!t||!e||typeof e!="string"))return e.split(".").reduce(mm,t)}function pr(t,e,r,o,n){!t||!e||typeof e!="string"||(e.indexOf(".")!==-1?(e=e.split("."),pr(t,e.shift(),r,e,n)):!o||o.length===0?(!n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=r):((!n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=t[e]||{}),pr(t[e],o.shift(),r,o,n)))}a.storage=a.storage||{};function gm(t,e){let r=a.storage[t].audience;typeof r=="object"&&e?.audience===!1?a.storage[t]={audience:r}:a.storage[t]={}}function ne(t){t&&(a.storage[t]=a.storage[t]||{});function e(){return a.storage[t]}return{clear:r=>{t==="bound_events"&&r?gm(t,r):a.storage[t]={}},getAll:()=>e()||{},get:r=>w(e(),r),set:(r,o)=>{let n=e();typeof r=="string"?pr(n,r,o):S(r,(i,c)=>{pr(n,c,i)})},push:(r,o)=>{let n=e(),i=w(n,r);Array.isArray(i)?i.push(o):pr(n,r,[o])}}}var ua=ne("page"),fa="history";function hm(t,e){return typeof e=="function"?e.toString().replace(/\s+/g," "):e}function wu(){return console.group(`${f} history`),S(ua.get(fa),t=>{console.groupCollapsed(t.name),console.log("data",JSON.stringify(t.data,hm,4)),console.log(t.source),console.groupEnd()}),console.groupEnd(),""}function Eu(){return ua.get(fa)}function ie(t,e){let r=new Error("");r.name="source",r.stack=oe(r.stack,1),ua.push(fa,{name:t,data:e,source:r})}var ym=Object.prototype.toString,da=Array.prototype.slice;function E(t,...e){return t=t||{},S(e,r=>{S(r,(o,n)=>{let i=ym.call(o).split(" ").pop();if(i!=="Undefined]"){if(!o||o===o.window||o.nodeType||o._isVue){t[n]=o;return}if(i==="Object]"){t[n]=t[n]||{},E(t[n],o);return}if(i==="Array]"){t[n]=t[n]||[],t[n]=da.call(t[n]).concat(o);return}if(i==="NodeList]"||i==="HTMLCollection]"){t[n]=t[n]||[],t[n]=da.call(t[n]).concat(da.call(o));return}t[n]=o}})},this),t}window.blackcrow.pushedData=window.blackcrow.pushedData||{};function la(){let t=window.blackcrow.pushedData;t&&t.winLocation!==k()&&(window.blackcrow.pushedData={})}function On(t){E(window.blackcrow.pushedData,t,{winLocation:k()})}function Nn(t){window.blackcrow.pushedData={...t,winLocation:k()}}function N(t){return w(window.blackcrow.pushedData,t)}var pa=ne("events_api_response"),ma=ne("api_config");function jr(t){let e=new Error(t);return e.name="SequencingError",e.status="warn",e.stack=oe(e.stack,1),e}var bu=!1,Su=!1;function Pu(t,e){if(t){let r=e.get(`data.${t}`);if(typeof r=="string"){let o=r.toLowerCase();return o==="off"||o==="false"?!1:r}return r}return e.get("data")}function ga(t){ma.set("data",t),Su=!0}function M(t){return Su===!1&&a.error(new jr("Attempting to access apiConfig before it has been set!")),Pu(t,ma)}function No(t){pa.set("data",t),bu=!0}function ha(t){return bu===!1&&a.error(new jr("Attempting to access events api response before it has been set!")),Pu(t,pa)}function ya(){return!!ha("history_id")}function vm(t){let e=new Error(t);return e.name="URIDecodingError",e.status="warn",e.stack=oe(e.stack,1),e}function He(t){let e={};if(typeof t=="string"&&t.length){let r=t.split("?");r.shift(),r=r.join("?"),r=r.split("#")[0],S(r.split("&"),o=>{let n=o;try{n=decodeURIComponent(n)}catch{a.error(new vm(`Unable to decode URI component: ${n}`))}let i=n.indexOf("="),c=i>0?[n.slice(0,i),n.slice(i+1)]:[n];typeof c[1]<"u"&&(e[c[0]]=c[1])})}return e}function ae(t,e){let r=e?He(e):He(k()),o=Object.keys(r).find(n=>n?.toLowerCase()===t?.toLowerCase());return r[o]}var xu="config.visitor.query_string";function _m(t){let e=t?w(t,xu):M(xu);return e?{param:e.param,separator:e.separator,index:e.index}:{}}function wm(t){let e=t.param;if(e)return ae(e)}function Em(t,e){let r=e.separator,o=e.index;return r&&o?t.split(r)[o]||void 0:t}function Tu(t){let e=_m(t),r=wm(e);if(r)return Em(r,e)}var va,_a;function bm(){let t,e=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga;return e&&typeof e.getAll=="function"&&S(e.getAll(),r=>{try{let o=r.get("clientId");if(o)return t=o,!1}catch{}}),t}async function Sm(){try{if(typeof _a<"u")return _a;let t,e=await A("_ga");if(e){let r=e.split(".");r.shift(),r.shift(),t=r.join(".")}return _a=t,t}catch(t){a.error(t);return}}async function Gt(t){try{if(va)return va;let e=N("google_id")||Tu(t)||window.gaGlobal&&window.gaGlobal.vid||bm()||await Sm();return va=e,e}catch(e){a.error(e);return}}var Au="blackcrow",Iu="cookie",ku="global",Cu="google",wa="pushed_data";var mr,ze=Au.toUpperCase(),Je=Tn,Rn=!1;function Ou(t,e,r){Y(Tn,t,1051200),Y(Qi,e,1051200),Y(Xi,r,1051200)}async function Ze(){if(mr)return{id:mr,source:ze,name:Je,fallback:Rn};if(mr=await A(Tn),mr)return ze=await A(Qi)||ze,Je=await A(Xi)||Je,Ou(mr,ze,Je),{id:mr,source:ze,name:Je,fallback:Rn};let t=M("config.visitor.id_source"),e=M("config.visitor.id_name"),r=N("visitor_id");if(r&&(ze=wa.toUpperCase(),Je="visitor_id"),t===Iu){let o=await A(e);o&&(r=o,ze=t.toUpperCase(),Je=e)}else if(t===ku){let o=w(window,e);o&&(r=o,ze=t.toUpperCase(),Je=e)}else if(t===wa){let o=N(e);o&&(r=o,ze=t.toUpperCase(),Je=e)}else if(t===Cu){let o=await Gt();o&&(r=o,ze=t.toUpperCase(),Je=e)}return r||(r=Tt(),Rn=!0),mr=r,Ou(r,ze,Je),{id:r,source:ze,name:Je,fallback:Rn}}async function Pm(t){try{if(t.overrideSampling||te({name:"error_sampling",allocations:[{percent:.1,value:!0}]})){let r=await Ze();le(t.message,{status:t.status||"error","error.kind":t.name,"error.message":t.message,"error.stack":t.stack,"usr.id":r.id,"view.url":N("page_url")||k(),"view.referrer":N("page_referrer_url")||xe()})}ie(t.name,t)}catch{}}function Nu(){a.error.sendErrorToServer=Pm}function xm(t){let e={name:"other",major:0,minor:0};if(/googlebot/.test(t)||/adsbot/.test(t)||/bingbot/.test(t)||/bingpreview/.test(t)||/slurp/.test(t)||/storebot/.test(t)||/spider/.test(t)||/crawler/.test(t)||/yandexbot/.test(t)||/ptst[ \/]/.test(t)||/externalhit/.test(t))return e.name="bot",e;let o=/(msie) ([\w.]+)/.exec(t)||/(ucbrowser)[ \/]([\w.]+)/.exec(t)||/(miuibrowser)[ \/]([\w.]+)/.exec(t)||/(opera mini)[ \/]([\w.]+)/.exec(t)||/(opr)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(t)||/(firefox)[ \/]([\w.]+)/.exec(t)||/(trident)(?:.*? rv:([\w.]+))?/.exec(t)||/(edg)[ \/]([\w.]+)/.exec(t)||/(edge)[ \/]([\w.]+)/.exec(t);if(o){o[1]==="opr"?o[1]="opera":o[1]==="trident"?o[1]="msie":o[1]==="edg"&&(o[1]="edge"),e.name=o[1].replace(/\s+/,"");let n=(o[2]||"").split(/\.|-|_/);e.major=parseInt(n[0],10)||0,e.minor=parseInt(n[1],10)||0}return e}function Tm(t){return!!(t.match(/ipad/)||t.match(/android/)&&!t.match(/mobi|mini|fennec/)||t.match(/macintosh/)&&window.navigator.maxTouchPoints>1)}function Am(t){return!!t.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)}function Im(t){return Am(t)?"mobile":Tm(t)?"tablet":"desktop"}function gr(t){t=t||"";let e=t.toLowerCase();return{browser:xm(e),deviceType:Im(e)}}function mt(t){let e=new Error(t);return e.name="NotSupportedError",e.status="warn",e.stack=oe(e.stack,1),e}function km(){try{return!new Error("")}catch(t){return t}}function Cm(){let t=km();if(t)throw t.name="NotSupportedError",t.status="warn",t.message="Missing feature: errorConstructor",t}function Om(){let{browser:t}=gr(ve());if(typeof t=="object"){let e=t.name,r=t.major;if(e==="bot"||e==="msie"||e==="edge"&&r<15||e==="firefox"&&r<54||e==="chrome"&&r<42||e==="safari"&&r<10||e==="ucbrowser"||e==="miuibrowser"||e==="opera"&&r<38||e==="operamini")return!1}return!0}function Ru(){return ae("bcai-bypass")==="true"}function Lu(){if(!Om())throw new mt("Browser not supported");Cm()}function T(t){let e=new Error(t);return e.name="GlobalInterfaceError",e.status="warn",e.stack=oe(e.stack,1),e}function Oe(){return!!w(window,"Shopify")}function Ea(){return Oe()&&Ce()?.includes("products")}function Du(){return Oe()&&Ce()?.includes("/search")}function Nm(){return Oe()&&Ce()==="/"}function Fu(){return Oe()&&Ce()?.includes("/cart")}function Mu(){return!!w(window,"Shopify.Checkout")}function ba(){let t=k();return t&&t.includes("/checkouts")}function Sa(){let t=k();return t&&(t.includes("/thank_you")||t.includes("/purchase/thanks")||t.includes("/thank-you"))}function Rm(){let t=w(window,"Shopify.Checkout.isOrderStatusPage"),e=w(window,"Shopify.checkout");return t!==void 0||e!==void 0}function Hr(){return w(window,"Shopify.Checkout.currency")||w(window,"cart_json.currency")||w(window,"Shopify.currency.active")||w(window,"afterpay_shop_currency")}function Ln(){return w(window,"Shopify.Checkout.totalPrice")?.toString()}function Dn(){if(!Oe())return;let t=w(window,"Shopify.Checkout.step");if(t)switch(t){case"payment_method":return"payment";case"shipping_method":return"shipping";case"contact_information":return"contact";case"thank_you":return"confirmation";default:return t}return Rm()?"order_status":Ea()?"products":Nm()?"index":Ce()}function Ro(){return globalThis?.Shopify?.routes?.root}function Pa(){return y()&&w(window,"shopifyEvent.name")==="checkout_completed"}function xa(){return y()&&w(window,"shopifyEvent.name")==="payment_info_submitted"}function $u(){return y()&&w(window,"shopifyEvent.name")==="page_viewed"}function Fn(){return Pa()||xa()?window?.shopifyCheckout:{}}var Lm="https://init.blackcrow.ai/",Dm="https://shopify-init.blackcrow.ai/";function Ta(){let t="www_livelarq.js"?.replace(".js",""),e=l;return e?.includes("init.blackcrow.ai")||(e=Oe()?Dm:Lm,a.error(T(`www_livelarq.js is not hosted on the blackcrow CDN but on ${l}.`))),`${e}config/${t}.json`}async function Bu(){let t=await fetch(Ta(),{method:"GET"});if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);let e=await t.json(),r=atob(e.data);return JSON.parse(r)}function Lo(t,e,r){if(t){let n=(t.options||{}).origEvent||{};if(clearTimeout(n.timeout),typeof t.callback=="function"&&!n.timeoutReached){try{t.callback(e)}catch(i){a.error(i)}typeof r=="function"&&r()}}}var Fm=ne("bound_events"),Mm=ne("triggered_events");function W(t,e,r,o={}){let n={appName:t,eventName:e,callback:r,options:o};Fm.push(`${t}.${e}`,n),S(Mm.get(`${t}.${e}`),i=>{Lo(n,i.data,i.onExec)})}function Ne(t,e,r=!0,o="error"){let n=new Error(t);return n.name=`${e||""}RequestError`,n.status=o,n.skipNotify=r,n.stack=oe(n.stack,1),n}function se(t,...e){return new Promise(r=>{setTimeout(r,t,[...e])}).catch(r=>a.error(r))}function Mn(t,e,r){return function(...n){try{return t.apply({},n)}catch(i){r&&r.interval&&clearInterval(r.interval),a.error(i,{appName:e})}}}function $m(t,e,...r){return setTimeout.apply(globalThis,[Mn(t,this.appName),e].concat(r))}function Bm(t,e,...r){let o={},n=setInterval.apply(globalThis,[Mn(t,this.appName,o),e].concat(r));return o.interval=n,n}var Aa=class{constructor(e,r){this.asyncFn=e,this.interval=r,this.running=!1}start(){this.running||(this.running=!0,this.cycle())}stop(){this.running&&(this.running=!1)}async cycle(){try{await this.asyncFn()}catch{}try{await se(this.interval),this.running&&this.cycle()}catch(e){a.error(e),this.stop()}}};function Um(t,e,r,o){let n=r.wrapped||Mn(r,this.appName);r.wrapped=n,t.addEventListener?t.addEventListener(e,n,o):t.attachEvent&&t.attachEvent(e,n)}function Vm(t,e,r,o){r?t.removeEventListener(e,r.wrapped,o):t.removeEventListener(e)}var _={fn:Mn,addListener:Um,removeListener:Vm,setInterval:Bm,SafeAsyncInterval:Aa,setTimeout:$m};function Be(t,e,r,o){function n(s){let u=new Ne(s.message,e.servletName);a.error(u,{customDimensions:{url:t}}),typeof o=="function"&&_.fn(o)(u)}function i(s){if(typeof s!="object"){n(new Error("JSON is not an object"));return}typeof r=="function"&&_.fn(r)(s||{})}function c(s){s.json().then(_.fn(i)).catch(u=>{n(new Error(`Invalid JSON ${u.message}`))})}J(t,e,c,n)}function Ia(){let t=Math.round(bn());if(!t||t<1)return"0";if(t<10)return"10";let e="0";return S(`${t}`,(r,o)=>{o===0?e=r:e+="0"}),e}var ka=document.documentElement,Uu=window.screen,Vu=Math.max;function Wu(){let t=window?.innerHeight+window?.scrollY||0;return Vu(ka?.offsetHeight,ka?.scrollHeight,t)}function qu(){return y()?window.outerHeight:Uu?.height}function Gu(){return y()?window.outerWidth:Uu?.width}function $n(){return Vu(window.pageYOffset,ka?.scrollTop)}async function pe(t){try{let e=y()?await globalThis.browser.localStorage.get(t):window.localStorage.getItem(t);return e?JSON.parse(e):null}catch{}return null}async function H(t){try{if(y()){let e=await globalThis.browser.sessionStorage.getItem(t);return JSON.parse(e)}return JSON.parse(window.sessionStorage.getItem(t))}catch{}return null}var Ca,Oa;async function Wm(){try{if(typeof Oa<"u")return Oa;let t,e=await A(pt);if(e){let r=e.split(".");r.shift(),r.shift(),t=r.join(".")}return Oa=t,t}catch(t){a.error(t);return}}async function ju(){try{if(Ca)return Ca;let t=N("facebook_id")||await Wm();return Ca=t,t}catch(t){a.error(t);return}}var Na;function qm(){let t=w(window,"Shopify.checkout.customer_id")||w(window,"ShopifyAnalytics.meta.page.customerId")||w(window,"__st.cid");if(t)return t.toString()}function Hu(){if(Na)return Na;let t=qm();return Na=t,t}var Ra;async function Gm(){try{return JSON.parse(window.atob(await A(Cn))).$exchange_id}catch{return}}async function zr(){try{if(Ra)return Ra;let t=await Gm();return Ra=t,t}catch(t){a.error(t);return}}function zu(){return window?.ju_config?.ju_vid}function Ju(){return window?.bouncex?.cookie?.hardID}function Zu(){return window?.bouncex?.cookie?.softID}function Ku(){return window?.edgemesh?.id}function Re(t,e){try{e&&(y()?(window.blackcrow.localStorage.set(t,JSON.stringify(e)),browser.localStorage.setItem(t,JSON.stringify(e))):window.localStorage.setItem(t,JSON.stringify(e)))}catch{}}function jt(t){return`${Math.random().toString(36).substring(2,3)}${btoa(t)}`}function hr(t){return t?atob(t.substring(1)):void 0}function Do(t){try{return document.querySelectorAll(`:is(${t})`)}catch{}try{return document.querySelectorAll(`:matches(${t})`)}catch{}try{return document.querySelectorAll(`:-webkit-any(${t})`)}catch{}try{return document.querySelectorAll(`:-moz-any(${t})`)}catch{return[]}}function Yu(t){_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")>0){let r=e.data.__attentive||{};r&&r.email&&t(r.email)}})}function Xu(t){_.addListener(window,"postscriptPopup",e=>{if(e.detail.type==="formSubmit"){let{email:r}=e.detail.values;r&&t(r)}})}function Qu(t){let e=document.getElementById("continue_button"),r=document.querySelectorAll("input[type=email]");e&&r&&_.addListener(e,"click",()=>{t(r[0]&&r[0].value)})}function Bn(){return w(window,"ShopifyCustomer.email")||w(window,"Shopify.checkout.email")||w(window,"Shopify.Checkout.customer.email")}function ef(){return w(window,"userProperties.email")}function tf(){let t=w(window,"_learnq");if(t&&typeof t.identify=="function")return t.identify().$email}function Ma(t){if(t)return t.trim()}function $a(t){return new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t)}function Fo(t){let e=Ma(t);return e&&$a(e)?e:void 0}function yr(t){let e=Fo(t);return e?jt(e):void 0}function Z(t){let e=yr(t);e&&Re(An,e)}function La(t,e=()=>{}){t.value&&e(t.value)}function jm(t,e){let r=t.textContent||t.innerText;return r&&(r=r.toLowerCase()),r&&r.indexOf(e.toLowerCase())!==-1}function Da(t){return jm(t,"email")}function Hm(t){if(t.labels){if(Array.from(t.labels).some(r=>Da(r)))return!0}else if(t.id&&Array.from(document.getElementsByTagName("label")).some(r=>r.htmlFor===t.id&&Da(r)))return!0;if(t.parentNode){let e=t.parentNode;return e.tagName.toLowerCase()==="label"&&Da(e)}return!1}function zm(t){return Array.from(t).filter(r=>Hm(r))}var Fa='input[type="email"], input[autocomplete~="email"], input[placeholder~="email" i], input[type="text"][id*="email" i], input[type="text"][name*="email" i]';function Ba(){let t=Do(Fa);if(!t.length){let e=document.querySelectorAll('input[type="text"]');e.length&&(t=zm(e))}return t}function Un(t=e=>{}){let e=Ba();S(e,r=>{La(r,t)}),_.addListener(window,"focusout",r=>{let o=r.target;o.matches(Fa)||Array.isArray(e)&&e.includes(o)?La(o,t):o.shadowRoot&&o.shadowRoot.querySelectorAll(Fa).forEach(n=>{La(n,t)})},!0)}function rf(t){let e=Bn()||ef()||tf();e&&t(e),Yu(r=>{t(r)}),Xu(r=>{t(r)}),Qu(r=>{t(r)}),Un(r=>{t(r)})}function of(t=()=>{}){let e=Bn()||ef()||tf();return e?(Z(e),t()):(Yu(r=>{Z(r)}),Qu(r=>{Z(r)}),Un(r=>{Z(r),t()}),Xu(r=>{Z(r)})),e}async function ye(){try{let t=await pe(An)||await A(An);return t?hr(t):void 0}catch(t){a.error(t);return}}function Ht(t,e){var r=(t&65535)+(e&65535),o=(t>>16)+(e>>16)+(r>>16);return o<<16|r&65535}function Jm(t,e){return t<<e|t>>>32-e}function Vn(t,e,r,o,n,i){return Ht(Jm(Ht(Ht(e,t),Ht(o,i)),n),r)}function _e(t,e,r,o,n,i,c){return Vn(e&r|~e&o,t,e,n,i,c)}function we(t,e,r,o,n,i,c){return Vn(e&o|r&~o,t,e,n,i,c)}function Ee(t,e,r,o,n,i,c){return Vn(e^r^o,t,e,n,i,c)}function be(t,e,r,o,n,i,c){return Vn(r^(e|~o),t,e,n,i,c)}function Zm(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;var r,o,n,i,c,s=1732584193,u=-271733879,m=-1732584194,g=271733878;for(r=0;r<t.length;r+=16)o=s,n=u,i=m,c=g,s=_e(s,u,m,g,t[r],7,-680876936),g=_e(g,s,u,m,t[r+1],12,-389564586),m=_e(m,g,s,u,t[r+2],17,606105819),u=_e(u,m,g,s,t[r+3],22,-1044525330),s=_e(s,u,m,g,t[r+4],7,-176418897),g=_e(g,s,u,m,t[r+5],12,1200080426),m=_e(m,g,s,u,t[r+6],17,-1473231341),u=_e(u,m,g,s,t[r+7],22,-45705983),s=_e(s,u,m,g,t[r+8],7,1770035416),g=_e(g,s,u,m,t[r+9],12,-1958414417),m=_e(m,g,s,u,t[r+10],17,-42063),u=_e(u,m,g,s,t[r+11],22,-1990404162),s=_e(s,u,m,g,t[r+12],7,1804603682),g=_e(g,s,u,m,t[r+13],12,-40341101),m=_e(m,g,s,u,t[r+14],17,-1502002290),u=_e(u,m,g,s,t[r+15],22,1236535329),s=we(s,u,m,g,t[r+1],5,-165796510),g=we(g,s,u,m,t[r+6],9,-1069501632),m=we(m,g,s,u,t[r+11],14,643717713),u=we(u,m,g,s,t[r],20,-373897302),s=we(s,u,m,g,t[r+5],5,-701558691),g=we(g,s,u,m,t[r+10],9,38016083),m=we(m,g,s,u,t[r+15],14,-660478335),u=we(u,m,g,s,t[r+4],20,-405537848),s=we(s,u,m,g,t[r+9],5,568446438),g=we(g,s,u,m,t[r+14],9,-1019803690),m=we(m,g,s,u,t[r+3],14,-187363961),u=we(u,m,g,s,t[r+8],20,1163531501),s=we(s,u,m,g,t[r+13],5,-1444681467),g=we(g,s,u,m,t[r+2],9,-51403784),m=we(m,g,s,u,t[r+7],14,1735328473),u=we(u,m,g,s,t[r+12],20,-1926607734),s=Ee(s,u,m,g,t[r+5],4,-378558),g=Ee(g,s,u,m,t[r+8],11,-2022574463),m=Ee(m,g,s,u,t[r+11],16,1839030562),u=Ee(u,m,g,s,t[r+14],23,-35309556),s=Ee(s,u,m,g,t[r+1],4,-1530992060),g=Ee(g,s,u,m,t[r+4],11,1272893353),m=Ee(m,g,s,u,t[r+7],16,-155497632),u=Ee(u,m,g,s,t[r+10],23,-1094730640),s=Ee(s,u,m,g,t[r+13],4,681279174),g=Ee(g,s,u,m,t[r],11,-358537222),m=Ee(m,g,s,u,t[r+3],16,-722521979),u=Ee(u,m,g,s,t[r+6],23,76029189),s=Ee(s,u,m,g,t[r+9],4,-640364487),g=Ee(g,s,u,m,t[r+12],11,-421815835),m=Ee(m,g,s,u,t[r+15],16,530742520),u=Ee(u,m,g,s,t[r+2],23,-995338651),s=be(s,u,m,g,t[r],6,-198630844),g=be(g,s,u,m,t[r+7],10,1126891415),m=be(m,g,s,u,t[r+14],15,-1416354905),u=be(u,m,g,s,t[r+5],21,-57434055),s=be(s,u,m,g,t[r+12],6,1700485571),g=be(g,s,u,m,t[r+3],10,-1894986606),m=be(m,g,s,u,t[r+10],15,-1051523),u=be(u,m,g,s,t[r+1],21,-2054922799),s=be(s,u,m,g,t[r+8],6,1873313359),g=be(g,s,u,m,t[r+15],10,-30611744),m=be(m,g,s,u,t[r+6],15,-1560198380),u=be(u,m,g,s,t[r+13],21,1309151649),s=be(s,u,m,g,t[r+4],6,-145523070),g=be(g,s,u,m,t[r+11],10,-1120210379),m=be(m,g,s,u,t[r+2],15,718787259),u=be(u,m,g,s,t[r+9],21,-343485551),s=Ht(s,o),u=Ht(u,n),m=Ht(m,i),g=Ht(g,c);return[s,u,m,g]}function Km(t){var e,r="",o=t.length*32;for(e=0;e<o;e+=8)r+=String.fromCharCode(t[e>>5]>>>e%32&255);return r}function Ym(t){var e,r=[];for(r[(t.length>>2)-1]=void 0,e=0;e<r.length;e+=1)r[e]=0;var o=t.length*8;for(e=0;e<o;e+=8)r[e>>5]|=(t.charCodeAt(e/8)&255)<<e%32;return r}function Xm(t){return Km(Zm(Ym(t),t.length*8))}function Qm(t){var e="0123456789abcdef",r="",o,n;for(n=0;n<t.length;n+=1)o=t.charCodeAt(n),r+=e.charAt(o>>>4&15)+e.charAt(o&15);return r}function eg(t){return unescape(encodeURIComponent(t))}function tg(t){return Xm(eg(t))}function rg(t){return Qm(tg(t))}function Ua(t){return rg(t)}function Va(t){return(M("experiments")||[]).find(r=>r.name===t)||{}}function Wa(t){let e=Va(t);if(!e.name)return e;let r=He(k());function o(i,c){let s,u;if(Array.isArray(i)&&i.length&&i[0].value&&typeof i[0].percent=="number")s=`${t}_${c}`,u=i;else if(i.allocations){let m=i.name||c;s=`${t}_${m}`,u=i.allocations}if(s&&u){let m=t,g=i.short_name||c;return te({name:s,allocations:u,force:r[`bcai_${m}_${g}`]})}return i}function n(i,c){if(!i)return i;let s=Array.isArray(i)?[]:{},u;return Object.keys(i).forEach(m=>{let g=c?`${c}_${m}`:m;u=o(i[m],g),s[m]=typeof u=="object"?n(u,g):u}),s}return{name:e.name,active:e.active,data:n(e.data)}}async function qa(){try{if(Wa("pwo_additional_context")?.active){let e=await ye();if(e)return Ua(`${e}bcai${d}`)}return}catch(t){a.error(t);return}}function nf(){return window?.__fudge__?.deviceId}var af=t=>async()=>{try{return N(t)||await H(t)||await pe(t)||await A(t)}catch(e){a.error(e);return}},Mo=t=>async()=>{try{return await A(t)}catch(e){a.error(e);return}},me=(t,e)=>{let r;return async()=>{try{return r=r||await e(),{platform:t,id:r}}catch(o){a.error(o);return}}},og=me("fa",ju),ng=me("ga",Gt),ig=me("cdp",af("cdp_id")),ag=me("shop_cid",Hu),sg=me("shop_aid",Mo("_shopify_y")),cg=me("kl_cid",zr),ug=me("attv_cid",Mo("__attentive_id")),fg=me("ju_cid",zu),dg=me("bx_hid",Ju),lg=me("bx_sid",Zu),pg=me("tab_cid",af("taboola global:user-id")),mg=me("bc_cid",Mo(Io)),gg=me("_bc_i",Tt),hg=me("_bt_uid",Mo("tag_user_id")),yg=me("_bc_em",qa),vg=me("edme_id",Ku),_g=me("fdg_id",nf),wg=me("_bcai_z",Mo("_bcai_z"));async function Ga(){try{return[await og(),await ng(),await ig(),await ag(),await sg(),await cg(),await ug(),await pg(),await mg(),await gg(),await fg(),await dg(),await lg(),await hg(),await yg(),await vg(),await _g(),await wg()]}catch(t){return a.error(t),[]}}var ja;async function Ha(){try{return ja||await A(Zi)||void 0}catch(t){return a.error(t),ja||void 0}}function sf(t){t&&(ja=t,Y(Zi,t,1051200))}async function cf(){try{let e=(await Ha())?.split("_",3);if(e)return{page_correlation_id:e[0],session_id:e[1]};throw new jr("Attempted to parse historyId before it has been set!")}catch(t){a.error(t);return}}var $o=ne("page"),Eg={page:{ignored:!1,log_purchase:!1}};function uf(t){return{page:{ignored:t.ignored,log_purchase:t.log_purchase}}}function ff(t={},e){let r=N("page_id"),o=Eg;r!==void 0&&t?S(t.filter(s=>s.pageName),s=>{if(s.pageName===r)return o=uf(s),!1}):r===void 0&&t&&S(t.filter(s=>s.pattern),s=>{try{let u=e.match(s.pattern);if(u){if(r=s.pageName,o=uf(s),u.length>1)for(let m=1;m<u.length;m+=1)r=r.replace(`$${m}`,u[m]);return!1}}catch{}}),r||(r="other");let n=$o.get("lastUrl"),i=$o.get("lastId"),c=r!==i||e!==n;return $o.set("lastUrl",e),$o.set("lastId",r),{id:r,config:o,isNewPage:c,currentUrl:e,lastUrl:n}}function vr(){return $o.get("lastId")}var za={};function df(t){za=t}async function lf(t,e,r){try{let o={},n=Object.keys(za||{});for(let i=0;i<n.length;i+=1){let c=n[i],s=za[c];typeof s=="function"?o[c]=await s(t[c],e,r):typeof s<"u"&&(o[c]=s)}return o}catch(o){return a.error(o),{}}}function bg(t,e){return e||(t==="_shopify_y"?"aid":t)}async function Sg(t){try{let e,r=t.value,o=t.nameOverride,n=await A(r);return r&&n&&(e={name:bg(r,o),value:n}),e}catch(e){a.error(e);return}}async function Q(t){try{let e=[];for(let r=0;r<t.length;r+=1){let o=t[r];if(o.source==="cookie"){let i=await Sg(o);i&&e.push(i)}}return e}catch(e){return a.error(e),[]}}function Ke(t,e){let r=[];return t&&e&&r.push({name:t,value:e}),r}function pf(){let t=Ce(),e=/.*(\/checkouts\/[a-z]{1,3}\/)/gm;if(t?.match(e))return t=t.replace(e,""),t?.replace(/\/$/,"").split("/")[0];if(t?.includes("/checkouts/"))return t=t.replace(/.*checkouts\//,""),t?.replace(/\/$/,"").split("/")[0]}function Pg(){let t="0123456789abcdef";return t.charAt(Math.floor(Math.random()*t.length))}function Bo(t){return new Array(t).fill(".",0,t).map(()=>Pg()).join("")}function Uo(){return`${Bo(8)}-${Bo(4)}-${Bo(4)}-${Bo(4)}-${Bo(12)}`}function zt(t){return t!==void 0?(t*.01).toLocaleString("en-US",{currency:"USD",minimumFractionDigits:2,useGrouping:!1}):void 0}function Vo(t){return t?typeof t=="string"?zt(t.replace(/\D/g,"")*1):t.toString():"0.00"}async function Wo(t){try{let[e]=await Q(t);return e?.value?{external_id:e.value}:void 0}catch(e){a.error(e);return}}function mf(){let t=document.getElementById("shopify-pay-alternate-title");if(w(window,"ShopifyPay")&&t)return{custom_dimensions:{payment_type:"shop-pay"}};if(w(window,"Shopify.checkout")){let e=document.getElementsByClassName("payment-icon");if(e.length&&e[0].textContent)return{custom_dimensions:{payment_type:e[0].textContent.trim()}}}}function Ja(){let t={},e=w(window,"Shopify.checkout"),r=w(window,"shopifyEvent.name");if(r&&E(t,{shopify_event_name:r}),e&&(E(t,{event_id:e.order_id,total_price:Vo(e.total_price),currency:e.presentment_currency,shipping_method:e.shipping_rate?.title,shipping_price:Vo(e.shipping_rate?.price),cart:e.line_items&&e.line_items.map(o=>({id:o.product_id,price:Vo(o.price),quantity:o.quantity,categories:[o.title],msrp:Vo(o.line_price),color:o.variant_title,brand:o.vendor}))}),e.discount)){let o=e.discount;E(t,{discounts:[{code:o.code,discount_amount:o.amount,discount_currency:e.currency,discount_percent:o.rate,applicable:o.applicable,reason:o.reason}]})}return t}function Za(t){return{destination_airport:t.destination_airport,destination_city:t.destination_city,destination_country:t.destination_country,destination_state:t.destination_state,end_date:t.end_date,lodging_id:t.lodging_id,origin_airport:t.origin_airport,rooms:t.rooms,start_date:t.start_date,travelers:t.travelers}}function Ka(){return N("partner_controlled_experiments")}var xg=.1,gf=te({name:"performance_sampling",allocations:[{percent:xg,value:!0}]});function qo(t=`${l}js/core/`){try{let e=Wt("resource").find(r=>r.name.includes(t));return e&&e.startTime}catch{a.error(new mt("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Tg(){try{let t=Wt("resource").find(e=>e.name.includes("gtm.js"));return t&&t.startTime}catch{a.error(new mt("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function hf(){try{let t=Wt("resource").find(e=>e.name.includes(`${l}js/core/`));if(t){let{name:e}=t;if(e.includes("shopify-init"))return"SHOPIFY";if(e.includes("source=gtm"))return"GTM"}return"JS"}catch{a.error(new mt("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Ag(){let t=qo(),e=hf();if(t&&e==="GTM"){let r=Tg();if(r)return t-r}}function Ig(){try{let t=Wt("resource").find(e=>e.name.includes("https://api.blackcrow.ai/v1/events/view"));return t&&t.startTime}catch{a.error(new mt("Unable to get time to view request: Browser does not support PerformanceResourceTiming interface"));return}}function yf(){if(gf){let t=qo(),e=hf()||"unknown",r=e==="GTM"?Ag()||"unknown":"N/A";t&&le(`Initial script load after ${t} ms`,{"script.start_time":t,"script.load_method":e,"script.time_since_gtm_start":r,"view.url":N("page_url")||k(),"view.referrer":N("page_referrer_url")||xe()})}}function vf(){if(gf){let t=Ig()-qo();t&&le(`Time to initiate view request: ${t} ms`,{"script.time_to_view":t,"view.url":N("page_url")||k(),"view.referrer":N("page_referrer_url")||xe()})}}function _f(){return{nb:{active:!!window.Northbeam},tw:{active:!!window.TriplePixel},bt:{active:!!window.edgetag},rb:{active:!!window.Rebuy},np:{active:!!window.fetchNovelSession},yp:{active:!!window.Yotpo},jm:{active:!!window.judgeme},lx:{active:!!window.LOOX},oke:{active:!!window.okeConnectApi}}}var j={VIEW:"view",PURCHASE:"purchase",DELAYED_PURCHASE:"delayed_purchase",BAD_ACTOR_TIMEOUT:"bad_actor_timeout",BAD_ACTOR_BEFOREUNLOAD:"bad_actor_beforeunload",PWO_IMPR:"pwo_impression",PWO_EMAIL_LEAD:"pwo_email_lead",PWO_SMS_LEAD:"pwo_sms_lead",PWO_CLOSE:"pwo_close",PWO_OPEN_ATTEMPT:"pwo_open_attempt",PWO_DECISION:"pwo_decision",PRED_WELCOME_DECISION:"pred_welcome_decision",EXIT_INTENT:"exit_intent",SITE_SPEED_BUCKETING:"site_speed_bucketing",SITE_SPEED_FID_METRIC:"site_speed_fid_metric",SITE_SPEED_LCP_METRIC:"site_speed_lcp_metric"};function Wn(){return{api_client_type:"JS",api_client_version:"15515",api_client_source:Ji()}}function gt(t){let e=N(`custom_${t}`);return typeof e=="object"?Array.isArray(e)?String(e):JSON.stringify(e):e}function kg(t,...e){return t=t||{},S(e,r=>{S(r,(o,n)=>{(o||o===0||o===!1)&&(t[n]=o)})}),t}function Cg(){return{coupon:N("coupon"),shipping_method:N("shipping_method"),shipping_price:N("shipping_price"),total_price:N("total_price"),zip_code:N("zip_code"),custom_1:gt(1),custom_2:gt(2),custom_3:gt(3),custom_4:gt(4),custom_5:gt(5),custom_6:gt(6),custom_7:gt(7),custom_8:gt(8),custom_9:gt(9),custom_10:gt(10),traffic_groups:N("traffic_groups"),partner_controlled_experiments:Ka(),referrer_source:N("referrer_source"),referrer_medium:N("referrer_medium"),referrer_campaign:N("referrer_campaign"),referrer_term:N("referrer_term"),cart:N("cart"),currency:N("currency"),is_logged_in_user:N("user_is_logged_in"),user_has_subscription:N("user_has_subscription")}}async function Og(t){try{let e=await Ze();return{metadata:Wn(),build:"15515",site_name:d,custom_dimensions:N("custom_dimensions"),device_info:ve(),device_width:Gu(),device_height:qu(),page_id:t,page_url:N("page_url")||k(),page_referrer_url:N("page_referrer_url")||xe(),page_title:N("page_title")||Gr(),page_time:Ia(),visitor_id:e.id,internal_id:Tt(),member_id:N("member_id"),history_id:await Ha(),user_identifiers:await Ga(),user_metadata:{visitor_id:{source:e.source,name:e.name,fallback_used:e.fallback}},bundle_load_start:qo(),attr:_f()}}catch(e){return a.error(e),{}}}function Ng(t){return t?["view","purchase","delayed_purchase"].includes(t):!0}function Rg(t){return t?["view","purchase"].includes(t):!0}function Lg(t){return t?t==="purchase":!0}var Dg={travel:Za};function Fg(){let t={};return S(Dg,(e,r)=>{let o=N(`${r}`);o&&(t[r]=e(o))}),t}function Mg(t){["custom_dimensions","event_id"].forEach(r=>{t[r]===void 0&&(t[r]="")})}function $g(t){return[j.PWO_DECISION,j.PWO_OPEN_ATTEMPT,j.PWO_IMPR,j.PWO_EMAIL_LEAD,j.PWO_SMS_LEAD,j.PWO_CLOSE].includes(t)}function Bg(t){return[j.SITE_SPEED_BUCKETING,j.SITE_SPEED_FID_METRIC,j.SITE_SPEED_LCP_METRIC].includes(t)}async function Ya(t,e={}){try{let r=e.page_id||vr(),o=await Og(r);Ng(t)&&(o={...o,...Cg()},E(o,Fg(),Ja())),Lg(t)&&o.purchase_type===void 0&&(o.purchase_type=""),($g(t)||Bg(t))&&(o={...o,...e}),Mg(o),S(o,(i,c)=>{typeof e[c]<"u"&&(o[c]=e[c])}),Rg(t)||E(o,{custom_dimensions:await cf()});let n=await lf(o,t,r);return kg({},o,n)}catch(r){return a.error(r),{}}}var Ug=500,Xa={},Qa={};function es(){Qa={},Xa={}}function wf(t){return Qa[t]||0}function Vg(t){let e=!1,r=t==="view"?1:M(`config.events.${t}.dedupe.limit_per_page`);return r&&(e=wf(t)>=r),e?"limit_per_page":""}function Wg(t,e){return t.startsWith("datalayer-")?"":e-(Xa[t]||0)<Ug?"debounce":""}async function qg(t,e,r){try{let o="",n=e.event_id,i=M(`config.events.${t}.dedupe.time_threshold`);if(n||i){let c=await pe(Ki)||{},s=c[t]||{};i&&r-(s.time||0)<parseInt(i,10)&&(o="time_threshold"),!o&&n&&n===s.id&&(o="repeat_id"),o||(c[t]={time:r,id:n},Re(Ki,c))}return o}catch(o){return a.error(o),""}}async function Ef(t,e){try{let r=Date.now(),o=Wg(t,r)||Vg(t)||await qg(t,e,r);return o||(Qa[t]=wf(t)+1,Xa[t]=r),o}catch(r){a.error(r);return}}var ts="EventsAPI";async function re(t,e,r,o){try{let n=`https://api.blackcrow.ai/v1/events/${t}?`;xt(d)&&(n=`https://api.sandbox.blackcrow.ai/v1/events/${t}?`);let i=await Ya(t,e),c=await Ef(t,i);if(c){a.error(new Ne(`Duplicate ${t}: ${c}`,ts));return}let s=JSON.stringify(i),u={servletName:ts,method:"POST",cache:"no-cache",body:s};ie(`request: ${t}`,{body:s}),Be(n,u,r,o)}catch(n){a.error(new Ne(n,ts))}}function bf(t){let e="https://api.blackcrow.ai/v1/events/platform?";xt(d)&&(e="https://api.sandbox.blackcrow.ai/v1/events/platform?");let r=JSON.stringify(t);Wr(e,r)}var h={START:"start",SESSION:"session",SET:"set",EXTEND:"extend",REFRESH:"refresh",PARTNER_EVENT:"partner_event",VIEW:"view",VIEW_RESPONSE:"view_response",PURCHASE:"purchase",SCORES_UPDATE:"scores_update",IDENTIFY:"identify",PWO_IMPR:"pwo_impression",PWO_EMAIL_LEAD:"pwo_email_lead",PWO_SMS_LEAD:"pwo_sms_lead",PWO_CLOSE:"pwo_close",PWO_OPEN_ATTEMPT:"pwo_open_attempt",OVERRIDES:"overrides",CLEAR_OVERRIDES:"clear_overrides",EXIT_INTENT:"exit_intent",ADD_TO_CART:"add_to_cart",INITIATE_CHECKOUT:"initiate_checkout"};var Gg=["purchase","referral","call","update_account"],jg=["purchase","referral","call"];function Sf(t){return Gg.indexOf(t)!==-1}function Hg(t){let e=t.trigger,r=t.data||{};e==="call"&&(r.purchase_type="call"),jg.indexOf(e)!==-1&&(e=j.PURCHASE),re(e,r)}function Pf(){W("platform",h.PARTNER_EVENT,Hg)}function rs({appName:t,eventName:e,data:r,sendFn:o}){let n={namespace:f,app_name:t,event_name:e,data:r};if(o)o(n,"*");else try{window.top.postMessage(n,"*")}catch(i){if(i instanceof DataCloneError)a.error(new mt("Attempting to post invalid message object"));else throw i}}var zg=ne("bound_events"),Jg=ne("triggered_events");function Se(t,e,r,o){o=o||{},o.noCache||Jg.push(`${t}.${e}`,{data:r,onExec:o.onExec});let n=zg.get(`${t}.${e}`);S(n,i=>{Lo(i,r,o.onExec)}),o.postMessage&&rs({appName:t,eventName:e,data:r})}function L(t,e=()=>{},r=9,o=300,n=!1){try{return t()}catch(i){return r?_.setTimeout(()=>L(t,e,r-1,n?o*2:o,n),o):e(i)}}function Zg(){y()||(a.postMessageEventListener&&_.removeListener(window,"message",a.postMessageEventListener),a.postMessageEventListener=t=>{let e=t.data||{};e.namespace===f&&(ie(`trigger: ${e.event_name}`,e.data),Se(e.app_name||"platform",e.event_name,e.data))},_.addListener(window,"message",a.postMessageEventListener))}function Jr(t){if(!t)return;let e=t.app_name||"platform",r=t.data,o=t.trigger;if(o){ie(`trigger: ${o}`,t),o===h.EXTEND?On(r):o===h.SET?Nn(r):Sf(o)?Se(e,h.PARTNER_EVENT,t):Se(e,o,r);return}let n=t.bind;if(n){ie(`bind: ${n}`,t),W(e,n,t.callback,{origEvent:t});return}ie("unrecognized",t)}function xf(){S(p,t=>{Jr(t)})}function Tf(){return L(()=>Zg(),t=>a.error(t)),Jr}function os(){Tf(),a.push=Jr,a.history=wu}var Af="IntentProperties";function At(t){return t?w(window[Af],t):window[Af]}function ns(){let t=At();if(t){let e={page_id:t.page_id,visitor_id:t.visitor_id||t.publisher_user_id,member_id:t.member_id,user_is_logged_in:t.is_logged_in_user,user_has_subscription:t.user_has_subscription,page_url:t.page_url,page_referrer_url:t.page_referrer_url,page_title:t.page_title,referrer_source:t.referrer_source,site_currency:t.site_currency,site_country:t.site_country,site_language:t.site_language,site_name:t.site_name,traffic_groups:t.traffic_groups,custom_1:t.site_custom_1,custom_2:t.site_custom_2,custom_3:t.site_custom_3,custom_4:t.site_custom_4,custom_5:t.site_custom_5,custom_6:t.site_custom_6,custom_7:t.site_custom_7};t.cart&&(e.cart=t.cart),t.travel&&(e.travel=E({},{start_date:t.travel.start_date,end_date:t.travel.end_date,origin_airport:t.travel.origin_airport,destination_airport:t.travel.destination_airport,travelers:t.travel.travelers})),Jr({trigger:h.EXTEND,data:e})}}var Kg=ne("bound_events"),Yg=ne("triggered_events");function is(){Kg.clear(M("config.clearBindings")),Yg.clear()}function If(){let t=w(window,"Shopify.checkout.total_tax");if(t)return t;let e=document.querySelectorAll("[data-checkout-total-taxes-target]");return e.length?e[0].textContent.startsWith("$")?e[0].textContent.trim().substring(1):e[0].textContent.trim():"0.00"}function ee(t){/complete|interactive|loaded/.test(document.readyState)?t():_.addListener(document,"DOMContentLoaded",()=>{t()})}async function as(){try{let t=await A("cart"),e=await A(Yi);return t&&Y(Yi,t),!t||!e||e!==t}catch{return!0}}function Xg(){return{total_price:At("total_price"),coupon:At("coupon"),shipping_method:At("shipping_method"),shipping_price:At("shipping_price"),zip_code:At("zip_code")}}function ss(t){if(!t)return;let e=t.amount??0;return zt(e*100)}function kf(){if(y()){let r=window.shopifyCheckout;return r?{total_price:ss(r.totalPrice),shipping_price:ss(r.shippingLine?.price),custom_dimensions:{tax_amount:ss(r.totalTax)}}:{}}let t=mf(),e={custom_dimensions:{tax_amount:window.Shopify?If():void 0},total_price:window.cart_json?.total_price};return E({},t,e)}function Qg(){window.IntentProperties&&On(Xg()),Y(mu,!0,1051200),re(j.PURCHASE,kf())}async function cs(){M("page.log_purchase")&&await as()&&(Qg(),ee(()=>{re(j.DELAYED_PURCHASE,kf())}))}var ot="audience";function Ye(t){return ha(`apps.${t}`)}var Cf="o",Of=`${f}_audience|score_update`,us=`${f}_score`,Nf=`contextData.${us}`;function G(t){let e=Number(t);return isNaN(e)?t:e}var $="Integration not available";function X(t,e){return(r,o,n)=>{if(!r)return;function i(c){c.message===$?a.error(new T(`${t} globals not found`),{appName:o}):a.error(c)}L(()=>e(r,o,n),i)}}var fs="adobe_analytics";function th(t,e,r){let o=w(window,"s.tl");if(typeof o=="function"){let n={contextData:{[us]:G(t.score)},linkTrackVars:Nf};o(!0,Cf,Of,n),typeof r=="function"&&r(fs,n);return}throw new Error($)}var ds={name:fs,send:X(fs,th)};var Rf="event";function B(t,e="|"){return t.filter(r=>r!=null&&r!=="").join(e)}var ls="dynamic_yield";function rh(t){return t==="1"?"low":t==="2"?"medium":"high"}function oh(t,e,r){let o=w(window,"DY.API"),n;t.threshold_group_count==="3"&&(n=rh(t.score));let i=B([f,t.comparison_group.toLowerCase(),n||`score_${t.score}`]);if(typeof o=="function"){let c=G(t.score);o(Rf,{name:i,properties:{}}),typeof r=="function"&&r(ls,{EVENT_PREFIX:`${f}_${e}`,score:c})}else throw new Error($)}var ps={name:ls,send:X(ls,oh)};function Go(t){let e=new Error(t);return e.name="ConfigDataError",e.status="warn",e.stack=oe(e.stack,1),e}function Lf(t,e){let r=encodeURIComponent(t);return e&&(r=r.replace(/%2C/g,",")),r}function Pe(t,e=!0){let r=[];return S(t,(o,n)=>{if(o!=null&&o!==""){let i=typeof o;i==="function"?o=o.name:i==="object"&&(Array.isArray(o)?o=o.toString():o=JSON.stringify(o)),r.push(`${Lf(n,e)}=${Lf(o,e)}`)}}),r.join("&")}function ms(t,e){return typeof t=="string"&&typeof e=="string"?t.localeCompare(e,void 0,{sensitivity:"accent"})===0:t===e}function Df(t){let e=`${t}`;return e.length===1?`0${e}`:e}function _r(t){if(t)return new Date(t?.replace(/-/g,"/"))}function qn(t,e=""){if(t)return`${t.getFullYear()}${e}${Df(t.getMonth()+1)}${e}${Df(t.getDate())}`}function nh(t){if(t&&t.formBuckets){let e=new Date,r=t.formBuckets||[],o=r.filter(i=>!i.startDate&&!i.endDate),n=r.filter(i=>i.startDate&&_r(i.startDate)<=e&&(!i.endDate||_r(i.endDate)>=e));if(n.length!==0){let i="01-Jan-2100 04:00:00 UTC";n.sort((u,m)=>_r(m.startDate)-_r(u.startDate)),n.sort((u,m)=>{let g=u.endDate||i,b=m.endDate||i;return _r(g)-_r(b)});let c=n[0].startDate,s=n[0].endDate;n=n.filter(u=>u.startDate===c&&u.endDate===s)}t.formBuckets=n.length>0?n:o,t.formBuckets.length===0&&delete t.formBuckets}return t}function gs(t,e="PWO",r=["formBuckets","overlayBuckets","overlayBuckets_triggerBuckets","overlayBuckets_triggerBuckets_formBuckets"]){if(t?.overlaySetting===void 0||t?.overlaySetting===null)return t;let o=He(k());function n(c,s){let u,m;if(Array.isArray(c)&&c.length){let g=JSON.parse(JSON.stringify(c));typeof g[0].percent!="number"&&r.includes(s)&&(g[0].percent=1),typeof g[0].percent=="number"&&(u=`${e}_${s}`,m=g.map(b=>({percent:b.percent,value:{...b}})))}if(u&&m){let g=e,b=c.short_name||s;return te({name:u,allocations:m,force:o[`bcai_${g}_${b}`]})}return c}function i(c,s){if(c==null)return c;let u=Array.isArray(c)?[]:{},m;return Object.keys(c).forEach(g=>{let b=s?`${s}_${g}`:g;m=n(c[g],b),u[g]=typeof m=="object"?i(m,b):m}),u}return{...t,overlaySetting:i(nh(t.overlaySetting))}}function ih(t){let e=k()?.toLowerCase();return e&&t?.length?t.find(r=>e.match(r.toLowerCase())):!1}function ah(t,e){let r=t.filter(n=>ms(n.app,e));return r.length?r.find(n=>ih(n.allowedUrlPatterns))||r.find(n=>!n.allowedUrlPatterns?.length)||{}:{}}function Ue(t){if(t){let e=M("apps")||[];if(e)return ah(e,t)}return{}}function Gn(t){let e=Ue(t).platforms||[],r=[];return e.forEach(o=>{r.push(o.platform.toLowerCase())}),r}function z(t,e){if(t&&e){let r=Ue(t);if(r)return(r.platforms||[]).find(i=>ms(i.platform,e))||{}}return{}}function jn(t){return t?gs(Ue(t),t).overlaySetting||{}:{}}function wr(t){return t?Ue(t).identitySetting||{}:{}}function jo(t,e){let r=wr(t).platforms?.filter(i=>i.platform?.toLowerCase()===e),o=[],n=k();return n&&(o=r?.filter(i=>i.allowedUrlPatterns?.some(c=>n.includes(c)))),o.length||(o=r?.filter(i=>!i.allowedUrlPatterns?.length)),o}async function ht(t,e=10,r=300,o=!1){let n=e,i=r,c;do try{return await t()}catch(s){n-=1,n&&(await se(i),i=o?i*2:i,c=s)}while(n);throw c}var Mf="event",Ho="owox",Hn=[];async function sh(t){let e=await Gt();if(e)t(e);else throw new Error($)}function Ff(t,e,r,o){t.cid=e,t.z=Date.now(),J(`https://google-analytics.bi.owox.com/${r}?${Pe(t)}`,{method:"GET"},()=>o(Ho,t))}function ch(t,e,r){let o=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga,i=z(e,Ho).tracking_id;if(typeof o=="function"){let c=_.setTimeout(()=>{a.error(new T(`${Ho} ready hook not fired`))},5e3);o(s=>{if(clearTimeout(c),i=i||s&&s.get("trackingId"),i||S(o.getAll(),u=>{let m=u.get("trackingId");if(m)return i=m,!1}),i){if(!t)return;let u=`${f}_${e}`,m=B([u,t.integration_product,t.conversion_product,t.conversion_type]),g=B([t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,t.comparison_group]);Hn.push({v:1,ni:1,t:Mf,tid:i,dl:k(),ec:m,ea:g,el:G(t.score)}),Array.isArray(Hn)&&ht(sh(b=>{let V=Hn;Hn={push:de=>{Ff(de,b,i,r)}},V.forEach(de=>{Ff(de,b,i,r)})}))}else a.error(new Go(`${Ho} tracking id not found`))})}}var hs={eventHitType:Mf,name:Ho,send:ch};var uh=te({name:"kpi_sampling",allocations:[{percent:.1,value:!0}]});async function It(t,e,r){try{if(uh){let o=await Ze();le(`${r} ${e}`,{"evt.name":r,"evt.integration":e,appName:t,"usr.id":o.id,"view.url":N("page_url")||k(),"view.referrer":N("page_referrer_url")||xe()})}}catch(o){a.error(o)}}var ys={[ds.name]:ds,[ps.name]:ps,[hs.name]:hs};function vs(t,e,r){It(ot,t,e),ie(`${ot} ${e}: ${t}`,r)}function fh(t,e){ys[t]!==void 0&&e&&S(e,r=>{r.name&&ys[t].send(r,ot,(o,n)=>{vs(o,"score_push",n)})})}function dh(){let t=Ye(`${ot}.scores`);t&&t.length&&Se(ot,h.SCORES_UPDATE,t,{onExec:()=>{vs(d,h.SCORES_UPDATE,t)}});let e=t?t[0]:null;if(e){let r={score:parseInt(e.score,10),comparison_group:e.comparison_group,threshold_group_count:e.threshold_group_count};Se(ot,"score_update",E({},r),{onExec:()=>{vs(d,"score_update",r)}})}}function lh(t){let e=Ye(`${ot}.integrations`),r=[];return S(e,o=>{let n=o.platform;t[n]&&r.push(t[n].then(()=>{fh(n,o.scores)}))}),dh(),Promise.all(r)}var $f={appName:ot,platforms:ys,sendAppScores:lh};function Uf(t){_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")>0){let r=e.data.__attentive||{};r&&r.phone&&t(`+1${r.phone}`)}})}function Vf(t){_.addListener(window,"postscriptPopup",e=>{if(e.detail.type==="formSubmit"){let{phone:r}=e.detail.values;r&&t(r.includes("+")?r:`+${r}`)}})}function Wf(t){let e=document.getElementById("continue_button"),r=document.querySelectorAll("input[type=tel]");e&&r&&_.addListener(e,"click",()=>{if(r[0]){let o=r[0].value;t(o)}})}function qf(){return w(window,"Shopify.checkout.phone")}function Gf(){let t=w(window,"_learnq");if(t&&typeof t.identify=="function")return t.identify().$phone}function ph(t){let e=t.match("\\+")?t:`+1${t}`;return e=e.replace(/^(\+)|\D/g,"$1"),e}function mh(t){return new RegExp(/^\+\d{10,14}$/g).test(t)}function Er(t){let e=ph(t);return mh(e)?jt(e):void 0}function ce(t){let e=Er(t);e&&Re(In,e)}function Bf(t,e=()=>{}){t.value&&e(t.value)}var _s='input[type="tel"], input[autocomplete~="tel"], input[type="text"][id*="phone" i], input[type="text"][name*="phone" i]';function jf(t=()=>{}){let e=Do(_s);S(e,r=>{Bf(r,t)}),_.addListener(document,"focusout",r=>{let o=r.target;if(o.matches(_s)){let n=o.value;n&&t(n)}else o.shadowRoot&&o.shadowRoot.querySelectorAll(_s).forEach(n=>{Bf(n,t)})},!0)}function Hf(t){let e=qf()||Gf();e&&t(e),Uf(r=>{t(r)}),Vf(r=>{t(r)}),Wf(r=>{t(r)}),jf(r=>{t(r)})}function zf(t=()=>{}){let e=qf()||Gf();return e?(ce(e),t()):(Uf(r=>{ce(r)}),Wf(r=>{ce(r)}),jf(r=>{ce(r),t()}),Vf(r=>{ce(r)})),e}async function br(){try{let t=await pe(In)||await A(In);return t?hr(t):void 0}catch(t){a.error(t);return}}function gh(t){let e=document.getElementById("continue_button"),r=document.getElementById("checkout_shipping_address_first_name"),o=document.getElementById("checkout_shipping_address_last_name");e&&r&&o&&_.addListener(e,"click",()=>{t(r.value,o.value)})}function Jf(){gh((t,e)=>{Re(ra,jt(t)),Re(oa,jt(e))})}async function Zf(){try{let t=await pe(ra);return t?hr(t):void 0}catch(t){a.error(t);return}}async function Kf(){try{let t=await pe(oa);return t?hr(t):void 0}catch(t){a.error(t);return}}function hh(t){if(t)return t.replace(/['.,/#!$%^&*;:{}=\-_`~()]/g,"")}function zn(t){let e=hh(t);return e?jt(e):void 0}function yh(t,e){let r=t[e];if(r){let{first_name:o,last_name:n}=r;if(n){let i={fn:o,ln:n};return o&&(i.fln=`${o} ${n}`),E({},i)}}}function Yf(){let t=[],e=Oe()&&w(window,"Shopify.checkout");return e&&["billing_address","credit_card","shipping_address"].forEach(r=>{let o=yh(e,r);o&&t.push(o)}),t.length?t:void 0}function ws(t,e){let r=document.createElement(t);return Object.keys(e).forEach(n=>{r[n]=e[n]}),r}function Es(t){if(!t||!crypto||!crypto.subtle||typeof crypto.subtle.digest!="function")return Promise.resolve(void 0);let e=new TextEncoder().encode(t);return crypto.subtle.digest("SHA-256",e).then(r=>Array.from(new Uint8Array(r))).then(r=>r.map(o=>o.toString(16).padStart(2,"0")).join(""))}function Jn(t){let e=Object.keys(t).map(r=>Es(t[r]).then(o=>{t[r]=o}));return Promise.all(e).then(()=>E({},t))}var vh="facebook_ads";async function bs(){try{let t=await br(),e={em:await ye(),ph:t&&t.replace(/\D/g,""),fn:await Zf(),ln:await Kf()};return E({},e)}catch(t){return a.error(t),{}}}async function Xf(t,e,r,o,n){try{let i=`https://www.facebook.com/tr?id=${t}&ev=${o}&noscript=1`,c=await bs(),s=await Jn(c),u=await A(pt),m=await A(qt);return S(s,(g,b)=>{i+=`&ud[${b}]=${g}`}),S(n,(g,b)=>{i+=`&cd[${b}]=${g?.toString()}`}),r&&(i+=`&ud[external_id]=${r}`),e&&(i+=`&eid=${e}`,i+="&cdl=API_unavailable",i+="&rqm=GET",i+="&coo=false"),u&&(i+=`&fbp=${u}`),m&&(i+=`&fbc=${m}`),i}catch(i){return a.error(i),`https://www.facebook.com/tr?id=${t}&ev=${o}`}}function Qf(t,e,r){return Xf(t,void 0,void 0,e,r).then(o=>{let n=ws("img",{width:1,height:1,src:o});n.style.display="none",document&&document.body&&typeof document.body.append=="function"&&document.body.append(n)})}function Zn(t,e,r,o,n,i){return Xf(t,e,r,o,n).then(c=>{c+="&",c+=Pe({dl:k(),rl:document.referrer}),L(()=>{J(c,{method:"GET"},i,s=>{throw s})},s=>a.error(new Error(`${vh} api call failed with message ${s.message}`)),9,300,!0)})}var Jt="measure";function Kn(){return window.ShopifyAnalytics&&window.ShopifyAnalytics.lib&&window.ShopifyAnalytics.lib.config&&window.ShopifyAnalytics.lib.config["Facebook Pixel"]&&window.ShopifyAnalytics.lib.config["Facebook Pixel"].conversionsAPIEnabled}var ed=0;function td(){return ed+=1,ed}function Ss(){(function(t,e,r,o,n,i,c){t.fbq||(n=t.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},t._fbq||(t._fbq=n),n.push=n,n.loaded=!0,n.version="2.0",n.queue=[],i=e.createElement(r),i.async=!0,i.src=o,c=e.getElementsByTagName(r)[0],c.parentNode.insertBefore(i,c))})(window,document,"script","https://connect.facebook.net/en_US/fbevents.js")}function Ps(t){return e=>{e.message===$?a.error(new T(t)):a.error(e)}}function Yn(t,e){y()||(Ss(),window.fbq("init",t,e))}var zo="facebook_ads",od="trackCustom";function nd(t,e){window.fbq("init",t,e)}function id(t){if(typeof window.fbq!="function"||typeof window.fbq.getState!="function")throw new Error($);if(typeof window.fbq.getState().then=="function")window.fbq.getState().then(({pixels:e})=>{e&&e.length>0&&t(e)});else if(window.fbq.getState().pixels&&window.fbq.getState().pixels.length>0)t(window.fbq.getState().pixels);else throw new Error($)}function Xn(){return M("facebookAccounts")||[]}function ad(t){return t===void 0?Kn():t}function sd(t,e){t.forEach(r=>{let o=r.pixelId,n=r.advancedMatching;if(o){let i=ad(n)?e:{};y()||nd(o,i)}})}function _h(t,e,r){let o=Xn();o.length&&sd(o,e),r()}function wh(t,e,r){Ss();let o=Xn();function n(){id(i=>{i.forEach(c=>{ad()&&nd(c.id,e)})})}L(()=>{if(typeof window.fbq!="function")throw new Error($);o.length?sd(o,e):n(),r()},Ps(`${zo} globals not found`))}function cd(t,e,r){return function(){typeof t=="function"&&t(zo,{eventName:e,eventObject:r})}}function Eh(t,e,r,o){let n=cd(o,e,r),i=Xn();i.length&&i.forEach(c=>{let s=c.pixelId;Zn(s,void 0,void 0,e,r,n)})}function bh(t,e,r,o){let n=cd(o,e,r);id(()=>{window.fbq(od,e,r),n()})}function Sh(t,e){Xn().forEach(o=>{let n=o.pixelId;n&&Qf(n,t,e)})}function Ph(t,e,r,o){return n=>(Sh(t,e),typeof o=="function"&&o(`${zo}`,{eventName:t,eventObject:e},"score_push_img_pixel"),r(n))}function xh(t){return`${f}_${t}`}function Th(t,e,r){let o;return t===Jt?o=B([f,r],"_"):o=B([e,r]),o}function Ah(t,e){return{app_name:t,integration_product:e.integration_product,conversion_product:e.conversion_product,conversion_type:e.conversion_type,comparison_population:e.comparison_population,comparison_group:e.comparison_group,comparison_type:e.comparison_type,threshold_setter:e.threshold_setter,threshold_group_count:e.threshold_group_count,score:G(e.score),event_date:qn(new Date,"-"),eventDate:qn(new Date)}}function ud(t,e){let r=xh(t);return{eventName:Th(t,r,e.integration_product),eventObject:Ah(r,e)}}function Ih(t,e,r){if(!t)return;let o=ud(e,t);Eh(e,o.eventName,o.eventObject,r)}function kh(t,e,r){if(!t)return;let o=ud(e,t),n=o.eventName,i=o.eventObject;L(()=>bh(e,n,i,r),Ph(n,E({},i,{eventHitId:td()}),Ps(`${zo} globals not found`),r),80,150)}function Ch(t,e,r){y()?Ih(t,e,r):kh(t,e,r)}async function rd(t,e){try{let r=await bs();y()?_h(t,r,e):wh(t,r,e)}catch(r){a.error(r)}}var Zt={eventHitType:od,name:zo,identify:rd,setup:rd,send:Ch};var xs={[Zt.name]:Zt};function Oh(t,e,r="score_push"){It(Jt,t,r),ie(`${Jt} ${r}: ${t}`,e)}function Nh(t,e){xs[t]!==void 0&&e&&e.length>0?(Y(ko,"scored",30),S(e,r=>{r.name&&xs[t].send(r,Jt,Oh)})):Y(ko,"enabled",30)}function Rh(t){let e=ae("blackcrow_promising_user")||"";return t==="enabled"||t===void 0&&e.toLowerCase()==="active"||t===void 0&&k().toLowerCase().indexOf("blackcrow_promising_user%3dactive")>0}async function Lh(t){try{let e=Ye(`${Jt}.integrations`),r=await A(ko),o=[];return r==="scored"?Y(ko,"scored",30):Rh(r)&&S(e,n=>{let i=n.platform;t[i]&&o.push(t[i].then(()=>{Nh(i,n.scores)}))}),Promise.all(o)}catch(e){return a.error(e),Promise.resolve([])}}var fd={appName:Jt,platforms:xs,sendAppScores:Lh};var U="pwo",dd="amped",Qn="attentive",Kt="justuno",ei="klaviyo",ti="postscript",ld="recart",pd="sendlane",md="wisepops",gd="yotpo",hd="smart_id",Yt={DELAY:"delay",SESSION_VIEW_COUNT:"page_view",EXIT_INTENT:"exit_intent"};var Sr=class{static getPlatformName(){return Qn}isIdentified(){return ae("utm_source")==="attentive"}setup(){}isInitialized(){return!0}static getInstance(){return new Sr}};function Ts(){if(!window.klaviyo){window._klOnsite=window._klOnsite||[];try{window.klaviyo=new Proxy({},{get(t,e){return e==="push"?function(){let r;(r=window._klOnsite).push.apply(r,arguments)}:function(){for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];let i=typeof o[o.length-1]=="function"?o.pop():void 0;return new Promise(s=>{window._klOnsite.push([e].concat(o,[function(u){i&&i(u),s(u)}]))})}}})}catch{window.klaviyo=window.klaviyo||[],window.klaviyo.push=function(){let e;(e=window._klOnsite).push.apply(e,arguments)}}}}function ri(){return T("Klaviyo globals not found.")}function Jo(t){let e=window?.klaviyo?.push||window?._learnq?.push||window?._klOnsite?.push;if(typeof e=="function")return e(t);throw ri()}function oi(){return!!(window._klOnsite?._loaded||window._learnq?._loaded)}function ni(t,e={}){return t&&E(e,{$email:t}),e}function As(){return window?.klaviyo?.identify||window?._learnq?.identify}function Zo(t){let e=As();return typeof e=="function"?e(t):Jo(["identify",t])}function yd(){if(typeof window?.klaviyo?.isIdentified=="function")return window.klaviyo.isIdentified();if(typeof window?._learnq?.isIdentified=="function")return window._learnq.isIdentified();throw ri()}function Is(){return window?.klaviyo?.openForm}function vd(t){let e=Is();if(typeof e=="function")return e(t);throw ri()}async function _d(){if(typeof window?.klaviyo?.account=="function")return window.klaviyo.account();if(typeof window?._learnq?.account=="function")return window._learnq.account();throw ri()}function wd(t,e,r=500){let o,n=new _.SafeAsyncInterval(async()=>{try{let i=await A(t);if(o===void 0)o=i;else if(o&&i!==o)try{await e(i)}catch(c){a.error(c),n.stop()}finally{o=i}}catch{}},r);return n.start(),n}function ue(t,e){try{window.sessionStorage.setItem(t,JSON.stringify(e))}catch{}}async function Ed(t,e){try{y()?await globalThis.browser.sessionStorage.setItem(t,JSON.stringify(e)):window.sessionStorage.setItem(t,JSON.stringify(e))}catch{}}function Zr(t,e,r=new Error("Request timed out")){let o=new Promise((n,i)=>{_.setTimeout(()=>{i(r)},e)});return Promise.race([t,o])}var Pr=class extends Error{constructor(r){super(r);this.status="warn"}};function Ko(t,...e){return new Promise((r,o)=>{t(...e,n=>r(n),n=>o(n))})}function ii(t,e){return Ko(J,t,e)}var Te=class{constructor(){this.applicationName=U?.toUpperCase();this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return ei}setupEmailListenerCallback(){ee(()=>{Un(e=>{let r=Fo(e);r&&Zo(ni(r))})})}async sendIdentityIfUnidentified(){try{if(await this.isIdentified()===!1){let r=await ye();r?Zo(ni(r)):this.setupEmailListenerCallback()}}catch(e){a.error(e)}}handlePostSetup(){if(Dn()==="confirmation"){let e=wd(Cn,async()=>{try{let r=await zr();r&&(await re("kl_purchase",{kl_cid:r}),e.stop())}catch(r){a.error(r)}});return ye().then(r=>{let o=r||Bn();o&&Zo(ni(o))}).catch(r=>a.error(r))}return this.sendIdentityIfUnidentified()}static isKlaviyoLoaded(){return oi()&&typeof As()=="function"}setup(){return Te.isKlaviyoLoaded()||Ts(),new Promise((e,r)=>L(()=>{if(!Te.isKlaviyoLoaded())throw new Error(`${Te.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,this.handlePostSetup().catch(o=>{a.error(o)}).finally(e)},()=>{let o=T(`[${this.applicationName}] ${Te.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}setIdentifiedByKlaviyoInSession(){ue(na,!0)}async isIdentified(){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${Te.getPlatformName()} was not initialized.`);if(await H(na))return!0;if(ae("_kx"))return this.setIdentifiedByKlaviyoInSession(),!0;let r=`[${this.applicationName}] ${Te.getPlatformName()}.isIdentified() Promise did not resolve.`,o=await Zr(ht(async()=>{let n=await yd();if(typeof n!="boolean")throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${Te.getPlatformName()}.isIdentified() is not returning a boolean.`);return n}),4e3,new Pr(r));return o===!0&&this.setIdentifiedByKlaviyoInSession(),o}async addAttributesToUserProfile(e){Zo(E({},{$email:await ye(),$phone:await br()},e)),e.blackcrow_identified&&(Jo(["track","Black Crow Identified"]),await this.callServerEvent(e).catch(r=>a.error(r)))}async callServerEvent(e){let r=await _d(),o=await br(),n=await ye(),i={method:"POST",headers:{accept:"application/json",revision:"2023-12-15","content-type":"application/json"},body:JSON.stringify({data:{type:"event",attributes:{properties:{},time:new Date().toISOString(),metric:{data:{type:"metric",attributes:{name:"Black Crow Identified"}}},profile:{data:{type:"profile",attributes:E({email:n,phone_number:o},{properties:{...e}})}}}}})};return ii(`https://a.klaviyo.com/client/events/?company_id=${r}`,i)}static getInstance(){return new Te}};var Xt=class{constructor(){this.applicationName=U?.toUpperCase();this.initialized=!1}static getPlatformName(){return dd}setup(){return this.initialized||(W("platform",h.PWO_CLOSE,e=>{e.rendered_form_id===window.__bcai_amped_trigger&&delete window.__bcai_amped_trigger}),this.initialized=!0),Promise.resolve()}isInitialized(){return this.initialized}triggerOverlay(e){let r=Number(e);if(Number.isNaN(r))throw new Error(`[${this.applicationName}] Cannot trigger overlay for ${Xt.getPlatformName()} due to an invalid formId: ${e}`);window.__bcai_amped_trigger=r}static getInstance(){return new Xt}};function fe(t,e){a.push({trigger:t,data:e})}function ge(t,e,r){let o={};return r&&(o.em=yr(r)),e&&(o.ph=Er(e)),E({},t,o)}var Dh=new Map([["OPEN",h.PWO_IMPR],["CLOSE",h.PWO_CLOSE],["EMAIL_LEAD",h.PWO_EMAIL_LEAD],["LEAD",h.PWO_SMS_LEAD]]);function bd(t){return Dh.get(t)}var Qt=class{constructor(){this.windowListenerRegistered=!1;this.applicationName=U?.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}static getPlatformName(){return Qn}setup(){return this.observedEvents={},this.windowListenerRegistered||(this.windowListenerRegistered=!0,_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")!==-1){let r=e.data.__attentive||{};if(r&&bd(r.action)){let{action:o,creativeId:n,phone:i,email:c}=r,s=this.observedEvents[n];if(s?.includes(o))return;this.observedEvents[n]=s?[...s,o]:[o];let u=bd(o);u===h.PWO_EMAIL_LEAD&&c&&Z(c),u===h.PWO_SMS_LEAD&&i&&ce(i),u&&fe(u,ge({rendered_form_id:n},i,c))}}})),new Promise((e,r)=>L(()=>{if(typeof window.__attentive?.trigger!="function")throw new Error(`${Qt.getPlatformName()} globals not found`);e()},()=>{let o=T(`[${this.applicationName}] ${Qt.getPlatformName()} globals not found.`);a.error(o),r(o)},100)).then(()=>{this.hasSetupCompletedSuccessfully=!0})}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot trigger overlay ${e} as ${Qt.getPlatformName()} was not initialized.`);if(!window?.__attentive)throw new Error(`[${this.applicationName}] Cannot trigger overlay ${e} as ${Qt.getPlatformName()} global is missing.`);delete this.observedEvents[e],window.__attentive.trigger(null,null,null,e)}getOverlayNode(){let e=document.querySelectorAll(Qt.DEFAULT_OVERLAY_SELECTOR);if(e.length!==0){if(e.length>1)throw new Error(`[${this.applicationName}] Expected exactly one matching Attentive overlay container but found ${e?.length}.`);return e[0]}}isInitialized(){return this.hasSetupCompletedSuccessfully}static getInstance(){return new Qt}},Kr=Qt;Kr.DEFAULT_OVERLAY_SELECTOR="[id=attentive_overlay]";function Yo(t,e){if(typeof e!="function")return;let r=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...o){try{o[1]?.match(t)&&e&&_.addListener(this,"load",()=>{this.responseType===""||this.responseType==="text"?e(this.responseText):this.responseType==="json"&&e(JSON.stringify(this.response))})}catch{a.error(new Ne(`XHR Sniffer Error For URL: ${t}`))}return r.apply(this,o)}}function ai(t,e){let r=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...o){try{o[1]?.match(t)&&e(o)}catch{a.error(new Ne(`XHR Intercept Error For URL: ${t}`))}return r.apply(this,o)}}var nt=class{constructor(){this.applicationName=U?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return Kt}hasEventBeenObserved(e,r){if(r===h.PWO_IMPR&&e.length===0){if(nt.xhrImpressionCount<=nt.loadImpressionCount)return!0;a.error(T(`[${this.applicationName}] ${nt.getPlatformName()} - Impression event not observed from load ju_windowevent.`))}return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),fe(r,ge({rendered_form_id:e},o,n)))}getJustunoApp(){if(!window.juapp){let e=(...r)=>{let o=window?.juapp?.q||[];window.juapp&&(window.juapp.q=o),o.push(r)};window.juapp=e}return window.juapp}setup(){return this.observedEvents={},window.ju_windowevent=(e,r)=>{e==="load"&&(nt.loadImpressionCount+=1,this.handleEvent(r,h.PWO_IMPR)),e==="unload"&&this.handleEvent(r,h.PWO_CLOSE)},ai("(justuno.com|jst.ai)/api/analytics/impression",()=>{nt.xhrImpressionCount+=1,this.handleEvent("",h.PWO_IMPR)}),this.getJustunoApp()("trackFunc","engagement",(e,r,o,n,i,c)=>{let s=c.find(u=>u.name==="phone_number"&&u.value.length>0)?.value;s?(ce(s),this.handleEvent(n,h.PWO_SMS_LEAD,s,e)):e&&(Z(e),this.handleEvent(n,h.PWO_EMAIL_LEAD,void 0,e))}),new Promise((e,r)=>L(()=>{throw window.ju_loadiframe&&typeof window.ju_loadiframe=="function"&&window.ju_initialized&&(this.hasSetupCompletedSuccessfully=!0,e()),new Error(`${nt.getPlatformName()} globals not found`)},()=>{let o=T(`[${this.applicationName}] ${nt.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window.ju_loadiframe)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${nt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window.ju_loadiframe({campaign_id:e??""})}static getInstance(){return new nt}},Yr=nt;Yr.loadImpressionCount=0,Yr.xhrImpressionCount=0;function ks(t){try{t instanceof Error&&t.stack&&(t.stack=uu(t.stack))}catch{}}function Sd(t){return typeof t=="string"?t:t instanceof Request?t.url??"":""}function Xo(t,e){if(typeof e!="function")return;let r=window.fetch;window.fetch=(...o)=>r.apply(this,o).then(n=>{try{Sd(o[0]).match(t)&&e(n.clone())}catch(i){a.error(new Ne(`Fetch Sniffer for "${t}" failing with "${i?.message}" possibly due to unexpected ${o}.`))}return n}).catch(n=>{throw ks(n),n})}function er(t,e,r){let o=window.fetch;window.fetch=function(...n){try{if(Sd(n[0]).match(t)){if(r)return o.apply(this,n).then(_.setTimeout(()=>e(n),500)).catch(i=>{throw ks(i),i});e(n)}}catch{a.error(new Ne(`Fetch Intercept Error For URL: ${t}`))}return o.apply(this,n).catch(i=>{throw ks(i),i})}}async function Fh(){try{return Number(await A(ea))||0}catch(t){return a.error(t),0}}async function it(){try{return Number(await A(ta))||0}catch(t){return a.error(t),0}}async function Pd(){try{let t=await Fh();Y(ea,t+1,1051200);let e=await it();e<1&&Se("platform",h.SESSION),Y(ta,e+1,30)}catch(t){a.error(t)}}function Mh(t){ee(()=>{_.addListener(document?.documentElement,"mouseleave",t)})}function $h(t){let e=$n(),r=Wu();if(r>0){let o=_.setInterval(()=>{let n=e-$n();n<0&&(n=0,e=$n()),(n/r>.3||n>4500)&&(clearInterval(o),t())},150)}}function Bh(t){if(y())return;let e=r=>{r.state?.exiting&&(_.removeListener(window,"popstate",e),t())};ee(async()=>{try{let r=await it();window.history.state||(window.history.replaceState({exiting:r===1},"",window.location.href),r===1&&window.history.pushState({exiting:!1},"",window.location.href)),_.addListener(window,"popstate",e)}catch(r){a.error(r)}})}function Uh(t){$h(t),Bh(t)}function xd(t){gr(ve()).deviceType!=="mobile"?Mh(t):Uh(t)}function Xr(t){let e=ae("bcaiMockScore");if(e)return e;let r=Ye(`${ot}.scores`)??[];return t?r.find(({name:o})=>o===t)?.score:void 0}var q;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function r(n){throw new Error}t.assertNever=r,t.arrayToEnum=n=>{let i={};for(let c of n)i[c]=c;return i},t.getValidEnumValues=n=>{let i=t.objectKeys(n).filter(s=>typeof n[n[s]]!="number"),c={};for(let s of i)c[s]=n[s];return t.objectValues(c)},t.objectValues=n=>t.objectKeys(n).map(function(i){return n[i]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let i=[];for(let c in n)Object.prototype.hasOwnProperty.call(n,c)&&i.push(c);return i},t.find=(n,i)=>{for(let c of n)if(i(c))return c},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function o(n,i=" | "){return n.map(c=>typeof c=="string"?`'${c}'`:c).join(i)}t.joinValues=o,t.jsonStringifyReplacer=(n,i)=>typeof i=="bigint"?i.toString():i})(q||(q={}));var Os;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Os||(Os={}));var P=q.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),tr=t=>{switch(typeof t){case"undefined":return P.undefined;case"string":return P.string;case"number":return isNaN(t)?P.nan:P.number;case"boolean":return P.boolean;case"function":return P.function;case"bigint":return P.bigint;case"symbol":return P.symbol;case"object":return Array.isArray(t)?P.array:t===null?P.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?P.promise:typeof Map<"u"&&t instanceof Map?P.map:typeof Set<"u"&&t instanceof Set?P.set:typeof Date<"u"&&t instanceof Date?P.date:P.object;default:return P.unknown}},v=q.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Vh=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),We=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(i){return i.message},o={_errors:[]},n=i=>{for(let c of i.issues)if(c.code==="invalid_union")c.unionErrors.map(n);else if(c.code==="invalid_return_type")n(c.returnTypeError);else if(c.code==="invalid_arguments")n(c.argumentsError);else if(c.path.length===0)o._errors.push(r(c));else{let s=o,u=0;for(;u<c.path.length;){let m=c.path[u];u===c.path.length-1?(s[m]=s[m]||{_errors:[]},s[m]._errors.push(r(c))):s[m]=s[m]||{_errors:[]},s=s[m],u++}}};return n(this),o}toString(){return this.message}get message(){return JSON.stringify(this.issues,q.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},o=[];for(let n of this.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):o.push(e(n));return{formErrors:o,fieldErrors:r}}get formErrors(){return this.flatten()}};We.create=t=>new We(t);var Qo=(t,e)=>{let r;switch(t.code){case v.invalid_type:t.received===P.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case v.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,q.jsonStringifyReplacer)}`;break;case v.unrecognized_keys:r=`Unrecognized key(s) in object: ${q.joinValues(t.keys,", ")}`;break;case v.invalid_union:r="Invalid input";break;case v.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${q.joinValues(t.options)}`;break;case v.invalid_enum_value:r=`Invalid enum value. Expected ${q.joinValues(t.options)}, received '${t.received}'`;break;case v.invalid_arguments:r="Invalid function arguments";break;case v.invalid_return_type:r="Invalid function return type";break;case v.invalid_date:r="Invalid date";break;case v.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:q.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case v.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case v.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case v.custom:r="Invalid input";break;case v.invalid_intersection_types:r="Intersection results could not be merged";break;case v.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case v.not_finite:r="Number must be finite";break;default:r=e.defaultError,q.assertNever(t)}return{message:r}},Id=Qo;function Wh(t){Id=t}function ci(){return Id}var ui=t=>{let{data:e,path:r,errorMaps:o,issueData:n}=t,i=[...r,...n.path||[]],c={...n,path:i},s="",u=o.filter(m=>!!m).slice().reverse();for(let m of u)s=m(c,{data:e,defaultError:s}).message;return{...n,path:i,message:n.message||s}},qh=[];function x(t,e){let r=ui({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,ci(),Qo].filter(o=>!!o)});t.common.issues.push(r)}var he=class{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let o=[];for(let n of r){if(n.status==="aborted")return R;n.status==="dirty"&&e.dirty(),o.push(n.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,r){let o=[];for(let n of r)o.push({key:await n.key,value:await n.value});return he.mergeObjectSync(e,o)}static mergeObjectSync(e,r){let o={};for(let n of r){let{key:i,value:c}=n;if(i.status==="aborted"||c.status==="aborted")return R;i.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof c.value<"u"||n.alwaysSet)&&(o[i.value]=c.value)}return{status:e.value,value:o}}},R=Object.freeze({status:"aborted"}),kd=t=>({status:"dirty",value:t}),Ae=t=>({status:"valid",value:t}),Ns=t=>t.status==="aborted",Rs=t=>t.status==="dirty",en=t=>t.status==="valid",fi=t=>typeof Promise<"u"&&t instanceof Promise,I;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(I||(I={}));var Xe=class{constructor(e,r,o,n){this._cachedPath=[],this.parent=e,this.data=r,this._path=o,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Td=(t,e)=>{if(en(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new We(t.common.issues);return this._error=r,this._error}}};function D(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:o,description:n}=t;if(e&&(r||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(c,s)=>c.code!=="invalid_type"?{message:s.defaultError}:typeof s.data>"u"?{message:o??s.defaultError}:{message:r??s.defaultError},description:n}}var F=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return tr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:tr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new he,ctx:{common:e.parent.common,data:e.data,parsedType:tr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(fi(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let o=this.safeParse(e,r);if(o.success)return o.data;throw o.error}safeParse(e,r){var o;let n={common:{issues:[],async:(o=r?.async)!==null&&o!==void 0?o:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tr(e)},i=this._parseSync({data:e,path:n.path,parent:n});return Td(n,i)}async parseAsync(e,r){let o=await this.safeParseAsync(e,r);if(o.success)return o.data;throw o.error}async safeParseAsync(e,r){let o={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:tr(e)},n=this._parse({data:e,path:o.path,parent:o}),i=await(fi(n)?n:Promise.resolve(n));return Td(o,i)}refine(e,r){let o=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,i)=>{let c=e(n),s=()=>i.addIssue({code:v.custom,...o(n)});return typeof Promise<"u"&&c instanceof Promise?c.then(u=>u?!0:(s(),!1)):c?!0:(s(),!1)})}refinement(e,r){return this._refinement((o,n)=>e(o)?!0:(n.addIssue(typeof r=="function"?r(o,n):r),!1))}_refinement(e){return new Ge({schema:this,typeName:O.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return at.create(this,this._def)}nullable(){return Rt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return qe.create(this,this._def)}promise(){return nr.create(this,this._def)}or(e){return Ir.create([this,e],this._def)}and(e){return kr.create(this,e,this._def)}transform(e){return new Ge({...D(this._def),schema:this,typeName:O.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Lr({...D(this._def),innerType:this,defaultValue:r,typeName:O.ZodDefault})}brand(){return new di({typeName:O.ZodBranded,type:this,...D(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new no({...D(this._def),innerType:this,catchValue:r,typeName:O.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Dr.create(this,e)}readonly(){return ao.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Gh=/^c[^\s-]{8,}$/i,jh=/^[a-z][a-z0-9]*$/,Hh=/^[0-9A-HJKMNP-TV-Z]{26}$/,zh=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Jh=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Zh="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Cs,Kh=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,Yh=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Xh=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function Qh(t,e){return!!((e==="v4"||!e)&&Kh.test(t)||(e==="v6"||!e)&&Yh.test(t))}var Ve=class extends F{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==P.string){let i=this._getOrReturnCtx(e);return x(i,{code:v.invalid_type,expected:P.string,received:i.parsedType}),R}let o=new he,n;for(let i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(n=this._getOrReturnCtx(e,n),x(n,{code:v.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="max")e.data.length>i.value&&(n=this._getOrReturnCtx(e,n),x(n,{code:v.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),o.dirty());else if(i.kind==="length"){let c=e.data.length>i.value,s=e.data.length<i.value;(c||s)&&(n=this._getOrReturnCtx(e,n),c?x(n,{code:v.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&x(n,{code:v.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),o.dirty())}else if(i.kind==="email")Jh.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"email",code:v.invalid_string,message:i.message}),o.dirty());else if(i.kind==="emoji")Cs||(Cs=new RegExp(Zh,"u")),Cs.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"emoji",code:v.invalid_string,message:i.message}),o.dirty());else if(i.kind==="uuid")zh.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"uuid",code:v.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid")Gh.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"cuid",code:v.invalid_string,message:i.message}),o.dirty());else if(i.kind==="cuid2")jh.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"cuid2",code:v.invalid_string,message:i.message}),o.dirty());else if(i.kind==="ulid")Hh.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"ulid",code:v.invalid_string,message:i.message}),o.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),x(n,{validation:"url",code:v.invalid_string,message:i.message}),o.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"regex",code:v.invalid_string,message:i.message}),o.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(n=this._getOrReturnCtx(e,n),x(n,{code:v.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),o.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(n=this._getOrReturnCtx(e,n),x(n,{code:v.invalid_string,validation:{startsWith:i.value},message:i.message}),o.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(n=this._getOrReturnCtx(e,n),x(n,{code:v.invalid_string,validation:{endsWith:i.value},message:i.message}),o.dirty()):i.kind==="datetime"?Xh(i).test(e.data)||(n=this._getOrReturnCtx(e,n),x(n,{code:v.invalid_string,validation:"datetime",message:i.message}),o.dirty()):i.kind==="ip"?Qh(e.data,i.version)||(n=this._getOrReturnCtx(e,n),x(n,{validation:"ip",code:v.invalid_string,message:i.message}),o.dirty()):q.assertNever(i);return{status:o.value,value:e.data}}_regex(e,r,o){return this.refinement(n=>e.test(n),{validation:r,code:v.invalid_string,...I.errToObj(o)})}_addCheck(e){return new Ve({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...I.errToObj(e)})}url(e){return this._addCheck({kind:"url",...I.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...I.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...I.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...I.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...I.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...I.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...I.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...I.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...I.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...I.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...I.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...I.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...I.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...I.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...I.errToObj(r)})}nonempty(e){return this.min(1,I.errToObj(e))}trim(){return new Ve({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Ve({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Ve({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Ve.create=t=>{var e;return new Ve({checks:[],typeName:O.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...D(t)})};function ey(t,e){let r=(t.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,n=r>o?r:o,i=parseInt(t.toFixed(n).replace(".","")),c=parseInt(e.toFixed(n).replace(".",""));return i%c/Math.pow(10,n)}var yt=class extends F{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==P.number){let i=this._getOrReturnCtx(e);return x(i,{code:v.invalid_type,expected:P.number,received:i.parsedType}),R}let o,n=new he;for(let i of this._def.checks)i.kind==="int"?q.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),x(o,{code:v.invalid_type,expected:"integer",received:"float",message:i.message}),n.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(o=this._getOrReturnCtx(e,o),x(o,{code:v.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(o=this._getOrReturnCtx(e,o),x(o,{code:v.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),n.dirty()):i.kind==="multipleOf"?ey(e.data,i.value)!==0&&(o=this._getOrReturnCtx(e,o),x(o,{code:v.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),x(o,{code:v.not_finite,message:i.message}),n.dirty()):q.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,I.toString(r))}gt(e,r){return this.setLimit("min",e,!1,I.toString(r))}lte(e,r){return this.setLimit("max",e,!0,I.toString(r))}lt(e,r){return this.setLimit("max",e,!1,I.toString(r))}setLimit(e,r,o,n){return new yt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:o,message:I.toString(n)}]})}_addCheck(e){return new yt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:I.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:I.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:I.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:I.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:I.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:I.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:I.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:I.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:I.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&q.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(r===null||o.value>r)&&(r=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(r)&&Number.isFinite(e)}};yt.create=t=>new yt({checks:[],typeName:O.ZodNumber,coerce:t?.coerce||!1,...D(t)});var vt=class extends F{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==P.bigint){let i=this._getOrReturnCtx(e);return x(i,{code:v.invalid_type,expected:P.bigint,received:i.parsedType}),R}let o,n=new he;for(let i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(o=this._getOrReturnCtx(e,o),x(o,{code:v.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(o=this._getOrReturnCtx(e,o),x(o,{code:v.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),n.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),x(o,{code:v.not_multiple_of,multipleOf:i.value,message:i.message}),n.dirty()):q.assertNever(i);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,I.toString(r))}gt(e,r){return this.setLimit("min",e,!1,I.toString(r))}lte(e,r){return this.setLimit("max",e,!0,I.toString(r))}lt(e,r){return this.setLimit("max",e,!1,I.toString(r))}setLimit(e,r,o,n){return new vt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:o,message:I.toString(n)}]})}_addCheck(e){return new vt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:I.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:I.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:I.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:I.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:I.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};vt.create=t=>{var e;return new vt({checks:[],typeName:O.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...D(t)})};var xr=class extends F{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==P.boolean){let o=this._getOrReturnCtx(e);return x(o,{code:v.invalid_type,expected:P.boolean,received:o.parsedType}),R}return Ae(e.data)}};xr.create=t=>new xr({typeName:O.ZodBoolean,coerce:t?.coerce||!1,...D(t)});var Ot=class extends F{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==P.date){let i=this._getOrReturnCtx(e);return x(i,{code:v.invalid_type,expected:P.date,received:i.parsedType}),R}if(isNaN(e.data.getTime())){let i=this._getOrReturnCtx(e);return x(i,{code:v.invalid_date}),R}let o=new he,n;for(let i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(n=this._getOrReturnCtx(e,n),x(n,{code:v.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),o.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(n=this._getOrReturnCtx(e,n),x(n,{code:v.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),o.dirty()):q.assertNever(i);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ot({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:I.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:I.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Ot.create=t=>new Ot({checks:[],coerce:t?.coerce||!1,typeName:O.ZodDate,...D(t)});var eo=class extends F{_parse(e){if(this._getType(e)!==P.symbol){let o=this._getOrReturnCtx(e);return x(o,{code:v.invalid_type,expected:P.symbol,received:o.parsedType}),R}return Ae(e.data)}};eo.create=t=>new eo({typeName:O.ZodSymbol,...D(t)});var Tr=class extends F{_parse(e){if(this._getType(e)!==P.undefined){let o=this._getOrReturnCtx(e);return x(o,{code:v.invalid_type,expected:P.undefined,received:o.parsedType}),R}return Ae(e.data)}};Tr.create=t=>new Tr({typeName:O.ZodUndefined,...D(t)});var Ar=class extends F{_parse(e){if(this._getType(e)!==P.null){let o=this._getOrReturnCtx(e);return x(o,{code:v.invalid_type,expected:P.null,received:o.parsedType}),R}return Ae(e.data)}};Ar.create=t=>new Ar({typeName:O.ZodNull,...D(t)});var or=class extends F{constructor(){super(...arguments),this._any=!0}_parse(e){return Ae(e.data)}};or.create=t=>new or({typeName:O.ZodAny,...D(t)});var Ct=class extends F{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ae(e.data)}};Ct.create=t=>new Ct({typeName:O.ZodUnknown,...D(t)});var st=class extends F{_parse(e){let r=this._getOrReturnCtx(e);return x(r,{code:v.invalid_type,expected:P.never,received:r.parsedType}),R}};st.create=t=>new st({typeName:O.ZodNever,...D(t)});var to=class extends F{_parse(e){if(this._getType(e)!==P.undefined){let o=this._getOrReturnCtx(e);return x(o,{code:v.invalid_type,expected:P.void,received:o.parsedType}),R}return Ae(e.data)}};to.create=t=>new to({typeName:O.ZodVoid,...D(t)});var qe=class extends F{_parse(e){let{ctx:r,status:o}=this._processInputParams(e),n=this._def;if(r.parsedType!==P.array)return x(r,{code:v.invalid_type,expected:P.array,received:r.parsedType}),R;if(n.exactLength!==null){let c=r.data.length>n.exactLength.value,s=r.data.length<n.exactLength.value;(c||s)&&(x(r,{code:c?v.too_big:v.too_small,minimum:s?n.exactLength.value:void 0,maximum:c?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),o.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(x(r,{code:v.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),o.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(x(r,{code:v.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),o.dirty()),r.common.async)return Promise.all([...r.data].map((c,s)=>n.type._parseAsync(new Xe(r,c,r.path,s)))).then(c=>he.mergeArray(o,c));let i=[...r.data].map((c,s)=>n.type._parseSync(new Xe(r,c,r.path,s)));return he.mergeArray(o,i)}get element(){return this._def.type}min(e,r){return new qe({...this._def,minLength:{value:e,message:I.toString(r)}})}max(e,r){return new qe({...this._def,maxLength:{value:e,message:I.toString(r)}})}length(e,r){return new qe({...this._def,exactLength:{value:e,message:I.toString(r)}})}nonempty(e){return this.min(1,e)}};qe.create=(t,e)=>new qe({type:t,minLength:null,maxLength:null,exactLength:null,typeName:O.ZodArray,...D(e)});function Qr(t){if(t instanceof K){let e={};for(let r in t.shape){let o=t.shape[r];e[r]=at.create(Qr(o))}return new K({...t._def,shape:()=>e})}else return t instanceof qe?new qe({...t._def,type:Qr(t.element)}):t instanceof at?at.create(Qr(t.unwrap())):t instanceof Rt?Rt.create(Qr(t.unwrap())):t instanceof Qe?Qe.create(t.items.map(e=>Qr(e))):t}var K=class extends F{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=q.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==P.object){let m=this._getOrReturnCtx(e);return x(m,{code:v.invalid_type,expected:P.object,received:m.parsedType}),R}let{status:o,ctx:n}=this._processInputParams(e),{shape:i,keys:c}=this._getCached(),s=[];if(!(this._def.catchall instanceof st&&this._def.unknownKeys==="strip"))for(let m in n.data)c.includes(m)||s.push(m);let u=[];for(let m of c){let g=i[m],b=n.data[m];u.push({key:{status:"valid",value:m},value:g._parse(new Xe(n,b,n.path,m)),alwaysSet:m in n.data})}if(this._def.catchall instanceof st){let m=this._def.unknownKeys;if(m==="passthrough")for(let g of s)u.push({key:{status:"valid",value:g},value:{status:"valid",value:n.data[g]}});else if(m==="strict")s.length>0&&(x(n,{code:v.unrecognized_keys,keys:s}),o.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let m=this._def.catchall;for(let g of s){let b=n.data[g];u.push({key:{status:"valid",value:g},value:m._parse(new Xe(n,b,n.path,g)),alwaysSet:g in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let m=[];for(let g of u){let b=await g.key;m.push({key:b,value:await g.value,alwaysSet:g.alwaysSet})}return m}).then(m=>he.mergeObjectSync(o,m)):he.mergeObjectSync(o,u)}get shape(){return this._def.shape()}strict(e){return I.errToObj,new K({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,o)=>{var n,i,c,s;let u=(c=(i=(n=this._def).errorMap)===null||i===void 0?void 0:i.call(n,r,o).message)!==null&&c!==void 0?c:o.defaultError;return r.code==="unrecognized_keys"?{message:(s=I.errToObj(e).message)!==null&&s!==void 0?s:u}:{message:u}}}:{}})}strip(){return new K({...this._def,unknownKeys:"strip"})}passthrough(){return new K({...this._def,unknownKeys:"passthrough"})}extend(e){return new K({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new K({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:O.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new K({...this._def,catchall:e})}pick(e){let r={};return q.objectKeys(e).forEach(o=>{e[o]&&this.shape[o]&&(r[o]=this.shape[o])}),new K({...this._def,shape:()=>r})}omit(e){let r={};return q.objectKeys(this.shape).forEach(o=>{e[o]||(r[o]=this.shape[o])}),new K({...this._def,shape:()=>r})}deepPartial(){return Qr(this)}partial(e){let r={};return q.objectKeys(this.shape).forEach(o=>{let n=this.shape[o];e&&!e[o]?r[o]=n:r[o]=n.optional()}),new K({...this._def,shape:()=>r})}required(e){let r={};return q.objectKeys(this.shape).forEach(o=>{if(e&&!e[o])r[o]=this.shape[o];else{let i=this.shape[o];for(;i instanceof at;)i=i._def.innerType;r[o]=i}}),new K({...this._def,shape:()=>r})}keyof(){return Cd(q.objectKeys(this.shape))}};K.create=(t,e)=>new K({shape:()=>t,unknownKeys:"strip",catchall:st.create(),typeName:O.ZodObject,...D(e)});K.strictCreate=(t,e)=>new K({shape:()=>t,unknownKeys:"strict",catchall:st.create(),typeName:O.ZodObject,...D(e)});K.lazycreate=(t,e)=>new K({shape:t,unknownKeys:"strip",catchall:st.create(),typeName:O.ZodObject,...D(e)});var Ir=class extends F{_parse(e){let{ctx:r}=this._processInputParams(e),o=this._def.options;function n(i){for(let s of i)if(s.result.status==="valid")return s.result;for(let s of i)if(s.result.status==="dirty")return r.common.issues.push(...s.ctx.common.issues),s.result;let c=i.map(s=>new We(s.ctx.common.issues));return x(r,{code:v.invalid_union,unionErrors:c}),R}if(r.common.async)return Promise.all(o.map(async i=>{let c={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:c}),ctx:c}})).then(n);{let i,c=[];for(let u of o){let m={...r,common:{...r.common,issues:[]},parent:null},g=u._parseSync({data:r.data,path:r.path,parent:m});if(g.status==="valid")return g;g.status==="dirty"&&!i&&(i={result:g,ctx:m}),m.common.issues.length&&c.push(m.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;let s=c.map(u=>new We(u));return x(r,{code:v.invalid_union,unionErrors:s}),R}}get options(){return this._def.options}};Ir.create=(t,e)=>new Ir({options:t,typeName:O.ZodUnion,...D(e)});var si=t=>t instanceof Or?si(t.schema):t instanceof Ge?si(t.innerType()):t instanceof Nr?[t.value]:t instanceof _t?t.options:t instanceof Rr?Object.keys(t.enum):t instanceof Lr?si(t._def.innerType):t instanceof Tr?[void 0]:t instanceof Ar?[null]:null,ro=class extends F{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==P.object)return x(r,{code:v.invalid_type,expected:P.object,received:r.parsedType}),R;let o=this.discriminator,n=r.data[o],i=this.optionsMap.get(n);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(x(r,{code:v.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),R)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,o){let n=new Map;for(let i of r){let c=si(i.shape[e]);if(!c)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let s of c){if(n.has(s))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(s)}`);n.set(s,i)}}return new ro({typeName:O.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:n,...D(o)})}};function Ls(t,e){let r=tr(t),o=tr(e);if(t===e)return{valid:!0,data:t};if(r===P.object&&o===P.object){let n=q.objectKeys(e),i=q.objectKeys(t).filter(s=>n.indexOf(s)!==-1),c={...t,...e};for(let s of i){let u=Ls(t[s],e[s]);if(!u.valid)return{valid:!1};c[s]=u.data}return{valid:!0,data:c}}else if(r===P.array&&o===P.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let i=0;i<t.length;i++){let c=t[i],s=e[i],u=Ls(c,s);if(!u.valid)return{valid:!1};n.push(u.data)}return{valid:!0,data:n}}else return r===P.date&&o===P.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var kr=class extends F{_parse(e){let{status:r,ctx:o}=this._processInputParams(e),n=(i,c)=>{if(Ns(i)||Ns(c))return R;let s=Ls(i.value,c.value);return s.valid?((Rs(i)||Rs(c))&&r.dirty(),{status:r.value,value:s.data}):(x(o,{code:v.invalid_intersection_types}),R)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([i,c])=>n(i,c)):n(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}};kr.create=(t,e,r)=>new kr({left:t,right:e,typeName:O.ZodIntersection,...D(r)});var Qe=class extends F{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==P.array)return x(o,{code:v.invalid_type,expected:P.array,received:o.parsedType}),R;if(o.data.length<this._def.items.length)return x(o,{code:v.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),R;!this._def.rest&&o.data.length>this._def.items.length&&(x(o,{code:v.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let i=[...o.data].map((c,s)=>{let u=this._def.items[s]||this._def.rest;return u?u._parse(new Xe(o,c,o.path,s)):null}).filter(c=>!!c);return o.common.async?Promise.all(i).then(c=>he.mergeArray(r,c)):he.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new Qe({...this._def,rest:e})}};Qe.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Qe({items:t,typeName:O.ZodTuple,rest:null,...D(e)})};var Cr=class extends F{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==P.object)return x(o,{code:v.invalid_type,expected:P.object,received:o.parsedType}),R;let n=[],i=this._def.keyType,c=this._def.valueType;for(let s in o.data)n.push({key:i._parse(new Xe(o,s,o.path,s)),value:c._parse(new Xe(o,o.data[s],o.path,s))});return o.common.async?he.mergeObjectAsync(r,n):he.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(e,r,o){return r instanceof F?new Cr({keyType:e,valueType:r,typeName:O.ZodRecord,...D(o)}):new Cr({keyType:Ve.create(),valueType:e,typeName:O.ZodRecord,...D(r)})}},oo=class extends F{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==P.map)return x(o,{code:v.invalid_type,expected:P.map,received:o.parsedType}),R;let n=this._def.keyType,i=this._def.valueType,c=[...o.data.entries()].map(([s,u],m)=>({key:n._parse(new Xe(o,s,o.path,[m,"key"])),value:i._parse(new Xe(o,u,o.path,[m,"value"]))}));if(o.common.async){let s=new Map;return Promise.resolve().then(async()=>{for(let u of c){let m=await u.key,g=await u.value;if(m.status==="aborted"||g.status==="aborted")return R;(m.status==="dirty"||g.status==="dirty")&&r.dirty(),s.set(m.value,g.value)}return{status:r.value,value:s}})}else{let s=new Map;for(let u of c){let m=u.key,g=u.value;if(m.status==="aborted"||g.status==="aborted")return R;(m.status==="dirty"||g.status==="dirty")&&r.dirty(),s.set(m.value,g.value)}return{status:r.value,value:s}}}};oo.create=(t,e,r)=>new oo({valueType:e,keyType:t,typeName:O.ZodMap,...D(r)});var Nt=class extends F{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==P.set)return x(o,{code:v.invalid_type,expected:P.set,received:o.parsedType}),R;let n=this._def;n.minSize!==null&&o.data.size<n.minSize.value&&(x(o,{code:v.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&o.data.size>n.maxSize.value&&(x(o,{code:v.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let i=this._def.valueType;function c(u){let m=new Set;for(let g of u){if(g.status==="aborted")return R;g.status==="dirty"&&r.dirty(),m.add(g.value)}return{status:r.value,value:m}}let s=[...o.data.values()].map((u,m)=>i._parse(new Xe(o,u,o.path,m)));return o.common.async?Promise.all(s).then(u=>c(u)):c(s)}min(e,r){return new Nt({...this._def,minSize:{value:e,message:I.toString(r)}})}max(e,r){return new Nt({...this._def,maxSize:{value:e,message:I.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Nt.create=(t,e)=>new Nt({valueType:t,minSize:null,maxSize:null,typeName:O.ZodSet,...D(e)});var rr=class extends F{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==P.function)return x(r,{code:v.invalid_type,expected:P.function,received:r.parsedType}),R;function o(s,u){return ui({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ci(),Qo].filter(m=>!!m),issueData:{code:v.invalid_arguments,argumentsError:u}})}function n(s,u){return ui({data:s,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,ci(),Qo].filter(m=>!!m),issueData:{code:v.invalid_return_type,returnTypeError:u}})}let i={errorMap:r.common.contextualErrorMap},c=r.data;if(this._def.returns instanceof nr){let s=this;return Ae(async function(...u){let m=new We([]),g=await s._def.args.parseAsync(u,i).catch(de=>{throw m.addIssue(o(u,de)),m}),b=await Reflect.apply(c,this,g);return await s._def.returns._def.type.parseAsync(b,i).catch(de=>{throw m.addIssue(n(b,de)),m})})}else{let s=this;return Ae(function(...u){let m=s._def.args.safeParse(u,i);if(!m.success)throw new We([o(u,m.error)]);let g=Reflect.apply(c,this,m.data),b=s._def.returns.safeParse(g,i);if(!b.success)throw new We([n(g,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new rr({...this._def,args:Qe.create(e).rest(Ct.create())})}returns(e){return new rr({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,o){return new rr({args:e||Qe.create([]).rest(Ct.create()),returns:r||Ct.create(),typeName:O.ZodFunction,...D(o)})}},Or=class extends F{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Or.create=(t,e)=>new Or({getter:t,typeName:O.ZodLazy,...D(e)});var Nr=class extends F{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return x(r,{received:r.data,code:v.invalid_literal,expected:this._def.value}),R}return{status:"valid",value:e.data}}get value(){return this._def.value}};Nr.create=(t,e)=>new Nr({value:t,typeName:O.ZodLiteral,...D(e)});function Cd(t,e){return new _t({values:t,typeName:O.ZodEnum,...D(e)})}var _t=class extends F{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),o=this._def.values;return x(r,{expected:q.joinValues(o),received:r.parsedType,code:v.invalid_type}),R}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),o=this._def.values;return x(r,{received:r.data,code:v.invalid_enum_value,options:o}),R}return Ae(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return _t.create(e)}exclude(e){return _t.create(this.options.filter(r=>!e.includes(r)))}};_t.create=Cd;var Rr=class extends F{_parse(e){let r=q.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==P.string&&o.parsedType!==P.number){let n=q.objectValues(r);return x(o,{expected:q.joinValues(n),received:o.parsedType,code:v.invalid_type}),R}if(r.indexOf(e.data)===-1){let n=q.objectValues(r);return x(o,{received:o.data,code:v.invalid_enum_value,options:n}),R}return Ae(e.data)}get enum(){return this._def.values}};Rr.create=(t,e)=>new Rr({values:t,typeName:O.ZodNativeEnum,...D(e)});var nr=class extends F{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==P.promise&&r.common.async===!1)return x(r,{code:v.invalid_type,expected:P.promise,received:r.parsedType}),R;let o=r.parsedType===P.promise?r.data:Promise.resolve(r.data);return Ae(o.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};nr.create=(t,e)=>new nr({type:t,typeName:O.ZodPromise,...D(e)});var Ge=class extends F{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===O.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:o}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:c=>{x(o,c),c.fatal?r.abort():r.dirty()},get path(){return o.path}};if(i.addIssue=i.addIssue.bind(i),n.type==="preprocess"){let c=n.transform(o.data,i);return o.common.issues.length?{status:"dirty",value:o.data}:o.common.async?Promise.resolve(c).then(s=>this._def.schema._parseAsync({data:s,path:o.path,parent:o})):this._def.schema._parseSync({data:c,path:o.path,parent:o})}if(n.type==="refinement"){let c=s=>{let u=n.refinement(s,i);if(o.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(o.common.async===!1){let s=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return s.status==="aborted"?R:(s.status==="dirty"&&r.dirty(),c(s.value),{status:r.value,value:s.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(s=>s.status==="aborted"?R:(s.status==="dirty"&&r.dirty(),c(s.value).then(()=>({status:r.value,value:s.value}))))}if(n.type==="transform")if(o.common.async===!1){let c=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!en(c))return c;let s=n.transform(c.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:s}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(c=>en(c)?Promise.resolve(n.transform(c.value,i)).then(s=>({status:r.value,value:s})):c);q.assertNever(n)}};Ge.create=(t,e,r)=>new Ge({schema:t,typeName:O.ZodEffects,effect:e,...D(r)});Ge.createWithPreprocess=(t,e,r)=>new Ge({schema:e,effect:{type:"preprocess",transform:t},typeName:O.ZodEffects,...D(r)});var at=class extends F{_parse(e){return this._getType(e)===P.undefined?Ae(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};at.create=(t,e)=>new at({innerType:t,typeName:O.ZodOptional,...D(e)});var Rt=class extends F{_parse(e){return this._getType(e)===P.null?Ae(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Rt.create=(t,e)=>new Rt({innerType:t,typeName:O.ZodNullable,...D(e)});var Lr=class extends F{_parse(e){let{ctx:r}=this._processInputParams(e),o=r.data;return r.parsedType===P.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Lr.create=(t,e)=>new Lr({innerType:t,typeName:O.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...D(e)});var no=class extends F{_parse(e){let{ctx:r}=this._processInputParams(e),o={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return fi(n)?n.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new We(o.common.issues)},input:o.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new We(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}};no.create=(t,e)=>new no({innerType:t,typeName:O.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...D(e)});var io=class extends F{_parse(e){if(this._getType(e)!==P.nan){let o=this._getOrReturnCtx(e);return x(o,{code:v.invalid_type,expected:P.nan,received:o.parsedType}),R}return{status:"valid",value:e.data}}};io.create=t=>new io({typeName:O.ZodNaN,...D(t)});var ty=Symbol("zod_brand"),di=class extends F{_parse(e){let{ctx:r}=this._processInputParams(e),o=r.data;return this._def.type._parse({data:o,path:r.path,parent:r})}unwrap(){return this._def.type}},Dr=class extends F{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{let i=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return i.status==="aborted"?R:i.status==="dirty"?(r.dirty(),kd(i.value)):this._def.out._parseAsync({data:i.value,path:o.path,parent:o})})();{let n=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return n.status==="aborted"?R:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:o.path,parent:o})}}static create(e,r){return new Dr({in:e,out:r,typeName:O.ZodPipeline})}},ao=class extends F{_parse(e){let r=this._def.innerType._parse(e);return en(r)&&(r.value=Object.freeze(r.value)),r}};ao.create=(t,e)=>new ao({innerType:t,typeName:O.ZodReadonly,...D(e)});var Od=(t,e={},r)=>t?or.create().superRefine((o,n)=>{var i,c;if(!t(o)){let s=typeof e=="function"?e(o):typeof e=="string"?{message:e}:e,u=(c=(i=s.fatal)!==null&&i!==void 0?i:r)!==null&&c!==void 0?c:!0,m=typeof s=="string"?{message:s}:s;n.addIssue({code:"custom",...m,fatal:u})}}):or.create(),ry={object:K.lazycreate},O;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(O||(O={}));var oy=(t,e={message:`Input not instance of ${t.name}`})=>Od(r=>r instanceof t,e),Nd=Ve.create,Rd=yt.create,ny=io.create,iy=vt.create,Ld=xr.create,ay=Ot.create,sy=eo.create,cy=Tr.create,uy=Ar.create,fy=or.create,dy=Ct.create,ly=st.create,py=to.create,my=qe.create,gy=K.create,hy=K.strictCreate,yy=Ir.create,vy=ro.create,_y=kr.create,wy=Qe.create,Ey=Cr.create,by=oo.create,Sy=Nt.create,Py=rr.create,xy=Or.create,Ty=Nr.create,Ay=_t.create,Iy=Rr.create,ky=nr.create,Ad=Ge.create,Cy=at.create,Oy=Rt.create,Ny=Ge.createWithPreprocess,Ry=Dr.create,Ly=()=>Nd().optional(),Dy=()=>Rd().optional(),Fy=()=>Ld().optional(),My={string:t=>Ve.create({...t,coerce:!0}),number:t=>yt.create({...t,coerce:!0}),boolean:t=>xr.create({...t,coerce:!0}),bigint:t=>vt.create({...t,coerce:!0}),date:t=>Ot.create({...t,coerce:!0})},$y=R,C=Object.freeze({__proto__:null,defaultErrorMap:Qo,setErrorMap:Wh,getErrorMap:ci,makeIssue:ui,EMPTY_PATH:qh,addIssueToContext:x,ParseStatus:he,INVALID:R,DIRTY:kd,OK:Ae,isAborted:Ns,isDirty:Rs,isValid:en,isAsync:fi,get util(){return q},get objectUtil(){return Os},ZodParsedType:P,getParsedType:tr,ZodType:F,ZodString:Ve,ZodNumber:yt,ZodBigInt:vt,ZodBoolean:xr,ZodDate:Ot,ZodSymbol:eo,ZodUndefined:Tr,ZodNull:Ar,ZodAny:or,ZodUnknown:Ct,ZodNever:st,ZodVoid:to,ZodArray:qe,ZodObject:K,ZodUnion:Ir,ZodDiscriminatedUnion:ro,ZodIntersection:kr,ZodTuple:Qe,ZodRecord:Cr,ZodMap:oo,ZodSet:Nt,ZodFunction:rr,ZodLazy:Or,ZodLiteral:Nr,ZodEnum:_t,ZodNativeEnum:Rr,ZodPromise:nr,ZodEffects:Ge,ZodTransformer:Ge,ZodOptional:at,ZodNullable:Rt,ZodDefault:Lr,ZodCatch:no,ZodNaN:io,BRAND:ty,ZodBranded:di,ZodPipeline:Dr,ZodReadonly:ao,custom:Od,Schema:F,ZodSchema:F,late:ry,get ZodFirstPartyTypeKind(){return O},coerce:My,any:fy,array:my,bigint:iy,boolean:Ld,date:ay,discriminatedUnion:vy,effect:Ad,enum:Ay,function:Py,instanceof:oy,intersection:_y,lazy:xy,literal:Ty,map:by,nan:ny,nativeEnum:Iy,never:ly,null:uy,nullable:Oy,number:Rd,object:gy,oboolean:Fy,onumber:Dy,optional:Cy,ostring:Ly,pipeline:Ry,preprocess:Ny,promise:ky,record:Ey,set:Sy,strictObject:hy,string:Nd,symbol:sy,transformer:Ad,tuple:wy,undefined:cy,union:yy,unknown:dy,void:py,NEVER:$y,ZodIssueCode:v,quotelessJson:Vh,ZodError:We});var By=["delay","page_view","exit_intent","none"],Dd=C.object({desktop:C.string(),mobile:C.string(),profile:C.string()}).partial(),Fd=C.object({name:C.string(),percent:C.number().lte(1).default(1),formConfig:Dd}).partial(),Uy=C.object({triggerType:C.enum(By),triggerCount:C.number().int(),scoreThreshold:C.number(),formConfig:Dd}).partial(),Vy=C.object({name:C.string(),scoreName:C.string(),percent:C.number().lte(1).default(1),showOverlayOnATC:C.boolean(),showSecondOverlayOnExitIntent:C.boolean(),formBuckets:Fd,maxTotalOverlays:C.number().int().gte(0),triggers:C.array(Uy)}).partial(),Wy=Vy.required({name:!0}),qy=C.object({name:C.string(),percent:C.number().lte(1).default(1),triggerBuckets:Wy}).partial(),Gy=qy.required({name:!0}),jy=C.object({zIndex:C.string()}).partial(),Hy=C.object({renderer:C.string().toLowerCase(),identifyPlatforms:C.array(C.string()),ignoredPagePaths:C.array(C.string()),overlayClosedCookieDuration:C.number(),version:C.coerce.number(),excludedQueryParams:C.array(C.object({name:C.string(),value:C.string()})),styleSettings:C.array(jy),blockOverlayOnCssSelectors:C.array(C.string()),formBuckets:Fd,overlayBuckets:Gy}).partial(),Md=Hy.required({renderer:!0});var so=class{constructor(e){this.setting=Md.parse(e)}static safeFromConfigJSON(){try{return this.isDisabled()?void 0:new so(jn(U))}catch(e){a.error(new Error(`[PWO] Error parsing overlay setting: ${e}`));return}}static fromConfigJSON(){return new so(jn(U))}static isDisabled(){return Object.keys(jn(U))?.length===0}get rendererName(){return this.setting.renderer}get identifyPlatforms(){return this.setting.identifyPlatforms}get ignoredPagePaths(){return this.setting.ignoredPagePaths}get overlayClosedCookieDuration(){return this.setting.overlayClosedCookieDuration}get version(){return this.setting.version}get excludedQueryParams(){return this.setting.excludedQueryParams}get blockOverlayOnCssSelectors(){return this.setting.blockOverlayOnCssSelectors}get styleSettings(){return this.setting.styleSettings}get formBuckets(){return this.setting.formBuckets}get overlayBuckets(){return this.setting.overlayBuckets}get triggerBuckets(){return this.setting.overlayBuckets?.triggerBuckets}get maxTotalOverlays(){return this.setting.overlayBuckets?.triggerBuckets?.maxTotalOverlays}get showSecondOverlayOnExitIntent(){return this.setting.overlayBuckets?.triggerBuckets?.showSecondOverlayOnExitIntent}get showOverlayOnATC(){return this.triggerBuckets?.showOverlayOnATC}hasExcludedUrlParams(){return!!this.setting.excludedQueryParams?.some(({name:e,value:r})=>ae(e,void 0)?.toLowerCase()===r.toLowerCase())}get scoreName(){return this.triggerBuckets?.scoreName}get defaultFormConfig(){return this.setting.formBuckets?.formConfig}get triggerBucketFormConfig(){return this.setting.overlayBuckets?.triggerBuckets?.formBuckets?.formConfig}hasValidOverlayBucketFormConfig(){return this.triggerBucketFormConfig!==void 0&&Object.keys(this.triggerBucketFormConfig).length>0}extractRelevantFormConfig(){let e=this.defaultFormConfig;return this.hasValidOverlayBucketFormConfig()&&(e=this.triggerBucketFormConfig),{formId:gr(ve()).deviceType==="mobile"?e?.mobile:e?.desktop,profile:e?.profile}}get identifierNames(){return this.identifyPlatforms||[this.rendererName]}},ir=so;var wt=class{constructor(){this.applicationName=U?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1;this.previousEnrolledWorkflows=[]}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),fe(r,ge({rendered_form_id:e},o,n)))}handleStateChangeEvent(e){let r=JSON.parse(JSON.stringify(e));delete r.workflowEvalStatus,(!this.previousJustunoAppState||JSON.stringify(this.previousJustunoAppState)!==JSON.stringify(r))&&(r.onsiteOpenState.filter(({workflowID:n})=>!this.previousJustunoAppState||!this.previousJustunoAppState.onsiteOpenState.find(({workflowID:i})=>i===n)).map(({workflowID:n})=>n).forEach(n=>{this.handleEvent(n,h.PWO_IMPR)}),this.previousJustunoAppState=r)}handleFetchInterceptEvent(){let e=(window._jst?.profile?.enrolled_workflows??[]).map(c=>JSON.parse(c)),r=e.filter(c=>c.workflow_id&&!this.previousEnrolledWorkflows.find(s=>s.workflow_id===c.workflow_id&&s.enrolled_time===c.enrolled_time&&s.end_time===c.end_time)),o=window._jst?.profile?.updatedProps?.email,n=window._jst?.profile?.updatedProps?.sms;r.forEach(c=>{o&&(Z(o),this.handleEvent(c.workflow_id,h.PWO_EMAIL_LEAD,n,o)),n&&(ce(n),this.handleEvent(c.workflow_id,h.PWO_SMS_LEAD,n,o))}),r.filter(c=>c.end_time&&!this.previousEnrolledWorkflows.find(s=>c.workflow_id===s.workflow_id&&c.enrolled_time===s.enrolled_time&&s.end_time===c.end_time)).forEach(c=>{this.handleEvent(c.workflow_id,h.PWO_CLOSE)}),this.previousEnrolledWorkflows=e}setup(){return this.observedEvents={},window.ju_blackcrow={predictions:{submit:{score:0,triggeredExperienceIds:[]}}},Zr(new Promise((e,r)=>L(()=>{if(window.ju4app!==void 0){window.ju4app("initFunc",()=>{window._jst.store.events.subscribe("stateChange",o=>{this.handleStateChangeEvent(o)}),er("justone.ai/v1/public/(display|properties|workflows)",()=>{this.handleFetchInterceptEvent()},!0),this.hasSetupCompletedSuccessfully=!0,e()});return}throw new Error(`${wt.getPlatformName()} globals not found`)},()=>{let o=T(`[${this.applicationName}] ${wt.getPlatformName()} globals not found.`);a.error(o),r(o)},15)),5e3,T(`[${this.applicationName}] ${wt.getPlatformName()} Timed out waiting for initFunc.`))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window.ju_blackcrow)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${wt.getPlatformName()} was not initialized.`);window.ju_blackcrow&&(delete this.observedEvents[e],window.ju_blackcrow.predictions.submit.score=Xr(ir.fromConfigJSON().scoreName),window.ju_blackcrow.predictions.submit.triggeredExperienceIds?.push(e))}static getPlatformName(){return Kt}static getInstance(){return new wt}};var tn=class{static getPlatformName(){return Kt}static getInstance(){return Ue(U)?.appSetting?.renderer_version==="4"?wt.getInstance():Yr.getInstance()}};function zy(t){let e=t.type,r=t?.metaData,o=null;switch(e){case"open":o=h.PWO_IMPR;break;case"submit":r?.$email&&(o=h.PWO_EMAIL_LEAD,Z(r.$email));break;case"stepSubmit":r?.$phone_number&&(o=h.PWO_SMS_LEAD,ce(r.$phone_number));break;case"close":o=h.PWO_CLOSE;break;default:break}return o}var Jy=["open","embedOpen","close","redirectedToUrl","submit","stepSubmit"],ct=class{constructor(){this.applicationName=U?.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}hasEventBeenObserved(e,r){return r&&this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}handleEvent(e){let r=e?.formId,o=zy(e);this.hasEventBeenObserved(r,o)||(this.addToObservedEvents(r,o),fe(o,ge({rendered_form_id:r},e?.metaData?.$phone_number,e?.metaData?.$email)),o===h.PWO_EMAIL_LEAD&&Jo(["track","Welcome Form Submit"]))}setup(){return this.observedEvents={},_.addListener(window,"klaviyoForms",e=>{e.detail&&Jy.includes(e.detail.type)&&this.handleEvent(e.detail)}),new Promise((e,r)=>L(()=>{if(!oi()||typeof Is()!="function")throw new Error(`${ct.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,e()},()=>{let o=T(`[${this.applicationName}] ${ct.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${ct.getPlatformName()} was not initialized.`);delete this.observedEvents[e],vd(e)}getOverlayNode(e=""){if(e==="")return;let r=document.querySelectorAll(`form[data-testid=klaviyo-form-${e}]`);if(r.length===0)return;if(r.length>1)throw new Error(`[${this.applicationName}] Expected exactly one matching ${ct.getPlatformName()} form but found ${r?.length}. Form ID: ${e}`);let o=r[0];function n(i){return i instanceof HTMLBodyElement}for(;o&&!n(o.parentElement);)o=o?.parentNode||void 0;return o}static getPlatformName(){return ei}static getInstance(){return new ct}};async function Ie(t,e=2e3,r=100){let o=Date.now()+e,n=t();for(;!n&&Date.now()<o;)await se(r),n=t();return n}var Et=class{constructor(){this.applicationName=U?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return ti}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),fe(r,ge({rendered_form_id:e},o,n)))}async setup(){if(this.observedEvents={},!await Ie(()=>typeof window.postscript?.popups?.open=="function",5*60*1e3)){let r=T(`[${this.applicationName}] ${Et.getPlatformName()} globals not found.`);throw a.error(r),r}await se(2e3),_.addListener(window,"postscriptPopup",r=>{if(r.detail.type==="formSubmit"){let{values:o,popupId:n}=r.detail;o?.email&&o.email.length&&(Z(o.email),this.handleEvent(n.toString(),h.PWO_EMAIL_LEAD,o.phone,o.email)),o?.phone&&o.phone.length&&(ce(o.phone),this.handleEvent(n.toString(),h.PWO_SMS_LEAD,o.phone,o.email))}}),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Et.getPlatformName()} was not initialized.`);let r=Number(e);if(Number.isNaN(r))throw new Error(`[${this.applicationName}] Cannot trigger overlay for ${Et.getPlatformName()} due to an invalid formId: ${e}`);delete this.observedEvents[e],window.postscript.popups.open(r,{activePopupBehavior:"ALWAYS_DISMISS",respectPopupStatus:!1})}static getInstance(){return new Et}};var bt=class{constructor(){this.applicationName=U?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return ld}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),fe(r,ge({rendered_form_id:e},o,n)))}async setup(){if(this.observedEvents={},!await Ie(()=>window?._recart?.isReady(),6e3)){let r=T(`[${this.applicationName}] ${bt.getPlatformName()} globals not found.`);throw a.error(r),r}er(/https:\/\/api.recart.com\/tracking\/v1\/.*\/optin-context.*/gm,r=>{try{let o=r[1]?.body;if(!o)return;let n=JSON.parse(o),i=document.querySelector("#recart-popup-root")?.shadowRoot?.querySelector("[data-testid]")?.getAttribute("data-testid")?.replace("popup-overlay-","").replace("popup-minimized-","");n?.optinToolId&&(this.optinToolId=n.optinToolId),i&&i!==this.optinToolId&&(this.optinToolId=i),n?.optinToolId&&(this.optinToolId=n.optinToolId,this.handleEvent(n.optinToolId,h.PWO_IMPR)),n?.email&&this.optinToolId&&(Z(n.email),this.handleEvent(this.optinToolId,h.PWO_EMAIL_LEAD,n.phoneNumber,n.email)),n?.phoneNumber&&this.optinToolId&&(ce(n.phoneNumber),this.handleEvent(this.optinToolId,h.PWO_SMS_LEAD,n.phoneNumber,n.email))}catch(o){a.error(T(`[${this.applicationName}] ${bt.getPlatformName()} could not process impressions event. ${o?.message}`))}},!1),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window?._recart?.showOptinTool)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${bt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window._recart.showOptinTool(e)}static getInstance(){return new bt}};var et=class{constructor(){this.applicationName=U?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return pd}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),fe(r,ge({rendered_form_id:e},o,n)))}static async loadSendlane(){return window._Sendlane?Promise.resolve():(window._Sendlane=window._Sendlane||[],new Promise((e,r)=>{try{let o=document.createElement("script");o.src="https://sendlane.com/scripts/pusher.js",o.async=!0,o.onload=()=>{e()},document.getElementsByTagName("head")[0]?.appendChild(o)}catch(o){r(o)}}))}static isSendlaneLoaded(){return typeof window._Sendlane?.push=="function"&&window._Sendlane?.baseUrl}async setup(){try{window.addEventListener("sendlaneForms",r=>{try{if(!(r instanceof CustomEvent))throw new Error("Invalid Sendlane event");switch(r.detail.type){case"open":this.handleEvent(r.detail.form_key,h.PWO_IMPR);break;case"close":this.handleEvent(r.detail.form_key,h.PWO_CLOSE);break;case"submit":let{email:o,phone:n,isSubmitSuccess:i}=r.detail.metaData;i&&o&&Fo(o)&&(Z(o),this.handleEvent(r.detail.form_key,h.PWO_EMAIL_LEAD,void 0,o)),i&&n&&this.handleEvent(r.detail.form_key,h.PWO_SMS_LEAD,n);break}}catch(o){a.error(o)}}),this.observedEvents={};let e=T(`[${this.applicationName}] ${et.getPlatformName()} globals not found.`);if(window._Sendlane||await Zr(et.loadSendlane(),5e3,e),et.isSendlaneLoaded())this.hasSetupCompletedSuccessfully=!0;else throw e}catch(e){throw a.error(e),e}}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${et.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window._Sendlane?.push({form_key:e}),Ie(()=>window._Sendlane?.openForm).then(()=>{window._Sendlane?.openForm?window._Sendlane.openForm(e):a.error(`${et.getPlatformName()} failed to trigger since openForm was not found.`)})}static getInstance(){return new et}};var Zy=new Map([["before-popup-display",h.PWO_IMPR],["before-form-submit",h.PWO_EMAIL_LEAD],["after-popup-close",h.PWO_CLOSE]]),Lt=class{constructor(){this.applicationName=U?.toUpperCase();this.observedEvents={};this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return md}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),fe(r,ge({rendered_form_id:e},o,n)))}addWisepopsEventListeners(){Zy.forEach((e,r)=>{window?.wisepops&&(e===h.PWO_EMAIL_LEAD?window.wisepops("listen",r,o=>{let n=o?.target?.elements.email?.value;n&&Z(n),this.handleEvent(o?.detail?.popup?.id?.toString(),e,void 0,n)}):window.wisepops("listen",r,o=>{this.handleEvent(o?.detail?.popup?.id?.toString(),e)}))})}async setup(){if(this.observedEvents={},!await Ie(()=>{if(typeof window?.wisepops=="function")return window?.wisepops},5e3)){let r=T(`[${this.applicationName}] ${Lt.getPlatformName()} globals not found.`);throw a.error(r),r}this.addWisepopsEventListeners(),this.hasSetupCompletedSuccessfully=!0}isInitialized(){return this.hasSetupCompletedSuccessfully}triggerOverlay(e){if(!this.isInitialized()||!window?.wisepops)throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Lt.getPlatformName()} was not initialized.`);delete this.observedEvents[e],window.wisepops("event",`trigger-${e}`)}static getInstance(){return new Lt}};var Le=class{constructor(){this.applicationName=U.toUpperCase();this.hasSetupCompletedSuccessfully=!1;this.observedEvents={}}static getPlatformName(){return gd}hasEventBeenObserved(e,r){return this.observedEvents[e]?.includes(r)}addToObservedEvents(e,r){if(e){let o=this.observedEvents[e];this.observedEvents[e]=o?[...o,r]:[r]}}handleEvent(e,r,o,n){this.hasEventBeenObserved(e,r)||(this.addToObservedEvents(e,r),fe(r,ge({rendered_form_id:e},o,n)))}setup(){return er(/.*\/forms-impressions.*/gm,e=>{try{let r=e[1]?.body;if(!r)return;let{tool_id:o}=JSON.parse(r);o&&this.handleEvent(o,h.PWO_IMPR)}catch(r){a.error(T(`[${this.applicationName}] ${Le.getPlatformName()} could not process impressions event. ${r?.message}`))}},!1),new Promise(e=>(ee(()=>{_.addListener(document,"smsbump-custom-form-event",r=>{let{form_id:o,format_phone:n,phone:i,email:c,event:s}=r?.detail;s==="form_submit"&&(c&&(Z(c),this.handleEvent(o,h.PWO_EMAIL_LEAD,n||i,c)),(n||i)&&(ce(n||i),this.handleEvent(o,h.PWO_SMS_LEAD,n||i,c)))})}),this.hasSetupCompletedSuccessfully=!0,e()))}createTriggeringElement(){this.blackCrowFormTriggeringElement=document.createElement("div"),this.blackCrowFormTriggeringElement.style.width="0",this.blackCrowFormTriggeringElement.style.height="0",this.blackCrowFormTriggeringElement.style.opacity="0",this.blackCrowFormTriggeringElement.style.pointerEvents="none",document.body.appendChild(this.blackCrowFormTriggeringElement)}static isFormIdVisible(e){return Le.isFormIdPresent(e)&&document?.getElementById(`smsbump-form-${e}`)?.firstElementChild?.getAttribute("aria-hidden")!=="true"}static isFormIdPresent(e){return!!document?.getElementById(`smsbump-form-${e}`)?.firstElementChild}triggerOverlay(e){if(this.blackCrowFormTriggeringElement||this.createTriggeringElement(),!this.blackCrowFormTriggeringElement||!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call triggerOverlay as ${Le.getPlatformName()} was not initialized.`);this.blackCrowFormTriggeringElement.id=`bcai_${e}`,this.blackCrowFormTriggeringElement.className=`bcai_${e}`;let r=this.blackCrowFormTriggeringElement;delete this.observedEvents[e],Ie(()=>{if(!Le.isFormIdPresent(e))return!1;if(Le.isFormIdVisible(e))return!0;let o=new MouseEvent("mousedown",{bubbles:!0});return r.dispatchEvent(o),Le.isFormIdVisible(e)},15e3,1e3).then(o=>{o||a.error(T(`[${this.applicationName}] ${Le.getPlatformName()} could not trigger overlay for form id: ${e}.`))})}getTriggerElement(){if(!(!this.blackCrowFormTriggeringElement||!this.isInitialized()))return this.blackCrowFormTriggeringElement}isInitialized(){return this.hasSetupCompletedSuccessfully}static getInstance(){return new Le}};var ut=class{constructor(){this.applicationName=U?.toUpperCase();this.hasSetupCompletedSuccessfully=!1}static getPlatformName(){return ti}static isPostscriptLoaded(){return typeof window?.postscript?.getSubscriberId=="function"}setup(){return new Promise((e,r)=>L(()=>{if(!ut.isPostscriptLoaded())throw new Error(`${ut.getPlatformName()} globals not found`);this.hasSetupCompletedSuccessfully=!0,e()},()=>{let o=T(`[${this.applicationName}] ${ut.getPlatformName()} globals not found.`);a.error(o),r(o)},100))}isInitialized(){return this.hasSetupCompletedSuccessfully}isIdentified(){if(!this.isInitialized())throw new Error(`[${this.applicationName}] Cannot call isIdentified as ${ut.getPlatformName()} was not initialized.`);return!!window?.postscript?.getSubscriberId?.()}static getInstance(){return new ut}};var ar=class{constructor(){this.applicationName=U?.toUpperCase()}static getPlatformName(){return hd}async isIdentified(){try{let e=await H(qr);return!!(e?.email_collected||e?.sms_collected)}catch(e){return a.error(new Error(`[${this.applicationName}] Error checking if user is identified by ${ar.getPlatformName()}: ${e}`)),!1}}setup(){}isInitialized(){return!0}static getInstance(){return new ar}};var co=class{static getOverlayPlatformClassByName(e){return new Map([[Kr.getPlatformName(),Kr],[Xt.getPlatformName(),Xt],[tn.getPlatformName(),tn],[ct.getPlatformName(),ct],[Et.getPlatformName(),Et],[bt.getPlatformName(),bt],[et.getPlatformName(),et],[Lt.getPlatformName(),Lt],[Le.getPlatformName(),Le]]).get(e.toLowerCase())?.getInstance()}constructor(e){if(!e)throw new Error("[PWO] No configured overlay renderer");let r=co.getOverlayPlatformClassByName(e);if(!r)throw new Error(`[PWO] Unrecognized overlay renderer: ${e}`);this.overlayPlatform=r,this.platformName=e}setup(){return this.overlayPlatform.isInitialized()?Promise.resolve():this.overlayPlatform.setup()}triggerOverlay(e){return this.overlayPlatform.triggerOverlay(e)}getOverlayNode(e){if(typeof this.overlayPlatform.getOverlayNode=="function")return this.overlayPlatform.getOverlayNode(e)}get name(){return this.platformName}},uo=class{static getOverlayPlatformClassByName(e){return new Map([[Kt,Te],[Sr.getPlatformName(),Sr],[Te.getPlatformName(),Te],[ut.getPlatformName(),ut],[ar.getPlatformName(),ar]]).get(e.toLowerCase())}constructor(e){if(!Array.isArray(e)||!e.length)throw new Error("[PWO] No configured identity platforms");if(this.identifierPlatforms=e.map(r=>{let o=uo.getOverlayPlatformClassByName(r?.toLowerCase());return o||a.error(new Error(`[PWO] Unrecognized identity platform: ${r}`)),o}).filter((r,o,n)=>!!r&&o===n.indexOf(r)).map(r=>r.getInstance()),!this.identifierPlatforms.length)throw new Error("[PWO] No configured identity platforms")}setup(){return Promise.all(this.identifierPlatforms.map(e=>e.isInitialized()?Promise.resolve():e.setup()))}isUserIdentified(){let e=this.identifierPlatforms.map(async r=>{try{return r.isIdentified()}catch{return!0}});return Promise.all(e).then(r=>r.some(o=>o===!0),()=>!0)}addAttributesToUserProfile(e){this.identifierPlatforms.forEach(r=>{typeof r.addAttributesToUserProfile=="function"&&r.addAttributesToUserProfile(e)})}};var Ky={subtree:!0,childList:!0};function $d(t,e){t.style.setProperty("z-index",e,"important")}function Bd(t,e="relative"){t.style.setProperty("position",e)}async function Ud(t,e,r){try{if(!t||!e||!r)return;let o=r.getOverlayNode(e);if(o){let n=window.getComputedStyle(o).position;(!n||n==="static")&&Bd(o),$d(o,t);return}await new Promise((n,i)=>{let c=new MutationObserver(()=>{try{let s=r.getOverlayNode(e);if(s){let u=window.getComputedStyle(s).position;(!u||u==="static")&&Bd(s),$d(s,t),c.disconnect(),n()}}catch(s){c.disconnect(),i(s)}});c.observe(document.body,Ky)})}catch(o){a.error(o)}}function Vd(t,e,r){if(e&&r){let o=t?.filter(({zIndex:i})=>i).map(i=>i.zIndex).sort((i,c)=>parseInt(c,10)-parseInt(i,10))[0];return o&&Number.isNaN(parseInt(o,10))?Promise.resolve():Ud(o||"2147483647",e,r)}return Promise.resolve()}var Dt=class{constructor(e){this.name=e}set(e,r){Y(this.name,e,r)}get(){return lt(this.name)}reset(){Y(this.name,"",-1)}};var Ds=class{constructor(){this.SEPARATOR="|";this.overlayHistoryCookie=new Dt(hu)}get(){let e=this.overlayHistoryCookie.get();return e?e.split(this.SEPARATOR):[]}push(e){let r=this.get();r.push(e),this.overlayHistoryCookie.set(r.join(this.SEPARATOR),30)}count(e){return this.get().filter(r=>r===e).length}totalCount(){return this.get().length}},sr=class{constructor(){this.overlayClosedCookieDuration=30;this.openedOverlayEventData=[];this.history=new Ds}static overlayWasClosed(){return!!sr.overlayClosedCookie.get()}static piiWasSubmitted(){return!!sr.piiSubmittedCookie.get()}static setPIISubmitCookie(){sr.piiSubmittedCookie.set("true",1051200)}closeOverlay(){this.openOverlayTriggerType=void 0}setOverlayClosedCookie(){this.isOverlayOpenedByATC()||sr.overlayClosedCookie.set("true",this.overlayClosedCookieDuration)}closeOverlayAndSetCookie(){this.closeOverlay(),this.setOverlayClosedCookie()}isOverlayOpen(){return!!this.openOverlayTriggerType}piiWasSubmitted(){return sr.piiWasSubmitted()}submitPII(){sr.setPIISubmitCookie()}setOverlayClosedDuration(e=30){this.overlayClosedCookieDuration=e}totalOverlaysOpenedCount(){return this.history.totalCount()}overlayOpenedEvent(e){e&&this.openedOverlayEventData.push(e)}handleOpenAttemptOutcome(e){let r=e?.resolved_form_id;if(r){if(!this.openedOverlayEventData.length){a.error(new Pr(`[PWO] Impression failed to render for formId: ${r}`));return}if(this.openedOverlayEventData.every(n=>!n.rendered_form_id||`${n.rendered_form_id}`?.trim()==="")){le("[PWO] All rendered form Ids undefined. Could be justuno overlay.");return}if(this.openedOverlayEventData.find(n=>`${n.rendered_form_id}`===r))le("[PWO] Impression rendered successfully.");else{let n=this.openedOverlayEventData.map(i=>!i.rendered_form_id||`${i.rendered_form_id}`==""?"<missing_id>":i.rendered_form_id);a.error(new Pr(`[PWO] Impression failed to render for formId: ${r} and external impression rendered form ids: ${n}`))}}}openAttemptEvent(e){this.openedOverlayEventData=[],_.setTimeout(()=>this.handleOpenAttemptOutcome(e),5e3)}openStandardOverlay(){this.openOverlayTriggerType="s",this.history.push("s")}standardOverlaysOpenedCount(){return this.history.count("s")}isOverlayOpenedByStandard(){return this.openOverlayTriggerType==="s"}openAtcOverlay(){this.openOverlayTriggerType="a",this.history.push("a")}atcOverlaysOpenedCount(){return this.history.count("a")}isOverlayOpenedByATC(){return this.openOverlayTriggerType==="a"}openExitOverlay(){this.openOverlayTriggerType="e",this.history.push("e")}exitOverlaysOpenedCount(){return this.history.count("e")}isOverlayOpenedByExitTrigger(){return this.openOverlayTriggerType==="e"}},ft=sr;ft.overlayClosedCookie=new Dt(gu),ft.piiSubmittedCookie=new Dt(yu);function Yy(t){if(!t)return!1;let e=t.getBoundingClientRect(),r=getComputedStyle(t);return r.display!=="none"&&r.visibility!=="hidden"&&e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function Xy(t){return[...document.querySelectorAll(t)].some(r=>Yy(r))}function Wd(t=[]){return t.some(Xy)}var St=class{constructor(e){this.overlayLimitTracker=e}static alreadyExcludedByChannel(){return!!St.pwoExcludedByChannelNameCookie.get()}static shouldBeExcludedByChannel(){let e=ir.safeFromConfigJSON();return!!(e&&e.hasExcludedUrlParams())}static doExcludeByChannel(){St.pwoExcludedByChannelNameCookie.set(!0,void 0)}static meetsExitOverlayConditions(){let e=ft.piiWasSubmitted(),r=St.isExcludedByChannel();return!(e||r)}static isEligibleForATCTrigger(e,r){return e.overlay_eligible?!r.channel_excluded&&!r.identified&&!r.pii_submitted:!1}static isExcludedByChannel(){return this.alreadyExcludedByChannel()?!0:this.shouldBeExcludedByChannel()?(this.doExcludeByChannel(),!0):!1}static isOverlayClearedToDisplay(){let e=ir.safeFromConfigJSON();return!Wd(e?.blockOverlayOnCssSelectors)}isEligibleForExitOverlay(){return St.meetsExitOverlayConditions()&&this.overlayLimitTracker.canOpenExitOverlay()&&St.isOverlayClearedToDisplay()}shouldTriggerATCOverlay(e,r){return St.isEligibleForATCTrigger(e,r)&&this.overlayLimitTracker.canOpenAtcOverlay()&&St.isOverlayClearedToDisplay()}isEligibleForStandardOverlay(e){return e.isUserIdentified().then(o=>!o&&this.overlayLimitTracker.canOpenStandardOverlay()&&St.isOverlayClearedToDisplay())}},fo=St;fo.pwoExcludedByChannelNameCookie=new Dt(vu);var li=class{constructor(e){this.maxTotalOverlays=1/0;this.maxStandardOverlays=1;this.maxATCOverlays=1;this.maxExitOverlays=1;this.interactionTracker=e}setMaxTotalOverlays(e=1/0){this.maxTotalOverlays=e}totalOverlayLimitReached(){return this.interactionTracker.totalOverlaysOpenedCount()>=this.maxTotalOverlays}standardOverlayLimitReached(){return this.interactionTracker.standardOverlaysOpenedCount()>=this.maxStandardOverlays}canOpenStandardOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.interactionTracker.piiWasSubmitted()&&!this.standardOverlayLimitReached()&&!this.totalOverlayLimitReached()}atcOverlayLimitReached(){return this.interactionTracker.atcOverlaysOpenedCount()>=this.maxATCOverlays}canOpenAtcOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.atcOverlayLimitReached()&&!this.totalOverlayLimitReached()}exitOverlayLimitReached(){return this.interactionTracker.exitOverlaysOpenedCount()>=this.maxExitOverlays}canOpenExitOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.exitOverlayLimitReached()&&!this.totalOverlayLimitReached()}};var Qy={["s"]:"openStandardOverlay",["a"]:"openAtcOverlay",["e"]:"openExitOverlay"},ev={["s"]:"isOverlayOpenedByStandard",["a"]:"isOverlayOpenedByATC",["e"]:"isOverlayOpenedByExitTrigger"},dt=class{constructor(){this._overlayTracker=new ft,this._overlayLimitTracker=new li(this._overlayTracker),this._overlayEligibility=new fo(this._overlayLimitTracker)}static overlayWasClosed(){return ft.overlayWasClosed()}static piiWasSubmitted(){return ft.piiWasSubmitted()}static setPIISubmitCookie(){ft.setPIISubmitCookie()}setOverlayOpen(e){this._overlayTracker[Qy[e]]()}isOverlayOpen(){return this._overlayTracker.isOverlayOpen()}closeOverlay(e=!1){e&&this._overlayTracker.setOverlayClosedCookie(),this._overlayTracker.closeOverlay()}wasOverlayOpenedBy(e){return this._overlayTracker[ev[e]]()}submitPII(){this._overlayTracker.submitPII()}overlayOpenedEvent(e){this._overlayTracker.overlayOpenedEvent(e)}openAttemptEvent(e){this._overlayTracker.openAttemptEvent(e)}setOverlayClosedDuration(e){this._overlayTracker.setOverlayClosedDuration(e)}setMaxTotalOverlays(e){this._overlayLimitTracker.setMaxTotalOverlays(e)}static isExcludedByChannel(){return fo.isExcludedByChannel()}isEligibleForATCOverlay(e,r){return this._overlayEligibility.shouldTriggerATCOverlay(e,r)}isEligibleForExitOverlay(){return this._overlayEligibility.isEligibleForExitOverlay()}isEligibleForStandardOverlay(e){return this._overlayEligibility.isEligibleForStandardOverlay(e)}};var Fr=class{constructor(e,r,o){this.isIdentified=e,this._eventData=r,this.pwoSettings=o}static async createPWOEventData(e,r){let o=E({},{session_page_views:await it()});return new Fr(e,o,r)}buildOverlayBucketParams(){let e=this.pwoSettings?.overlayBuckets,r=this.pwoSettings?.extractRelevantFormConfig(),o=Xr(this.pwoSettings?.scoreName);return e===void 0?void 0:{resolved_trigger_config:{...e},resolved_form_id:r?.formId,resolved_form_profile:r?.profile,resolved_score:o,version:this.pwoSettings?.version}}buildEligibilityParams(){return{closed_overlay:!!dt.overlayWasClosed(),identified:this.isIdentified,pii_submitted:!!dt.piiWasSubmitted(),channel_excluded:dt.isExcludedByChannel()}}get eventData(){return E({},this.buildOverlayBucketParams(),this.buildEligibilityParams(),this._eventData)}extendEventData(e){E(this._eventData,e)}get bucketName(){return this.buildOverlayBucketParams()?.resolved_trigger_config?.name}get showOverlayOnATC(){return this.buildOverlayBucketParams()?.resolved_trigger_config?.triggerBuckets?.showOverlayOnATC}};var Ft=class{constructor(e){this.response=e}get delay(){return this.trigger_type!==Yt.SESSION_VIEW_COUNT?this.response.trigger_count:0}get minimum_page_views(){return this.trigger_type===Yt.SESSION_VIEW_COUNT?this.response.trigger_count:0}get form_id(){return this.response.form_id}get form_profile(){return this.response.form_profile}get overlay_eligible(){return this.response.overlay_eligible}get trigger_type(){return this.response.trigger_type}get trigger_count(){return this.response.trigger_count}_equals(e){return this.form_id===e.form_id&&this.form_profile===e.form_profile&&this.overlay_eligible===e.overlay_eligible&&this.trigger_type===e.trigger_type&&this.trigger_count===e.trigger_count}};var lo=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,W("platform",h.ADD_TO_CART,()=>{this.triggerOverlay()})}async triggerOverlay(){try{let e=await it();if(this.minimumPageViews&&this.minimumPageViews>e)return;this.delay>0&&await se(this.delay*1e3),this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`))}}static buildTrigger(e,r,o,n,i){if(!e.showOverlayOnATC)return;let c=new Ft(r),s=async()=>{try{if(!o.isEligibleForATCOverlay(c,n.eventData))return;o.setOverlayOpen("a"),i(c)}catch(u){a.error("[PWO] Error triggering overlay",u)}};return new lo(c.delay,1,s)}};var po=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,xd(()=>this.triggerOverlay())}async triggerOverlay(){try{let e=await it();if(this.minimumPageViews&&this.minimumPageViews>e)return;this.delay>0&&await se(this.delay*1e3),this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`))}}static buildTrigger(e,r,o,n,i){if(!e.showSecondOverlayOnExitIntent&&r?.trigger_type!==Yt.EXIT_INTENT)return;let c=new Ft(r),s=new Ft(E({},r,{trigger_type:Yt.EXIT_INTENT})),u=async()=>{try{if(!o.isEligibleForExitOverlay()||n.eventData.identified)return;o.setOverlayOpen("e"),i(s)}catch(m){a.error("[PWO] Error triggering overlay",m)}};return new po(c.delay,1,u)}};var mo=class{constructor(e=0,r=0,o){this.delay=e,this.minimumPageViews=r,this.triggerFn=o,this.triggerOverlay()}async triggerOverlay(){try{let e=await it();if(this.minimumPageViews&&this.minimumPageViews>e)return;this.delay>0&&await se(this.delay*1e3),this.triggerFn()}catch(e){a.error(new Error(`[PWO] Error delaying overlay: ${e}`))}}static buildTrigger(e,r,o,n){let i=new Ft(e);if(i.trigger_type===Yt.EXIT_INTENT||!i.trigger_type)return;let c=async()=>{try{if(!await r.isEligibleForStandardOverlay(o))return;r.setOverlayOpen("s"),n(i)}catch(s){a.error("[PWO] Error triggering overlay",s)}};return new mo(i.delay,i.minimum_page_views,c)}};var Mr=class{constructor(e){this.triggers=[];this.triggers=e}get triggerList(){return this.triggers}static buildTriggerManager(e,r,o,n,i,c){if(!r.overlay_eligible)return new Mr([]);let s=[mo.buildTrigger(r,o,n,c),lo.buildTrigger(e,r,o,i,c),po.buildTrigger(e,r,o,i,c)].filter(u=>u!==void 0);return new Mr(s)}};function qd(){let t=Eu()?.filter(o=>o?.name==="request: view")||[];if(t.length===0)return{};let e=t[t.length-1],r=JSON.parse(e?.data?.body||"{}");return E({},{page_id:r?.page_id})}var tv={subtree:!0,childList:!0,attributes:!0};function Fs(t){let e=t.getAttribute("tabindex");return t.removeAttribute("tabindex"),()=>{t.setAttribute("tabindex",e||"0")}}function rv(t){if(!(!t||window.themeCore===void 0))return se(1e3).then(()=>{window.themeCore?.utils?.removeTrapFocus()}),()=>{window.themeCore?.EventBus?.emit("cart:drawer:open")}}var Ms=class{constructor(e){this.isRunning=!0;this.focusTrap=e;let r=this.getActiveElement();if(r){this.handleActiveElement(r);return}this._promise=new Promise((o,n)=>{this.resolve=o,this.observer=new MutationObserver(()=>{try{r=this.getActiveElement(),r&&(this.handleActiveElement(r),o())}catch(i){this.observer?.disconnect(),this.isRunning=!1,n(i)}}),this.observer.observe(document.querySelector(e.baseElement),tv)})}getActiveElement(){return this.focusTrap.activeElements.reduce((e,r)=>{if(e)return e;let o=document.querySelector(r.selector);return o?{element:o,callback:r.callback}:void 0},void 0)}handleActiveElement(e){this.cleanup=e.callback(e.element),this.observer?.disconnect(),this.isRunning=!1}get isActive(){return this.isRunning}get promise(){return this._promise}cancel(){if(!this.isRunning){this.cleanup?.();return}this.isRunning=!1,this.observer?.disconnect(),this.resolve?.()}};function Gd(t=[{baseElement:"[id=sidebar-cart]",activeElements:[{selector:"[id=sidebar-cart][aria-hidden=false]",callback:Fs}]},{baseElement:"#CartDrawer",activeElements:[{selector:"#CartDrawer.drawer--is-open",callback:Fs},{selector:"#CartDrawer.is-transitioning[tabIndex]",callback:Fs},{selector:"#CartDrawer.is-active",callback:rv}]}]){try{if(t.length===0)return;let e=t.find(({baseElement:r})=>document.querySelectorAll(r).length>0);return e?new Ms(e):void 0}catch(e){a.error(e)}}function Mt(t){let e=new Error(t);return e.name="InvalidResponseBodyError",e.status="warn",e.stack=oe(e.stack,1),e}var tt,rn,Bt,$t,ov,jd,De=new dt;async function nv(){tt=await Fr.createPWOEventData(!1,$t)}async function iv(){try{De.closeOverlay(),await nv()}catch(t){a.error(t)}}function av(t){a.push({trigger:h.PWO_OPEN_ATTEMPT}),rn.triggerOverlay(t.form_id),Bt.addAttributesToUserProfile({blackcrow_exposed_population_bucket:tt?.bucketName,bcai_trigger:t.trigger_type,profile:t.form_profile})}function sv(t){let e=t?.apps?.pwo;if(e){tt?.extendEventData({resolved_form_id:e.form_id,resolved_form_profile:e.form_profile,trigger_type:e.trigger_type,trigger_count:e.trigger_count,pwo_response_overlay_eligible:e.overlay_eligible});let r=tt?.bucketName;Bt.addAttributesToUserProfile(E({},{blackcrow_all_population_bucket:r,blackcrow_eligible_population_bucket:e?.overlay_eligible?r:void 0})),ov=Mr.buildTriggerManager($t,e,De,Bt,tt,av)}else a.error(Mt(`[${U.toUpperCase()}] missing "pwo" in response: ${JSON.stringify(t)} - PWO may be disabled for current URL pattern.`))}function cv(t,e){return re(t,E({},e,qd()),r=>{sv(r)})}async function uv(t){try{if(t.renderer&&t.isIdentified&&ya()){await t.renderer;let e=await t.isIdentified;tt=await Fr.createPWOEventData(e,$t);let r=tt.eventData;await cv(j.PWO_DECISION,r)}}catch(e){a.error(e)}}function mi(t,e=!1){let r=De.isOverlayOpen(),o=typeof t?.rendered_form_id=="number"?`${t?.rendered_form_id}`:t?.rendered_form_id?.trim(),n=r&&(o===t.resolved_form_id||e&&!o);return E(t,{bcai_triggered:n,overlay_triggered_by_atc:n&&De.wasOverlayOpenedBy("a"),overlay_triggered_by_seu:n&&De.wasOverlayOpenedBy("e")})}function fv(){W("platform",h.VIEW_RESPONSE,()=>{ya()&&(W("platform",h.PWO_CLOSE,t=>{let e=mi(E({},t,tt?.eventData));re(j.PWO_CLOSE,e),e.bcai_triggered&&(De.closeOverlay(!0),jd?.cancel())}),W("platform",h.PWO_EMAIL_LEAD,t=>{De.submitPII();let e=mi(E({},t,tt?.eventData));re(j.PWO_EMAIL_LEAD,e),e.bcai_triggered&&Bt.addAttributesToUserProfile({blackcrow_identified:!0})}),W("platform",h.PWO_SMS_LEAD,t=>{De.submitPII();let e=mi(E({},t,tt?.eventData));re(j.PWO_SMS_LEAD,e),e.bcai_triggered&&Bt.addAttributesToUserProfile({blackcrow_identified:!0})}),W("platform",h.PWO_IMPR,t=>{let e=mi(E({},t,tt?.eventData),!0);De.overlayOpenedEvent(e),re(j.PWO_IMPR,e),e.bcai_triggered&&(jd=Gd()),e.bcai_triggered&&e.overlay_triggered_by_atc&&Vd($t.styleSettings,e?.rendered_form_id,rn)}),W("platform",h.PWO_OPEN_ATTEMPT,t=>{let e=E({},t,tt?.eventData);De.openAttemptEvent(e),re(j.PWO_OPEN_ATTEMPT,E(e,{bcai_triggered:!0,overlay_triggered_by_atc:De.wasOverlayOpenedBy("a"),overlay_triggered_by_seu:De.wasOverlayOpenedBy("e")}))}))})}function dv(){let t={isIdentified:void 0,renderer:void 0};try{if(ir.isDisabled()||y())return t;dt.isExcludedByChannel(),$t=ir.fromConfigJSON(),rn||(rn=new co($t.rendererName)),Bt||(Bt=new uo($t.identifierNames)),De.setOverlayClosedDuration($t.overlayClosedCookieDuration),De.setMaxTotalOverlays($t.maxTotalOverlays),t.isIdentified=Bt.setup().then(()=>Bt.isUserIdentified()).catch(()=>!0),t.renderer=rn.setup(),fv()}catch(e){a.error(e)}return t}var Hd={appName:U,init:dv,sendAppScores:uv,cleanup:iv};var $s="cordial";function lv(t,e,r){let o=`${f}`,n=B([o,t.integration_product]),i=w(window,"crdl");if(typeof i=="function"){let c={app_name:e,integration_product:t.integration_product,conversion_product:t.conversion_product,conversion_type:t.conversion_type,comparison_population:t.comparison_population,comparison_group:t.comparison_group,comparison_type:t.comparison_type,threshold_setter:t.threshold_setter,threshold_group_count:t.threshold_group_count,score:G(t.score)};i("event",n,c),typeof r=="function"&&r($s,n)}else throw new Error($)}var Bs={name:$s,send:X($s,lv)};var on=window.GoogleAnalyticsObject||"ga";window[on]=window[on]||function(){(window[on].q=window[on].q||[]).push(arguments)};var B1=window[on];window.dataLayer=window.dataLayer||[];function pv(){return typeof window.gtag=="function"?window.gtag.toString()!=="function () { }":!1}var Pt=pv()?window.gtag:function(){window.dataLayer.push(arguments)};function zd(t,e){let r=document.createElement("script");r.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,r.async=!0,document.getElementsByTagName("head")[0].appendChild(r),Pt("js",new Date),Pt("config",t,e)}function Jd(t,e,r=!1){Pt("event",t,{send_to:e,non_interaction:r})}async function nn(){try{return(await A("_ga"))?.split(".")?.slice(-2).join(".")}catch(t){a.error(t);return}}async function Us(t,e){try{if(y()){let o=z(t,e).tracking_id,n=await nn();return o!=null&&o.startsWith("UA-")&&n!==void 0}if(Array.isArray(window.dataLayer)){let r=!1;return S(window.dataLayer,o=>{o[0]==="config"&&o[1]&&o[1].indexOf("UA-")===0&&(r=!0)}),r}return!1}catch(r){a.error(r);return}}async function Vs(t,e){try{if(y()){let o=z(t,e).tracking_id,n=await nn();return o!=null&&o.startsWith("G-")&&n!==void 0}if(Array.isArray(window.dataLayer)){let r=!1;return S(window.dataLayer,o=>{o[0]==="config"&&o[1]&&o[1].indexOf("G-")===0&&(r=!0)}),r}return!1}catch(r){a.error(r);return}}function go(t,e={}){!y()&&t&&zd(t,e)}async function gi(t,e,r,o=!1){try{let n=await Q(r),i=jo(t,e),c=n.length?n[0].value:void 0;i.forEach(s=>{let u=s.pixelId,m=s.loadPixel===!0;u&&c&&m&&(go(u,{user_id:c,send_page_view:!1}),o&&Jd("page_view_blackcrow",u))})}catch(n){a.error(n)}}var hi="event",ke="google_analytics",mv="https://www.google-analytics.com/collect",gv="https://www.google-analytics.com/g/collect";function Zd(){return!!M("config.google_analytics.gtag_externally_configured")}function hv(){return!!M("config.google_analytics.gtm_format")}function yv(t,e){let r=z(t,ke);if(Zd()){e();return}let o=r?.tracking_id;go(o,{send_page_view:!1}),e()}async function vv(t,e,r,o,n){try{let i=new URL(mv);i.search=Pe({v:1,t:hi,tid:t,cid:await nn(),ec:e,ea:r,el:o,ua:ve(),dl:k(),dt:document.title,ni:1}),J(i.toString(),{method:"GET",mode:"cors"},n)}catch(i){a.error(new Error(`${ke} api call failed with ${i}`))}}async function _v(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:c,thresholdSetter:s,thresholdGroupCount:u,comparisonPopulation:m,score:g}){try{let b=new URL(gv);b.search=Pe({v:2,tid:t,en:hi,cid:await nn(),dl:k(),dt:document.title,ep:{app_name:r,integration_product:o,conversion_product:n,comparison_population:m,comparison_type:c,conversion_type:i,threshold_setter:s,threshold_group_count:u,non_interaction:!0},epn:{score:g}}),J(b.toString(),{method:"POST",mode:"cors"},e)}catch(b){a.error(new Error(`${ke} api call failed with ${b}`))}}function Kd(t,e,r,o,n,i,c,s,u){let m={};return m.category=B([t,e,r,o]),m.action=B([n,i,c,s]),m.label=u,m}async function wv(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:c,thresholdSetter:s,thresholdGroupCount:u,comparisonPopulation:m,score:g}){try{let Vr=function(){typeof e=="function"&&e(ke,{eventCategory:Vt,eventAction:dr,eventLabel:So})};var b=Vr;let V=z(t,ke);if(V.pageBlocked)return;let de=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga,Ut=Kd(r,o,n,i,c,s,u,m,g),Vt=Ut.category,dr=Ut.action,So=Ut.label,Hi=await Us(t,ke),Po=await Vs(),xo;if(Zd()&&(xo={send_to:V.tracking_id}),hv()){let To=B([r,o],"_");window.dataLayer.push({event:To,non_interaction:!0,app_name:r,integration_product:o,conversion_product:n,conversion_type:i,comparison_population:m,comparison_type:c,threshold_setter:s,threshold_group_count:u,score:g,...xo}),Vr();return}if(Po||xo){let To=B([r,o],"_");Pt("event",To,{non_interaction:!0,app_name:r,integration_product:o,conversion_product:n,conversion_type:i,comparison_population:m,comparison_type:c,threshold_setter:s,threshold_group_count:u,score:g,...xo}),Vr()}else if(Hi)Pt("event",dr,{event_category:Vt,event_label:So,non_interaction:!0}),Vr();else if(typeof de=="function"){let To=_.setTimeout(()=>{a.error(new T(`${ke} ready hook not fired`))},5e3);de(su=>{if(clearTimeout(To),!(su&&su.get("trackingId"))){let wn=V.tracking_id;wn||S(de.getAll(),em=>{let cu=em.get("trackingId");if(cu)return wn=cu,!1}),wn?de("create",wn,"auto"):a.error(new Go(`${ke} tracking id not found`))}de("send",{hitType:hi,eventCategory:Vt,eventAction:dr,eventLabel:So,nonInteraction:!0}),Vr()})}else throw new Error($)}catch(V){a.error(V)}}async function Ev(t,{onSuccess:e,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:c,thresholdSetter:s,thresholdGroupCount:u,comparisonPopulation:m,score:g}){try{let dr=function(){typeof e=="function"&&e(ke,{eventCategory:de,eventAction:Ut,eventLabel:Vt})};var b=dr;let V=Kd(r,o,n,i,c,s,u,m,g),de=V.category,Ut=V.action,Vt=V.label,So=await Us(t,ke);if(await Vs(t,ke)){let Po=z(t,ke).tracking_id;_v(Po,{onSuccess:dr,eventPrefix:r,integrationProduct:o,conversionProduct:n,conversionType:i,comparisonType:c,thresholdSetter:s,thresholdGroupCount:u,comparisonPopulation:m,score:g})}else if(So){let Po=z(t,ke).tracking_id;vv(Po,de,Ut,Vt,dr)}else throw new Error($)}catch(V){a.error(V)}}function bv(t,e,r){let o=`${f}_${e}`;function n(c){c.message===$?a.error(new T(`${ke} globals not found`),{appName:e}):a.error(c)}if(!t)return;let i=y()?Ev:wv;L(()=>i(e,{onSuccess:r,eventPrefix:o,integrationProduct:t.integration_product,conversionProduct:t.conversion_product,conversionType:t.conversion_type,comparisonType:t.comparison_type,thresholdSetter:t.threshold_setter,thresholdGroupCount:t.threshold_group_count,comparisonPopulation:t.comparison_population,score:G(t.score)}),n)}var Ws={eventHitType:hi,name:ke,setup:yv,send:bv};var ho="google_ads",Sv="www.googleadservices.com",Pv="_gcl_au";function yi(t){return z(t,ho)?.conversion_id}function Yd(t){return yi(t)?.split("-").splice(-1).join()}async function xv(){try{return(await A(Pv))?.split(".").splice(-2).join(".")}catch(t){a.error(t);return}}async function Xd(t){try{let e=k(),r=xe(),o=Gr(),n=Date.now(),i=await xv(),c={data:`event=${t};non_interaction=true`,fst:n,random:n,auid:i,url:e,ref:r,tiba:o,hn:Sv,rfmt:3,fmt:4,async:1,cv:11,guid:"ON"};return Pe(c)}catch(e){return a.error(e),Pe({})}}var Tv="event",Av="https://googleads.g.doubleclick.net/pagead/viewthroughconversion";function Iv(t,e){let r=yi(t);go(r),e()}function kv(){if(Array.isArray(window.dataLayer)){let t=!1;return S(window.dataLayer,e=>{e[0]==="config"&&e[1]&&e[1].indexOf("AW-")===0&&(t=!0)}),t}return!1}async function Cv(t,e,r){try{let o=Yd(e),n=await Xd(t);Wr(`${Av}/${o}/?${n}`),r()}catch(o){a.error(new Error(`${ho} api call failed with ${o}`))}}function Ov(t,e,r){if(kv())Pt("event",t,{send_to:yi(e),non_interaction:!0}),r();else throw new Error($)}function Nv(t,e,r){let o=`${f}_${e}`,n=B([o,t.integration_product,t.conversion_product,t.conversion_type,t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,`score_${G(t.score)}`]);function i(){typeof r=="function"&&r(ho,{event:n})}y()?Cv(n,e,i):Ov(n,e,i)}var qs={eventHitType:Tv,name:ho,setup:Iv,send:X(ho,Nv)};var Gs="heap";function Rv(t,e,r){let o=w(window,"heap");if(o&&typeof o.addUserProperties=="function"){let i={[B([f,t.comparison_group,t.threshold_group_count])]:t.score};o.addUserProperties(i),typeof r=="function"&&r(Gs,i)}else throw new Error($)}var js={name:Gs,send:X(Gs,Rv)};var an="klaviyo";function Lv(t,e){if(!y()){let r=z(t,an).api_key,o=window._learnq?window._learnq.identify:null;if(r&&typeof o!="function"){let n=document.createElement("script");n.src=`https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=${r}`,n.async=!0,document.getElementsByTagName("head")[0].appendChild(n)}}e()}async function Qd(t,e,r,o){try{let c=function(){typeof o=="function"&&o(an,e)},u=function(){let m=G(r.score),g={[e]:m};return s&&E(g,{$email:s}),g};var n=c,i=u;let s=await ye();if(y()){let m=z(t,an).api_key;m&&J(`https://a.klaviyo.com/api/onsite/identify?c=${m}`,{body:JSON.stringify({token:m,properties:u()}),method:"POST",mode:"cors",credentials:"omit"},c())}else window._learnq||(window._learnq=[],a.error(new T(`${an} globals not found`))),window._learnq.push(["identify",u()]),c()}catch(c){a.error(c)}}var el={},Hs={};function Dv(t){let e=el[t];return()=>{Qd(e.appName,e.eventName,e.scoreObj,e.onSuccess)}}function Fv(t,e,r){if(!t)return;let o=B([`${f}`,"score",t.threshold_group_count,t.comparison_group]);t.name!==void 0&&(el[t.name]={appName:e,eventName:o,scoreObj:t,onSuccess:r},Hs[t.name]===void 0&&(Hs[t.name]=Dv(t.name)),_.addListener(window,"beforeunload",Hs[t.name])),_.setTimeout(()=>Qd(e,o,t,r),5e3)}var zs={name:an,setup:Lv,send:Fv};var Mv="event",vi="microsoft_ads";function $v(t,{onSuccess:e,eventCategory:r,eventAction:o,eventLabel:n,eventValue:i}){function c(){typeof e=="function"&&e(vi,{event_category:r,event_action:o,event_label:n,event_value:i})}try{window.uetq=window.uetq||[],window.uetq.push("event",o,{event_category:r,event_label:n,event_value:i}),c()}catch{a.error(new T(`${vi} globals not found`),{appName:t})}}function Bv(t,e){let o=z(t,vi).tracking_id;o?function(n,i,c,s,u){var m,g,b;n[u]=n[u]||[],m=function(){var V={ti:o};V.q=n[u],n[u]=new UET(V),n[u].push("pageLoad"),e()},g=i.createElement(c),g.src=s,g.async=1,g.onload=g.onreadystatechange=function(){var V=this.readyState;V&&V!=="loaded"&&V!=="complete"||(m(),g.onload=g.onreadystatechange=null)},b=i.getElementsByTagName(c)[0],b.parentNode.insertBefore(g,b)}(window,document,"script","//bat.bing.com/bat.js","uetq"):e()}function Uv(t,e,r){let o=`${f}_${e}`;if(!t)return;let n=t.integration_product,i=B([o,n,t.conversion_product,t.conversion_type]),c=B([t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,t.comparison_group]),s,u;if(n==="prospecting")u=t.raw_probability;else{s=G(t.score);let m=Number(t.score);m>=0&&(u=m)}$v(e,{onSuccess:r,eventCategory:i,eventAction:c,eventLabel:s,eventValue:u})}var Js={eventHitType:Mv,name:vi,setup:Bv,send:Uv};var Zs="oracle_responsys";function Vv(t,e,r){let o=w(window,"ORA.click");if(typeof o=="function"){let n=G(t.score);o({data:{bc_score:n,"wt.dl":99}}),typeof r=="function"&&r(Zs,n)}else throw new Error($)}var Ks={name:Zs,send:X(Zs,Vv)};var tl="track";var Ys="outbrain";function Wv(t,e,r){let o=w(window,"obApi");if(typeof o=="function"){let n=`${f}`,i=t.integration_product,c=B([n,i,t.threshold_group_count,G(t.score)]," ").replace(/[^0-9a-z\s]/gi,"");o(tl,c),typeof r=="function"&&r(Ys,c)}else throw new Error($)}var Xs={name:Ys,send:X(Ys,Wv)};var $r="pinterest",_i=`${f}`;function Qs(t){return{lead_type:t.integration_product,video_title:t.conversion_product,order_id:t.conversion_type,property:t.comparison_group,promo_code:t.comparison_type,search_query:t.threshold_setter,order_quantity:G(t.threshold_group_count),value:G(t.score)}}async function rl(t,e,r){try{let o=await A("_pin_unauth"),n=await A("_derived_epik"),i={event:_i,ed:e,tid:t,pd:{...o&&{pin_unauth:o},...n&&{derived_epik:n}}};return r&&(i.ad={loc:k(),ref:document.referrer}),i}catch(o){a.error(o);let n={event:_i,ed:e,tid:t};return r&&(n.ad={loc:k(),ref:document.referrer}),n}}async function qv(t,e,r){try{let o=z(e,$r).tracking_id;if(o){let n="https://ct.pinterest.com",i=Qs(t),c=await rl(o,i,!1),s=Pe(c,!1);J(`${n}/user/?${s}`,{method:"GET"},r,()=>a.error(new Error(`${$r} api call failed`)));let u=await rl(o,i,!0),m=Pe(u,!1);J(`${n}/v3/?${m}`,{method:"GET"},r,()=>a.error(new Error(`${$r} api call failed`)))}}catch(o){a.error(o)}}async function Gv(t,e){try{let r=Qs(t);if(z(e,$r).advancedMatching){let n=await ye();E(r,{em:n})}return r}catch(r){return a.error(r),Qs(t)}}function jv(t,e,r){if(y())qv(t,e,r);else{let o=w(window,"pintrk");if(typeof o!="function")throw new Error($);Gv(t,e).then(n=>{o("track",_i,n),typeof r=="function"&&r($r,_i)}).catch(n=>a.error(n))}}var ec={name:$r,send:X($r,jv)};var Br="snapchat",wi="_scid",Ei="u_sclid",bi="u_scsid",oc="snaptr",rc={};function Si(t,{getItem:e,setItem:r},o,n=Uo){return!e||!r?(a.error(new Error("Storage object is not valid")),Promise.resolve()):Promise.resolve(e(t)).then(i=>{let c=i;c||(c=n(),r(t,c)),o(c)}).catch(i=>{a.error(i)})}function tc(t){return rc[t]}function Pi(t,e){return rc[t]=e,rc[t]}function Hv(t){return z(t,Br)?.pixel_id}function ol(t,e){let r=Hv(e),o=Wt("navigation")[0],n=Wt(oc)[0];return{pid:r,ev:t.score,pl:k(),rf:xe(),ts:Date.now(),trackId:Uo(),u_c1:tc(wi),u_sclid:tc(Ei),u_scsid:tc(bi),m_dcl:o?.domContentLoadedEventEnd,m_pi:o?.domInteractive,m_pl:o?.loadEventEnd,m_pv:o?"v2":"v1",m_rd:Math.floor(bn()),m_sl:n?.startTime,v:"2.0.0",bt:"1d53c387",if:!1}}function yo(t){if(typeof Promise.allSettled=="function")return Promise.allSettled(t);let e=t.map(r=>Promise.resolve(r).then(o=>({status:"fulfilled",value:o}),o=>({status:"rejected",reason:o})));return Promise.all(e)}var zv="https://tr.snapchat.com/p";function nl(t,e){return y()?yo([Si(wi,{getItem:globalThis.browser?.cookie?.get,setItem:globalThis.browser?.cookie?.set},r=>{Pi(wi,r)}),Si(Ei,{getItem:pe,setItem:Re},r=>{Pi(Ei,r)}),Si(bi,{getItem:H,setItem:ue},r=>{Pi(bi,r)})]).finally(e):e()}function Jv(t,e,r){let o=ol(t,e);J(`${zv}`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Pe(o)},()=>{typeof r=="function"&&r(Br,`${f},${t.score}`)},()=>{a.error(`Unable to send scores to ${Br}.`)})}function Zv(t,e,r){let o=w(window,oc);if(typeof o=="function"){if(o("track",t.score),typeof r=="function"){let n=`${f}`,i=B([n,t.score]);r(Br,i)}}else throw new Error($)}function Kv(t,e,r){return y()?Jv(t,e,r):Zv(t,e,r)}var sn={name:Br,identify:nl,setup:nl,send:X(Br,Kv)};var nc="taboola";function Yv(t,e,r){if(!t)return;window._tfa===void 0&&(window._tfa=[],a.error(new T(`${nc} globals not found`),{appName:e}));let o=`${f}`,n=t.integration_product,i=B([o,n,t.threshold_group_count,G(t.score)],"_");window._tfa.push({notify:"event",name:i}),typeof r=="function"&&r(nc,i)}var ic={name:nc,send:Yv};function Xv(){return"product"}async function ac(){try{let t={},e=await ye();return e&&(e=e.toLowerCase()),t.email=e,t}catch(t){return a.error(t),{}}}function xi(t,e){let r=B([`${f}_${t}`,e]),o=Xv();return{content_id:r,content_type:o}}async function il(t){try{let e={context:{page:{referrer:document.referrer,url:k()},pixel:{code:t},userAgent:ve()}},r={},o=await A("_ttp");o&&(r.anonymous_id=o);let n=await ac(),i=await Jn(n),c={...r,...i};return e.context.user=c,e}catch(e){a.error(e);return}}function sc(t,e,r,o){return il(t).then(n=>(n.event=e,n.properties=xi(o,r),n))}function al(t){return il(t).then(e=>(e.event="EnrichAM",e))}var cn="tiktok",Qv="https://analytics.tiktok.com/api/v2/pixel";function e_(t){let e=window.ttq;return e&&e.instances()&&Array.isArray(e.instances())?!!e.instances().find(r=>t===r.pixelCode&&r.loaded):!1}function cc(){return M("tiktokAccounts")||[]}function t_(t,e){y()||cc().forEach(o=>{let n=o.pixelId;n&&!e_(n)&&function(i,c,s){i.TiktokAnalyticsObject=s;var u=i[s]=i[s]||[];u.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],u.setAndDefer=function(g,b){g[b]=function(){g.push([b].concat(Array.prototype.slice.call(arguments,0)))}};for(var m=0;m<u.methods.length;m++)u.setAndDefer(u,u.methods[m]);u.instance=function(g){for(var b=u._i[g]||[],V=0;V<u.methods.length;V++)u.setAndDefer(b,u.methods[V]);return b},u.load=function(g,b){var V="https://analytics.tiktok.com/i18n/pixel/events.js";u._i=u._i||{},u._i[g]=[],u._i[g]._u=V,u._t=u._t||{},u._t[g]=+new Date,u._o=u._o||{},u._o[g]=b||{},b=document.createElement("script"),b.type="text/javascript",b.async=!0,b.src=V+"?sdkid="+g+"&lib="+s,g=document.getElementsByTagName("script")[0],g.parentNode.insertBefore(b,g)},u.load(n),u.page()}(window,document,"ttq")}),e()}function uc(){a.error(new Error(`${cn} api call failed`))}async function sl(t,e){try{let r=await ye(),o=await br();if(r||o){let n=t.pixelId,i=w(window,"ttq.instance");typeof i=="function"&&typeof i(n).identify=="function"&&(i(n).identify({email:r,phone_number:o}),e&&typeof e=="function"&&e())}}catch(r){a.error(r)}}function fc(t,e,r){J(Qv,{body:JSON.stringify(t),method:"POST"},e,r)}async function cl(t,e){try{let r=t.pixelId;if(r&&(await ac()).email){let n=await al(r);fc(n,e,uc)}}catch(r){a.error(r)}}function r_(t,e){let r=y();function o(i,c){return()=>{let u=(Ye(`${t}.integrations`)||[]).find(m=>cn===m.platform);u&&u.scores&&u.scores.forEach(({score:m,integration_product:g})=>{r?sc(c,m,g,t).then(b=>{fc(b,e,uc)}):i(c).track(m,xi(t,g))}),r||e&&typeof e=="function"&&e()}}cc().forEach(i=>{let c=i.pixelId,s=w(window,"ttq.instance"),u=o(s,c);r?cl(i,u):sl(i,u)})}function ul(t,e){return function(){if(typeof t=="function"){let o=`${f}`,n=B([o,e.score]);t(cn,n)}}}function o_(t,e,r,o){let n=t.pixelId,i=w(window,"ttq.instance");if(n&&typeof i=="function")sl(t),e.score&&i(n).track(e.score,xi(r,e.integration_product)),ul(o,e)();else throw new Error($)}function n_(t,e,r,o){let n=t.pixelId;if(n)cl(t).then(()=>{let i=e.score,c=e.integration_product;i&&(o=typeof o=="function"?ul(o,e):void 0,sc(n,i,c,r).then(s=>{fc(s,o,uc)}))});else throw new Error($)}function i_(t,e,r){cc().forEach(n=>{y()?n_(n,t,e,r):o_(n,t,e,r)})}var un={name:cn,identify:r_,setup:t_,send:X(cn,i_)};function dc({src:t,alt:e}){let r=document.createElement("img");return r.width=1,r.height=1,r.alt=e||"",r.src=t,r}var Ti="tradedesk";function a_(t,e,r){let n=z(e,Ti).pixel_id,i=G(t.score)-1,c=t.comparison_type,s=t.conversion_product,u=t.threshold_group_count;n&&!y()&&ee(()=>{if(dc({src:`https://insight.adsrvr.org/track/pxl/?${n}&fmt=3&td1=blackcrow&td2=comparison_type|${c}&td3=comparison_product|${s}&td4=threshold_group_count|${u}&td5=score|${i}`}),typeof r=="function"){let m=`${f}`,g=B([m,t.score]);r(Ti,g)}else throw new Error($)})}var lc={name:Ti,send:X(Ti,a_)};var cr="target";var Ai={[Bs.name]:Bs,[Zt.name]:Zt,[Ws.name]:Ws,[qs.name]:qs,[js.name]:js,[zs.name]:zs,[Js.name]:Js,[Ks.name]:Ks,[Xs.name]:Xs,[ec.name]:ec,[sn.name]:sn,[ic.name]:ic,[un.name]:un,[lc.name]:lc};function s_(t,e,r="score_push"){It(cr,t,r),ie(`${cr} ${r}: ${t}`,e)}function c_(t,e){e&&S(e,r=>{r.name&&Ai[t].send(r,cr,s_)})}function u_(){let t=Gn(cr),e={};return t.forEach(r=>{let o=Ai[r];o!==void 0&&typeof o.setup=="function"?e[r]=new Promise(n=>o.setup(cr,n)).catch(n=>{a.error(n)}):e[r]=Promise.resolve()}),e}function f_(t){let e=Ye(`${cr}.integrations`),r=[];return S(e,o=>{let n=o.platform,i=o.scores,c=Ai[n];t[n]&&r.push(t[n].then(()=>{c!==void 0&&typeof c.send=="function"&&c_(n,i)}))}),Promise.all(r)}var fl={appName:cr,init:u_,platforms:Ai,sendAppScores:f_};var ur="identity";var d_=te({name:"identity_kpi_sampling",allocations:[{percent:.1,value:!0}]});function dl(t,e,r){d_&&le(`${t} platform request for ${e}`,{"platform.name":e,"event.name":r,appName:t})}function pc(){return{fb:window?.trekkie?.config?.S2S?.facebookCapiEnabled}}var vo=/.*\/cart\/{1,2}add(\.js|\.json)?(\?.*)?$/gm;function l_(t,e){return new Promise((r,o)=>{J(t,e,r,o)}).catch(r=>a.error(r))}var ll=/.*(\/cart(\.json|\.js)|\/cart\/(change|update)(\.js|\.json)?)(\?.*)?$/gm,ki="_bcai_cs",pl=!1;function Ii(t){try{Re(ki,t)}catch(e){a.error(e)}}async function hl(){try{return await pe(ki)}catch(t){a.error(t);return}}function p_(){return window?.Shopify?.routes?.root?l_(`${window.Shopify.routes.root}cart.js`):Promise.resolve()}function ml(t){try{return JSON.parse(t)}catch(e){return a.error(new Mt(e?.message)),null}}async function gl(t){try{let e=[t];t.items?.length&&(e=t.items);let r=e.reduce((c,s)=>{let u={...c};return s?.id!==void 0&&(u[s.id]=s),u},{}),o=await hl();if(!o||!t||Object.keys(r).length===0)return;let n=(o.items??[]).map(c=>{let s={...c},u=r[s?.id];return s.quantityAdded=0,u&&(s.quantityAdded=u.quantity-s.quantity,s.quantity=u.quantity,delete r[s.id]),s});Object.keys(r).forEach(c=>{let s=r[c];n.push({...s,quantityAdded:s.quantity})});let i={...o,item_count:n.reduce((c,s)=>c+(s.quantity??0),0),total_price:(o.total_price??0)+n.reduce((c,s)=>c+s.quantityAdded*(s.price??0),0)};i.items=n.map(c=>(delete c.quantityAdded,c)),Ii(i)}catch(e){a.error(e)}}function m_(){y()||pl||(pl=!0,Yo(ll,t=>{try{t=ml(t),t&&Ii(t)}catch(e){a.error(e)}}),Xo(ll,t=>{t.json().then(e=>Ii(e),e=>{a.error(new Mt(e?.message))}).catch(e=>a.error(e))}),Yo(vo,t=>{try{return t=ml(t),t?gl(t):void 0}catch(e){a.error(e);return}}),Xo(vo,t=>t.json().then(gl).catch(e=>a.error(e))))}function g_(){return y()?Promise.resolve():hl().then(t=>t||p_().then(e=>(e&&Ii(e),e)))}var fn={setup:m_,getData:g_};async function _o(t,e,r,o){try{let n=await Q(e),i={site_name:d,metadata:Wn(),device_info:ve(),page_url:k(),page_referrer_url:xe(),page_title:Gr(),platform_name:t,platform_event_name:r,ids:n,user_data:{fbc:await A(qt),fbp:await A(pt),bcvid:(await Ze())?.id,sh:{ct:await A("cart")||(await pe(ki))?.token,ch:pf()}},resolved_score:await H(Co),capi:pc()},c={fb_test_event_code:await A("fb_test_event_code")};bf(E(i,o,c)),dl(ur,t,r)}catch(n){a.error(n)}}var yl="klaviyo",Ci;function h_(t){return t==="track"}function y_(t){return t.overrideSampling=!0,t.message=`identity: ${t.message}`,t}function v_(t){return e=>{e.message===`identity: ${$}`?a.error(new T(t)):a.error(e)}}function mc(t,e){h_(e[0])&&_o(yl,t,e[1],{data:e[2]})}function __(t){Array.isArray(window._learnq)&&window._learnq.forEach(e=>{mc(t,e)})}function w_(t){if(typeof window._learnq.push=="function"){let e=window._learnq.push;window._learnq.push=function(...r){let o=e.apply(this,r);try{let n=r[0];return mc(t,n),o}catch(n){return a.error(n),o}}}}function E_(t){function e(){let r=Ci.apply(this,arguments);try{let o=arguments?Array.prototype.slice.call(arguments[0]):[];return mc(t,o),r}catch(o){return a.error(o),r}}window._learnq.push&&typeof Ci!="function"&&(Ci||(Ci=window._learnq.push),window._learnq.push=e)}function b_(t,e){window._learnq=window._learnq||[],!y()&&(window._learnq?._loaded||(__(e),w_(e)),L(()=>{if(window._learnq?._loaded){E_(e);return}throw y_(new Error($))},v_("Klaviyo platform load not detected."),500,10))}var gc={name:yl,setup:b_};var vl="google_ads";async function S_(t,e){try{await gi(t,vl,e,!1)}catch(r){a.error(r)}}var hc={name:vl,setup:S_};var _l="google_analytics";async function P_(t,e){try{await gi(t,_l,e,!0)}catch(r){a.error(r)}}var yc={name:_l,setup:P_};var ln="facebook_ads";function x_(t){return t==="track"}function wl(t,e,r,o,n){x_(e)&&_o(ln,t,r,{data:o,platform_event_id:n?.eventID})}var dn=[];function T_(t=[]){dn=dn.concat(t.filter(e=>!dn.includes(e)))}function A_(){return dn}function I_(){dn=[]}function k_(t,e){if(!window.fbq?.alreadyIntercepted)if(typeof window.fbq?.getState=="function"){let r=window.fbq;window.fbq=(...o)=>{wl(e,...o),r(...o)},Object.keys(r).forEach(o=>{Object.defineProperty(window.fbq,o,{set:n=>{r[o]=n},get:()=>r[o]})}),window.fbq.alreadyIntercepted=!0,A_()?.forEach(([...o])=>{wl(e,...o)}),I_()}else throw new Error(`${ln} pixel not yet loaded for ${t}.`)}async function C_(t,e){try{let r=[];if(e?.length){let o=await Wo(t);e.forEach(n=>{let i=n?.loadPixel===!0,c=n?.pixelId,s=r.includes(c);i&&c&&!s&&o&&(r.push(c),Yn(c,o))})}}catch(r){a.error(r)}}async function O_(t,e){try{if(y())return;let r=wr(t).platforms?.filter(o=>o.platform?.toLowerCase()===ln);await C_(e,r),await new Promise((o,n)=>{L(()=>{T_(window.fbq?.queue),k_(t,e),o()},()=>{a.error(new T(`${ln} pixel not present for ${t}.`)),n()},300)})}catch(r){a.error(r)}}var vc={name:ln,setup:O_};function N_(){return new Promise((t,e)=>L(()=>{if(window.Shopify.checkout)return t(window.Shopify.checkout);throw new T("Shopify checkout object missing")},r=>{a.error(r),e(r)},100))}function R_(){if(!window.Shopify)throw new T("Shopify global missing")}function L_(t){L(()=>{R_(),t()},r=>a.error(r),300,300)}var Ur={setup:L_,getShopifyCheckout:N_};var _c="AddPaymentInfo";function D_(t,e){return t.target.matches(`${["#continue_button",...e].filter(r=>!!r).join(",")}`)}function El(){return Ce()?.replace(/\/$/,"").split("/").pop()}function F_(t,e){xa()&&t(_c,{data:Fn(),platform_event_id:El()}),Ur.setup(()=>{Dn()==="payment"&&_.addListener(document,"click",r=>{D_(r,e?.additionalSelectors??[])&&fn.getData().then(o=>{o=o||{};let n=JSON.parse(JSON.stringify(o)),i=Ln();i&&(n.total_price=i),t(_c,{data:o,platform_event_id:El()})})},!0)})}var bl={eventName:_c,setup:F_};async function M_(){let t=await fetch(`${Ro()}cart.js`);if(!t.ok)throw new Error(`Failed to fetch cart: ${t.statusText}`);return await t.json()}var wc=class extends Error{constructor(){super("Root route not available"),this.status="warn"}},pn=class{static async fromAPI(){try{await ht(()=>{if(!Ro())throw new wc});let e=await ht(M_,2);return new pn(e)}catch(e){throw e.status="warn",e}}constructor(e){this.cart=e}getEventDataForItem(e){let r=this.cart?.items?.find(o=>o?.id===e);return r&&(r={...r},delete r.sections,r.currency=Hr(),r.total_item_count=this.cart?.item_count,r.total_price=this.cart?.total_price),r}},Oi=pn;var wo="AddToCart";function $_(t){return typeof t=="number"&&t>=0}var Ec=class{constructor(e){this.sendEvent=e}async sendAddToCartEvents(e){try{let r=e?.items||[e];r=r.filter(n=>n?.id&&$_(n?.quantity)?!0:(a.error(new Mt(`SHOPIFY ${wo} addToCart request did not return valid item: ${JSON.stringify(n)}`)),!1));let o=await Oi.fromAPI();r.forEach(n=>{let i=o.getEventDataForItem(n.id);if(!i){a.error(new Mt("SHOPIFY updated cart did not contain the item that was added to the cart"));return}this.sendEvent(wo,{data:i})})}catch(r){a.error(r)}}interceptXhr(){Yo(vo,e=>{let r=JSON.parse(e);this.sendAddToCartEvents(r)})}interceptFetch(){Xo(vo,e=>{e.json().then(r=>{this.sendAddToCartEvents(r)})})}},Sl=Ec;var bc=class{constructor(e){this.sendEvent=e}async logATCOnCartPage(){if(Fu())try{let e=await Oi.fromAPI();if(!e?.cart?.items?.length)return;let r=e.cart.items[0],o=e.getEventDataForItem(r.id);this.sendEvent(wo,{data:o})}catch(e){a.error(e)}}},Pl=bc;var B_={eventName:wo,setup(t,e={}){y()||(this._interceptor||(this._interceptor=new Sl(t),this._interceptor.interceptXhr(),this._interceptor.interceptFetch()),e.logATCOnCartPage&&!this.cartPageLogger&&(this.cartPageLogger=new Pl(t),this.cartPageLogger.logATCOnCartPage()))},cleanup(){delete this._interceptor,delete this.cartPageLogger}},xl=B_;var Tl="CompleteRegistration";function U_(t){try{return t.target.matches('form:has(input[type="email"])')}catch(e){if(e?.message.includes("is not a valid selector"))return new RegExp(/<input.*type="email".*>/).test(t.target.innerHTML)}return!1}function V_(t){y()||_.addListener(document,"submit",e=>{U_(e)&&t(Tl)},!0)}var Al={eventName:Tl,setup:V_};var W_=["button#checkout[type=submit]","button#checkout[type=submit] *","button[name=checkout]","button[name=checkout] *","input[id*=checkout][type=submit]","input[id*=checkout][type=submit] *",'[href*="/checkout"]','[href*="/checkout"] *',"button.rebuy-cart__checkout-button","button.rebuy-cart__checkout-button *","i.rebuy-button-icon","i.rebuy-button-icon *",'form[action="/cart"] [name="checkout"]','form[action="/cart"] [name="checkout"] *','form[action="/cart"] button[type="submit"]','form[action="/cart"] button[type="submit"] *','form[action="/checkout"] button','form[action="/checkout"] button *',"button.rebuy-cart__flyout-checkout-button","button.rebuy-cart__flyout-checkout-button *",".cart-drawer__action button",".cart-drawer__action button *",'button[class*="checkout"]','button[class*="checkout"] *','button[id*="checkout"]','button[id*="checkout"] *','a[class*="checkout"]','a[class*="checkout"] *','a[id*="checkout"]','a[id*="checkout"] *','a[name="checkout"]','a[name="checkout"] *',".checkout-btn",".checkout-btn *","button#simpl_buynow-button","button#simpl_buynow-button *",".c-button.rebuy-button",".c-button.rebuy-button *"],q_=["#dynamic-checkout-cart button","#dynamic-checkout-cart button *","#dynamic-checkout-cart [role=button]","#dynamic-checkout-cart [role=button] *",".additional-checkout-buttons button",".additional-checkout-buttons button *",".additional-checkout-buttons [role=button]",".additional-checkout-buttons [role=button] *"];function G_(t,e){return t.target.matches(`${[...W_,...q_,...e].filter(r=>!!r).join(",")}`)}function j_(t,e,r){if(G_(t,e?.additionalSelectors??[])&&t.isTrusted){let o=t.target.parentNode?.form;(!o||o.checkValidity())&&r()}}function H_(t,e){return new Promise(r=>{ee(()=>{["click",...e?.additionalListeners?.length?e.additionalListeners:[]].forEach(o=>_.addListener(document,o,n=>j_(n,e,t),!0)),r()})}).catch(r=>a.error(r))}var Il={setup:H_};function Sc(t){let e=new Error(t);return e.name="BadRenderError",e.status="warn",e.stack=oe(e.stack,1),e}var z_=new Promise(t=>{ee(t)}),J_="div.paypal-checkout-sandbox";function Z_(t){return new MutationObserver(e=>{e.forEach(r=>{r.addedNodes.forEach(o=>{o instanceof Element&&o.matches(J_)&&t()})})})}async function K_(t){try{if(y())return;await z_;let e=Z_(t);L(()=>{if(!(document.body instanceof Node))throw new Error;e.observe(document.body,{childList:!0})},()=>{a.error(new Sc(`document.body did not render in time and had value: ${document.body}`))})}catch(e){a.error(e)}}var kl={setup:K_};async function Y_(t){try{let e=t.filter(o=>o.status==="fulfilled").map(o=>o.value.json());return(await yo(e)).filter(o=>o.status==="fulfilled"&&o.value.product).map(o=>o.value)}catch(e){let r=new Error(`Error occurred while parsing json from promise results. Error: ${e.message}`);return r.status="warn",a.error(r),Promise.resolve([])}}async function X_({items:t}){try{let e=t.filter(o=>o.url).map(o=>{let n=new URL(`https://${Ao()}${o.url}`);return n.pathname+=".json",ii(n.href)}),r=await yo(e);return await Y_(r)}catch(e){let r=new Error(`Error occurred while fetching product info with tags. Error: ${e.message}`);return r.status="warn",a.error(r),Promise.resolve([])}}function Q_(t,e){let r={...t},{items:o}=r;return e.forEach(n=>{let i=o.find(c=>c.product_id&&n.product?.id&&c.product_id===n.product.id);i&&n.product.tags&&(i.tags=n.product.tags)}),r}async function Cl(t){try{if(t?.items?.length>0){let e=await X_(t);return Q_(t,e)}}catch(e){let r=new Error(`Error occurred while including product tags. Sending event without tags. Error: ${e.message}`);r.status="warn",a.error(r)}return t}var Ol="InitiateCheckout";function ew(t,e){if(Mu())return Promise.resolve();fn.setup();let r=async()=>{try{let o=await fn.getData(),n=o;e?.loadProductTags===!0&&(n=await Cl(o)),t(Ol,{data:n})}catch(o){a.error(o)}};return Promise.all([Il.setup(r,e),kl.setup(r)])}var Nl={eventName:Ol,setup:ew};var Rl="PageView";function tw(t){(!y()||$u())&&t(Rl)}var Ll={eventName:Rl,setup:tw};var Fl="Purchase";function Dl(t){return["order_id","line_items","total_price_set.shop_money.currency_code","total_price_set.shop_money.amount"].every(e=>w(t,e)!==void 0)}function rw(t){if(window.cart_json){let{line_items:e,currency:r,total_price:o}=window.cart_json;return E({},t,{line_items:e,total_price_set:{shop_money:{currency_code:r,amount:o}}})}return t}function ow(t){function e(r){t(Fl,{data:{...r},platform_event_id:r.order_id||r?.order?.id})}Pa()?e(Fn()):W("platform",h.VIEW_RESPONSE,()=>{Ur.setup(()=>{M("page.log_purchase")&&Ur.getShopifyCheckout().then(r=>{if(Dl(r))return e(r);let o=rw(r);if(Dl(o))return e(o);throw new T("Shopify checkout required fields are missing")}).catch(r=>a.error(r))})})}var Ml={eventName:Fl,setup:ow};function $l(t,e){return E({},{content_ids:e?.map(r=>r?.product_id).filter(r=>r),currency:t?.currency,content_type:"product_group",num_items:e?.reduce((r,o)=>r+(o?.quantity?o.quantity:0),0)})}function Bl(t){let e=t?.lineItems||[];return{content_ids:e?.map(r=>r?.variant?.product?.id).filter(r=>r),content_type:"product_group",num_items:e?.reduce((r,o)=>r+(o?.quantity?o.quantity:0),0),order_id:t?.order?.id,currency:t?.totalPrice?.currencyCode,value:t?.totalPrice?.amount,contents:e?.map(r=>({id:r?.variant?.product?.id,quantity:r?.quantity,item_price:r?.variant?.price?.amount,title:r?.title}))}}function nw(t){if(y())return Bl(t);let e=t?.line_items??[];return E($l(t,e),{order_id:t?.order_id,currency:t?.total_price_set?.shop_money?.currency_code,value:t?.total_price_set?.shop_money?.amount,contents:e?.map(r=>({id:r?.product_id,quantity:r?.quantity,item_price:r?.price,title:r?.title}))})}function Ul(t){function e(o){return E({},{id:o?.product_id,quantity:o.quantity,item_price:zt(o.price),title:o.product_title,description:o.product_description,category:o.product_type})}let r=t?.items??[];return E($l(t,r),{value:Ln()||zt(t?.total_price),contents:r?.map(o=>e(o))})}function iw(t){let e={};return t?.items?.length?e=JSON.parse(JSON.stringify(t?.items[0])):t&&(e=JSON.parse(JSON.stringify(t))),{content_category:e.product_type,content_ids:e.product_id?[e.product_id]:[],content_name:e.title,content_type:"product_group",currency:e.currency||Hr(),num_items:e.quantity||1,value:e.price?zt(e.price):void 0}}function aw(t){return{search_string:t?.search_string}}function sw(t){let e=y()?{...Bl(t)}:{...Ul(t)};return delete e?.num_items,e}function cw(t){return E({},{content_category:t?.type,content_ids:t?.id&&[t?.id],content_name:t?.title,content_type:"product_group",currency:t?.currency,value:zt(t?.price)})}var uw={addtocart:{eventName:"AddToCart",convert:iw},purchase:{eventName:"Purchase",convert:nw,isValid:t=>t?.total_price_set?.shop_money?.currency_code&&t?.total_price_set?.shop_money?.amount||t?.totalPrice?.currencyCode&&t?.totalPrice?.amount},addpaymentinfo:{eventName:"AddPaymentInfo",convert:sw},viewedproduct:{eventName:"ViewContent",convert:cw},pageview:{eventName:"PageView"},initiatecheckout:{eventName:"InitiateCheckout",convert:Ul},search:{eventName:"Search",convert:aw},completeregistration:{eventName:"CompleteRegistration"}};function Vl(t,{data:e}={}){let r=uw[t?.toLowerCase()];if(!r||r.isValid&&!r.isValid(e))return;let o=r.convert&&r.convert(e);return{eventName:r.eventName,data:o}}function Pc(t,e){return t.filter(r=>r.eventSource==="shopify"&&r.originalEventName===e)}var Tc="facebook_ads",Wl=[],mn,gn,xc;function fw(t,e,r){if(xc=r.includes("facebook_ads"),y()){mn=!1;return}async function o(){try{let n=jo(e,Tc);gn=await Wo(t),n.forEach(i=>{let c=i?.loadPixel===!0,s=i?.pixelId,u=Wl.includes(s);c&&s&&!u&&gn&&(Wl.push(s),Yn(s,gn))})}catch(n){a.error(n)}}xc?L(()=>{let n=window?.trekkie?.config?.S2S?.facebookCapiEnabled;if(typeof n=="boolean")n?mn=!1:(mn=!0,o());else throw new Error("Trekkie facebookCapiEnabled not loaded.")},()=>a.error(new T("Trekkie not loaded")),100):(mn=!0,o())}async function dw(t){try{if(y()){if(gn=await Wo(t),!xc)return!0;let e=await H(kn);if(typeof e=="boolean"&&!e)return!0}}catch(e){a.error(e)}return!1}async function lw(t,e,r,o="identity"){let n=await dw(r);if(mn||n){let i=Vl(t,e),c=gn?.external_id;jo(o,Tc).forEach(s=>{let u=Pc(s?.eventTrackers||[],t);function m(g,b){return g&&b&&i&&s.pixelId}u.forEach(g=>{let b=g?.overrideEventName||g?.originalEventName;m(g,b)&&(y()?Zn(s.pixelId,e?.platform_event_id,c,b,i?.data):L(()=>{if(typeof window.fbq=="function")window.fbq("trackSingle",s.pixelId,b,i?.data,{eventID:e?.platform_event_id});else throw new Error("FBQ not loaded")},()=>a.error(new T("FBQ not loaded")),100))})})}}var Ac={name:Tc,setup:fw,sendEvent:lw};var ql={[Ac.name]:Ac},Gl,jl,Ni,Ic;function pw(t,e,r,{browserEventPlatforms:o,validatePlatforms:n}={}){Gl=t,jl=e,Ni=r,Ic=o??[],n=n??[],Ic.forEach(i=>{ql[i]?.setup(Ni,e,n)})}function mw(t,e={},{browserEventPlatforms:r}={}){let o=r??Ic;e.platform_event_id||(e.platform_event_id=Uo()),_o(Gl,Ni,t,e),o.forEach(n=>{ql[n]?.sendEvent(t,e,Ni,jl)})}var rt={setup:pw,sendEvent:mw};function Hl(){let t=He(window.location.search).variant,e=t?t.split("?")[0]:null;if(e)return parseInt(e,10);let r=[...document.querySelectorAll('input[name="id"]')];if(r.length===1)return parseInt(r,10);let o=window.ShopifyAnalytics?.meta;if(o?.product?.id){let n=[...document.querySelectorAll(`input[name="id"][data-productid="${o?.product?.id}"]`)];if(n.length===1&&n[0]?.value)return parseInt(n[0].value,10)}if(o?.product?.variants&&o?.selectedVariantId){let n=parseInt(o?.selectedVariantId,10),i=o?.product?.variants.filter(s=>s.id===n);if(window.ReCharge&&window.ga&&document.querySelector('[name="properties[shipping_interval_frequency]"]')?.value){let s=window.ReCharge.products.filter(u=>typeof u.variant_to_duplicate[`${n}`]=="string");if(s.length===1)return s[0].variant_to_duplicate[`${n}`]}if(i.length)return n}return null}var zl="ViewedProduct";function Jl(t,e){let r=JSON.parse(JSON.stringify(t));if(r.variants&&r.variants.length){let n=r?.variant_id??Hl()??r.variants[0].id,i=r.variants.find(c=>c.id===n)??r.variants[0];i.name&&(r.title=i.name),r.variants=[i]}r.featured_image?.startsWith("//")&&(r.featured_image=`https:${r.featured_image}`),delete r.description,delete r.media;let o=Hr();o&&(r.currency=o),e(zl,{data:r})}function gw(t){Ur.setup(()=>{if(Ea()){let e=`${Ce()}.js${window.location.search}`;Be(e,{},r=>Jl(r,t))}})}var Zl={eventName:zl,setup:gw,sendProductDataToPlatform:Jl};async function hw(t,e){try{if(await H(ia))return;(e?.validatePlatforms||[]).includes("facebook_ads")&&L(()=>{let n=window?.trekkie?.config?.S2S?.facebookCapiEnabled;if(typeof n=="boolean")t(n?"FB_CAPI_ENABLED":"FB_CAPI_DISABLED"),ue(ia,!0),ue(kn,n);else throw new Error("Trekkie facebookCapiEnabled not loaded.")},()=>a.error(new T("Trekkie not loaded")),100)}catch(r){a.error(r)}}var Kl={setup:hw};var Yl="Search";function yw(t){if(Du()){let e=k(),r={search_string:He(e)?.q};t(Yl,{data:r})}}var Xl={eventName:Yl,setup:yw};var Ql="ActiveOnSite";async function vw(t){try{if(await H(aa))return;t(Ql),ue(aa,!0)}catch(e){a.error(e)}}var ep={eventName:Ql,setup:vw};var kc="shopify";function _w(t){let e=wr(t),[r]=e?.platforms?.filter(o=>o?.platform===kc.toUpperCase());return r}function ww(t,e){let r=_w(t),o=r?.eventTriggerSettings;rt.setup(kc,t,e,r),Kl.setup(rt.sendEvent,r),bl.setup(rt.sendEvent,o?.AddPaymentInfo),Al.setup(rt.sendEvent,o?.CompleteRegistration),xl.setup(rt.sendEvent,o?.AddToCart),Nl.setup(rt.sendEvent,o?.InitiateCheckout),Ll.setup(rt.sendEvent,o?.PageView),Xl.setup(rt.sendEvent,o?.Search),Ml.setup(rt.sendEvent,o?.Purchase),Zl.setup(rt.sendEvent,o?.ViewedProduct),ep.setup(rt.sendEvent,o?.ActiveOnSite)}var Cc={name:kc,setup:ww};var Ew="shopify_webhook";async function bw(t,e){try{if(y())return;let r={method:"POST",body:JSON.stringify({attributes:{_bcai:btoa(JSON.stringify({site_name:d,ids:await Q(e),user_data:{fbp:await A(pt),fbc:await A(qt),bcvid:(await Ze())?.id}})),_bcai_aid:await A("_shopify_y")}}),mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}};L(()=>{let o=Ro();if(!o)throw Error("Shopify Root Route Not Found");Be(`${o}cart/update.js`,r)},()=>a.error(new Ne("Cart update failed","ShopifyCart",!1,"warn")))}catch(r){a.error(r)}}var Oc={name:Ew,setup:bw};function Sw(){let t="https://api.blackcrow.ai/user/?";return xt(d)&&(t="https://api.sandbox.blackcrow.ai/user/?"),t}function Pw(t={}){return{site_name:d,ids:t}}function Nc(t){Se(ur,h.IDENTIFY,E({},t),{})}function xw(t){ue(qr,t),Nc(t)}function Fe(t=[]){let e=Pw(t),o={servlet:"user",method:"POST",cache:"no-cache",body:JSON.stringify(e)};Be(Sw(),o,xw,n=>{a.error(n)})}function Tw(t){async function e(r){try{let o=await Q(t),n=Ke("e",yr(r));o.length&&n.length&&Fe(o.concat(n))}catch(o){a.error(o)}}rf(e)}var Rc={name:"email",setup:Tw};function Aw(t){async function e(r){try{let o=await Q(t),n=Ke("p",Er(r));o.length&&n.length&&Fe(o.concat(n))}catch(o){a.error(o)}}Hf(e)}var Lc={name:"phone",setup:Aw};async function hn(t,e){try{return await H(t)===e?!0:(ue(t,e),!1)}catch(r){return a.error(r),!1}}var Iw="_kx";async function kw(t){try{let o=function(c){let s=Ke("klx",c);r.length&&s.length&&Fe(r.concat(s))};var e=o;let r=await Q(t),n=await zr();o(ae(Iw)),await hn("_bcai_s_keid",n)||o(n)}catch(r){a.error(r)}}var Dc={name:"klaviyo",setup:kw};async function Cw(t){try{let i=function(){let b=ae(_u);return b?.trim().length>0?`fb.1.${Date.now()}.${b}`:n},s=function(b){let V=Object.entries(b).reduce((de,[Ut,Vt])=>de.concat(Ke(Ut,Vt)),[]);c.length&&V.length&&Fe(c.concat(V))};var e=i,r=s;let o=await A(pt),n=await A(qt),c=await Q(t),u=i(),[m,g]=[await hn("_bcai_s_fbc",u),await hn("_bcai_s_fbp",o)];s({...!m&&{fbc:u},...!g&&{fbp:o}})}catch(o){a.error(o)}}var Fc={name:"facebook_ads",setup:Cw};async function Ow(t){try{let e=await Q(t),r=Yf();r&&e.length&&r.forEach(o=>{let n=[];n=n.concat(Ke("fn",zn(o.fn))),n=n.concat(Ke("ln",zn(o.ln))),n=n.concat(Ke("fln",zn(o.fln))),n.length&&Fe(e.concat(n))},[])}catch(e){a.error(e)}}var Mc={name:"name",setup:Ow};async function Nw(t){try{let e=await Ie(()=>[...document.querySelectorAll("iframe[srcdoc]")].find(u=>u.srcdoc?.includes("sendlane.com")),12e4);if(!e)return;let o=(await new Promise(s=>e.contentDocument?.addEventListener("submit",s,{once:!0,capture:!0}))).target;if(!o||o.constructor.name!=="HTMLFormElement")throw new Error("Sendlane form is not an HTMLFormElement");let n=await Q(t),i=o.querySelector('input[type="email"]');i&&(n=n.concat([{name:"e",value:yr(i.value)}]));let c=o.querySelector('input[type="tel"]');c&&(n=n.concat([{name:"p",value:Er(c.value)}])),Fe(n)}catch(e){a.error(e)}}var $c={name:"sendlane",setup:Nw};async function tp(t=[]){try{let e=await H(qr);if(e)Nc(e);else{let r=await Q(t);r.length&&Fe(r)}}catch(e){a.error(e)}}var Rw={[gc.name]:gc,[vc.name]:vc,[Cc.name]:Cc,[Oc.name]:Oc,[hc.name]:hc,[yc.name]:yc},Lw={[Rc.name]:Rc,[Lc.name]:Lc,[Dc.name]:Dc,[Fc.name]:Fc,[Mc.name]:Mc,[$c.name]:$c};function Dw(t,e){e.forEach(r=>{let o=Lw[r];o&&typeof o.setup=="function"&&o.setup(t)})}function Bc(t,e){t.length!==0&&e&&e.forEach(r=>{let o=Rw[r];o&&typeof o.setup=="function"&&o.setup(ur,t)})}function Fw(t){return t.filter(e=>e.source==="cookie"&&e.cookieLoadUrl)}async function Mw(t){try{for(let e=0;e<t.length;e+=1)await A(t[e].value)||await Ko(Be,t[e].cookieLoadUrl,{mode:"no-cors",credentials:"include"})}catch(e){a.error(e)}}async function $w(){try{let c=function(s){W("platform",h.VIEW_RESPONSE,()=>{let u=Xr(e?.scoreName);ue(Co,u),s&&s(o,i)})};var t=c;let e=wr(ur),r=e.userAttributes||[],o=e.userIdentifiers||[],n=Fw(o),i=new Set((e.platforms||[]).map(s=>s?.platform?.toLowerCase()).filter(s=>s));n.length&&await Mw(n),ee(()=>{Dw(o,r)}),tp(o),e?.scoreName?await H(Co)?(Bc(o,i),c()):c(Bc):Bc(o,i)}catch(e){a.error(e)}}function Bw(){return $w(),{}}var rp={appName:ur,init:Bw};var Uw=C.object({name:C.string().optional(),percent:C.number().min(0).max(1).default(1),enabled:C.boolean().default(!0),platforms:C.object({googleAnalytics:C.object({variantName:C.string().regex(/^\S+-\S+-\S+$/)}).optional()}).optional()}),Vw=C.object({experimentBuckets:C.array(Uw)}),Eo=class{constructor(e){this.config=e}static fromAppSettings(){let e=Ue("site_speed")?.appSetting?.siteSpeed||{},r=Vw.parse(e);return new Eo(r)}get settingsBucket(){let e=this.config.experimentBuckets.map(r=>({name:r.name,percent:r.percent,value:r}));return te({name:"site_speed_enabled",allocations:e})}get enabled(){return this.settingsBucket.enabled}get googleAnalyticsVariantName(){return this.settingsBucket.platforms?.googleAnalytics?.variantName}get bucketName(){return this.settingsBucket.name}};var Ri="bcai-speed-override";function op(){localStorage.setItem(Ri,"force_disabled")}function np(){localStorage.setItem(Ri,"force_enabled")}function ip(){localStorage.removeItem(Ri)}function Uc(){return localStorage.getItem(Ri)}async function Vc(){try{let t=await navigator?.serviceWorker?.getRegistration();t&&(t.active&&t.active.postMessage({message:"clear cache"}),await t.unregister())}catch(t){a.error(t)}}var fr,vn,dp,Li;var lp=-1,qc=function(t){addEventListener("pageshow",function(e){e.persisted&&(lp=e.timeStamp,t(e))},!0)},pp=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},mp=function(){var t=pp();return t&&t.activationStart||0},Di=function(t,e){var r=pp(),o="navigate";return lp>=0?o="back-forward-cache":r&&(document.prerendering||mp()>0?o="prerender":document.wasDiscarded?o="restore":r.type&&(o=r.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:o}},gp=function(t,e,r){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var o=new PerformanceObserver(function(n){Promise.resolve().then(function(){e(n.getEntries())})});return o.observe(Object.assign({type:t,buffered:!0},r||{})),o}}catch{}},Fi=function(t,e,r,o){var n,i;return function(c){e.value>=0&&(c||o)&&((i=e.value-(n||0))||n===void 0)&&(n=e.value,e.delta=i,e.rating=function(s,u){return s>u[1]?"poor":s>u[0]?"needs-improvement":"good"}(e.value,r),t(e))}},Ww=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},hp=function(t){var e=function(r){r.type!=="pagehide"&&document.visibilityState!=="hidden"||t(r)};addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0)},yp=function(t){var e=!1;return function(r){e||(t(r),e=!0)}},bo=-1,ap=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Mi=function(t){document.visibilityState==="hidden"&&bo>-1&&(bo=t.type==="visibilitychange"?t.timeStamp:0,qw())},sp=function(){addEventListener("visibilitychange",Mi,!0),addEventListener("prerenderingchange",Mi,!0)},qw=function(){removeEventListener("visibilitychange",Mi,!0),removeEventListener("prerenderingchange",Mi,!0)},vp=function(){return bo<0&&(bo=ap(),sp(),qc(function(){setTimeout(function(){bo=ap(),sp()},0)})),{get firstHiddenTime(){return bo}}},_p=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()};var yn={passive:!0,capture:!0},Gw=new Date,cp=function(t,e){fr||(fr=e,vn=t,dp=new Date,Ep(removeEventListener),wp())},wp=function(){if(vn>=0&&vn<dp-Gw){var t={entryType:"first-input",name:fr.type,target:fr.target,cancelable:fr.cancelable,startTime:fr.timeStamp,processingStart:fr.timeStamp+vn};Li.forEach(function(e){e(t)}),Li=[]}},jw=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;t.type=="pointerdown"?function(r,o){var n=function(){cp(r,o),c()},i=function(){c()},c=function(){removeEventListener("pointerup",n,yn),removeEventListener("pointercancel",i,yn)};addEventListener("pointerup",n,yn),addEventListener("pointercancel",i,yn)}(e,t):cp(e,t)}},Ep=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return t(e,jw,yn)})},up=[100,300],bp=function(t,e){e=e||{},_p(function(){var r,o=vp(),n=Di("FID"),i=function(u){u.startTime<o.firstHiddenTime&&(n.value=u.processingStart-u.startTime,n.entries.push(u),r(!0))},c=function(u){u.forEach(i)},s=gp("first-input",c);r=Fi(t,n,up,e.reportAllChanges),s&&hp(yp(function(){c(s.takeRecords()),s.disconnect()})),s&&qc(function(){var u;n=Di("FID"),r=Fi(t,n,up,e.reportAllChanges),Li=[],vn=-1,fr=null,Ep(addEventListener),u=i,Li.push(u),wp()})})};var Jj=1/0;var fp=[2500,4e3],Wc={},Sp=function(t,e){e=e||{},_p(function(){var r,o=vp(),n=Di("LCP"),i=function(u){var m=u[u.length-1];m&&m.startTime<o.firstHiddenTime&&(n.value=Math.max(m.startTime-mp(),0),n.entries=[m],r())},c=gp("largest-contentful-paint",i);if(c){r=Fi(t,n,fp,e.reportAllChanges);var s=yp(function(){Wc[n.id]||(i(c.takeRecords()),c.disconnect(),Wc[n.id]=!0,r(!0))});["keydown","click"].forEach(function(u){addEventListener(u,function(){return setTimeout(s,0)},!0)}),hp(s),qc(function(u){n=Di("LCP"),r=Fi(t,n,fp,e.reportAllChanges),Ww(function(){n.value=performance.now()-u.timeStamp,Wc[n.id]=!0,r(!0)})})}})};var Hw="site_speed";function zw(){return!!window?.navigator?.serviceWorker}async function Jw(){try{let o=function(){let n=Uc();return n==="force_enabled"?!0:n==="force_disabled"?!1:e.enabled};var t=o;if(y()||!zw())return;let e=Eo.fromAppSettings();re(j.SITE_SPEED_BUCKETING,{bucketing:{bucket_name:e.bucketName}});let r=ne("web_vitals_metrics");if(r.get("FID")||(bp(({name:n,navigationType:i,value:c,delta:s,rating:u})=>{re(j.SITE_SPEED_FID_METRIC,{web_vitals:{name:n,navigation_type:i,value:c,delta:s,rating:u},bucketing:{bucket_name:e.bucketName}})}),r.set("FID",!0)),r.get("LCP")||(Sp(({name:n,navigationType:i,value:c,delta:s,rating:u})=>{re(j.SITE_SPEED_LCP_METRIC,{web_vitals:{name:n,navigation_type:i,value:c,delta:s,rating:u},bucketing:{bucket_name:e.bucketName}})}),r.set("LCP",!0)),window.blackcrowSpeed={async forceEnable(){np(),location.reload()},async forceDisable(){op(),await Vc(),location.reload()},async reset(){ip(),location.reload()},get appStatus(){let n=e.enabled?"enabled":"disabled";return Uc()??n}},e.googleAnalyticsVariantName&&Pt("event","experience_impression",{exp_variant_string:e.googleAnalyticsVariantName,event_label:e.googleAnalyticsVariantName}),o()){let n=await navigator.serviceWorker.register("/sw.js",{scope:"/"}),i=n.installing??n.waiting??n.active;if(i){let{id:c}=await Ze(),s=te({name:"error_sampling",allocations:[{percent:.1,value:!0}]});i.postMessage({message:"config",data:{SITE_NAME:d,VISITOR_ID:c,SAMPLE_ERRORS:!!s}})}}else await Vc()}catch(e){a.error(e)}}var Pp={appName:Hw,init:Jw};var $i={audience:$f,measure:fd,pwo:Hd,target:fl,identity:rp,site_speed:Pp};var _n={};function Zw(t){let e=Ue(t.appName);if(typeof t.init=="function"&&e.active)return t.init();let r=Gn(t.appName),o={};return r.forEach(n=>{o[n]=Promise.resolve()}),o}function Kw(t,e){let r=Ue(t.appName);return typeof t.sendAppScores=="function"&&r.active?t.sendAppScores(e):Promise.resolve()}function xp(){S($i,(t,e)=>{Ue(e).active&&(_n[t.appName]=t)})}function Tp(){let t={};return S(_n,e=>{t[e.appName]=Zw(e)}),t}function Gc(t){if(xt(d))return Promise.resolve();let e=[];return S(_n,r=>{e.push(Kw(r,t[r.appName]))}),Promise.all(e)}function Ap(){S(_n,t=>{typeof t.cleanup=="function"&&t.cleanup()}),_n={}}function Bi(t){W("platform",h.VIEW_RESPONSE,e=>t(e))}function Ip(t,e){return No(t),Gc(e)}function Ui(t,e){No(t),sf(t.history_id),Pf(),cs(),vf(),Gc(e),Se("platform",h.VIEW_RESPONSE,t)}var Vi=`${f}_overrides`,kp=!1,Wi=null;function Yw(){Wi=null,ue(Vi,{})}async function Cp(t){try{let e=E({},Wi||await H(Vi),t);Wi=e,ue(Vi,e),kp&&console.log(`Your <${f}> settings will apply on the next page load. Please refresh the page.`)}catch(e){a.error(e)}}function Xw(){S($i,(t,e)=>{W("platform",`force_${e}`,()=>{Cp({apps:{[e]:{active:!0}}})})})}function Op(){W("platform",h.OVERRIDES,Cp),W("platform",h.CLEAR_OVERRIDES,Yw),Xw()}async function Np(){try{return kp=!0,Wi||await H(Vi)}catch(t){return a.error(t),{}}}function Rp(){return xp(),Tp()}var je={platforms:{attentive:{submitEvents:["EMAIL_LEAD"]},bounceExchange:{submitEvents:["input_submission","campaign_submit"]},justUno:{},klaviyo:{submitEvents:["submit"]},sleekNote:{submitEvents:["submit"]},wisePops:{submitEvents:["after-form-submit"]},generic:{}},platformIdentifiers:["kl-","klaviyo","attn","fieldcaptureform","sleeknote","justuno","bx","bounceexchange","wisepops"],platformIdentifierExceptions:["kmail"],metadataViolators:["phone","email","sentIdentifiers"],page_id:"EmailSubmit"};var{platformIdentifiers:Qw,platformIdentifierExceptions:eE,metadataViolators:tE}=je,Dp=(t,{qualified:e,resolveTarget:r})=>t?e(t)?r?t:!0:t.parentElement?Dp(t.parentElement,{qualified:e,resolveTarget:r}):!1:!1,rE=t=>t.style.position==="fixed"||t.style.top==="0"||t.style.top==="0px",oE=t=>t.nodeName.toLowerCase()==="iframe",nE={form:{qualified:t=>t.nodeName.toLowerCase()==="form",resolveTarget:!0},footer:{qualified:t=>t.nodeName.toLowerCase()==="footer",resolveTarget:!1},overlay:{qualified:t=>rE(t)||oE(t),resolveTarget:!1}},jc=(t,e)=>Dp(t,nE[e]),Fp=t=>jc(t,"form"),iE=t=>jc(t,"footer"),aE=t=>jc(t,"overlay"),sE=t=>{if(!t)return"unknown";try{if(aE(t))return"overlay";if(iE(t))return"footer";if(vr()==="checkout")return"checkout"}catch{a.error(new T("email location failed"))}return"unknown"},Mp=()=>{let t=vr()==="checkout",e=document.querySelector('input[type="checkbox"]');return t&&e&&!e.checked},cE=(t,e)=>t.some(r=>typeof r=="string"&&r.toLowerCase().includes(e)),Lp=(t,e)=>e.some(cE.bind(null,t)),$p=t=>{let e=[...Array.from(t.classList),t.action,t.id];return Lp(e,Qw)&&!Lp(e,eE)},uE=t=>{window._learnq=window._learnq||[],window._learnq.push(["identify",{$email:t}])},fE=(t,e)=>{let r={...t};return S(Object.keys(r),o=>{S(e,n=>{o.includes(n)&&(r[o]="redacted")})}),r},dE=t=>{a.push({trigger:h.VIEW,data:{page_id:je.page_id,custom_dimensions:t}})},Me=(t,e)=>{let r=t.email||t.$email,o=Ma(r);$a(o)&&(Z(o),uE(o),dE({...fE(t,tE),location:sE(e)}),dt.setPIISubmitCookie())};var Bp=["checkout","account","login"],lE=vr(),pE=Ce(),Up=t=>{if(Bp.includes(lE)||Bp.some(r=>pE.includes(r))||Mp())return;let e=t.value;e&&Me({email:e},document.activeElement)},mE=()=>{let t;S(Ba(),e=>{if(t=Fp(e),t){if($p(t))return;_.addListener(t,"submit",()=>{Up(e)})}else _.addListener(e,"focusout",()=>{Up(e)})})};function Hc(){ee(()=>{_.setTimeout(mE,5e3)})}var{submitEvents:gE}=je.platforms.attentive;function zc(){_.addListener(window,"message",t=>{let{origin:e,data:r,target:o}=t;if(e.includes(".attn.tv")){let{__attentive:n}=r;gE.includes(n?.action)&&Me(n,o.document.activeElement)}})}var hE=(t,e)=>{if(e.isWrapped)return e;function r(){try{t.apply(this,arguments)}catch{}return e.apply(this,arguments)}return r.isWrapped=!0,r},qi=(t,e)=>hE(t,typeof e=="function"?e:()=>{});var{submitEvents:yE}=je.platforms.bounceExchange;function Jc(){_.setTimeout(()=>{window.bouncex=window.bouncex||{},window.bouncex&&typeof window.bouncex.push=="function"&&(window.bouncex.push=qi((...t)=>{let{email:e,source:r}=t[0][1];yE.includes(r)&&Me({email:e})},window.bouncex.push))},8e3)}function Zc(){_.setTimeout(()=>{window.ju_callback=qi((t,e)=>{Me({email:e})},window.ju_callback)},5e3)}var{submitEvents:vE}=je.platforms.klaviyo;function Kc(){_.addListener(window,"klaviyoForms",t=>{let{detail:e,target:r}=t,{type:o,metaData:n}=e;vE.includes(o)&&Me(n,r.document.activeElement)})}var{submitEvents:_E}=je.platforms.sleekNote;function Yc(){_.addListener(window,"sleekNote",t=>{let{data:e,target:r}=t;_E.includes(e.type)&&Me(e.data,r.activeElement)})}var{submitEvents:wE}=je.platforms.wisePops;function Xc(){_.setTimeout(()=>{wE.forEach(t=>{window[window.WisePopsObject]&&typeof window[window.WisePopsObject]=="function"&&window[window.WisePopsObject]("listen",t,e=>{let{target:r}=e,o=r.querySelector('input[type="email"]')?.value;Me({email:o},r)})})},5e3)}var EE={attentive:zc,bounce_exchange:Jc,just_uno:Zc,klaviyo:Kc,sleek_note:Yc,wise_pops:Xc};function Qc(){let t=M("config.emailFormTracking"),e=t?.active||!1,r=t?.platforms||[];e&&e===!0&&(Hc(),r.map(o=>o.name).forEach(o=>{let n=EE[o];n&&n()}))}var Vp=!1;function bE(t){let e="cart/add",r=h.ADD_TO_CART;ai(e,()=>{a.push({trigger:r})}),er(e,()=>{a.push({trigger:r})},t)}function SE(t){_.addListener(window,"click",e=>{let r=w(e,"target.className");(e.target.getAttribute("name")==="checkout"||t&&typeof r=="string"&&r.match(t))&&a.push({trigger:"initiate_checkout"})})}function PE(t){let e=[];return t.items.forEach(r=>{e.push({sku:r.sku,id:r.id,quantity:r.quantity})}),t.items=e,t}function xE(t){return t.items&&(t=PE(t)),{cart_json:t}}function TE(t,e,r){Be("/cart.json",{servletName:"ShopifyCart"},o=>{let n={custom_dimensions:xE(o)};r?e(r,E({},t,n)):e(E({},t,n))})}function eu(t){Vp===!1&&(L(()=>{if(Oe()&&M("config.shopify.add_to_cart.active"))return bE(!0);throw new Error("Shopify globals not found")}),M("config.shopify.checkout.active")&&SE(M("config.shopify.checkout.class_name")),Vp=!0),Bi(()=>{Oe()&&M("config.shopify.add_to_cart.active")&&W("platform",h.ADD_TO_CART,e=>{TE(E({},e,{page_id:"AddToCart"}),t,void 0)}),W("platform",h.INITIATE_CHECKOUT,e=>t(E({},e,{page_id:"checkout"})))})}var Wp=[Qc,eu];var Gi="target",AE=[Zt,sn,un];function tu(){function t(r){let o="advanced_matching";It(Gi,r,o),ie(`${Gi} ${o}: ${r}`,"update")}function e(r){let o=z(Gi,r.name);!o||Object.keys(o).length===0||typeof r.identify=="function"&&r.identify(Gi,()=>t(r.name))}AE.forEach(r=>e(r))}function ru(){function t(){of(tu),zf(tu),Jf()}(M("config.visitor.set_info")||Kn())&&ee(t)}var qp=!0;function IE(t){Ap(),is(),la(),es(),No({}),ga({}),t&&Object.keys(t).length>0&&Nn(t)}async function ou(t={}){try{async function e(n){try{let u=function(m={}){es(),re(j.VIEW,m,g=>{Ip(g,s)})};var i=u;Op();let c=E(n,await Np());if(ga(c),Se("platform",h.START,{build:"15515"}),W("platform",h.REFRESH,r),w(c,"page.ignored"))return;await Pd();let s=Rp();Bi(()=>{W("platform",h.VIEW,m=>u(m))}),Wp.forEach(m=>m(u)),await re(j.VIEW,{},m=>{Ui(m,s)},()=>{Ui({},s)})}catch(c){a.error(c)}}async function r(n={}){try{let i=t.pages||[],c=k(),s=ff(i,c);if(ie(`page: ${s.id} ${s.isNewPage?"\u2714":"\xD7"}`,s),s.isNewPage){let u=E(t,s.config);qp?(la(),qp=!1):IE(n),await e(u)}ru()}catch(i){a.error(i)}}async function o(n=0){try{await Gt(t)?await r():n<5?_.setTimeout(()=>{o(n+1)},400):(await r(),a.error(new T("vendor id not found (google id)")))}catch(i){a.error(i)}}w(t,"config.visitor.id_source")==="google"?await o():await r()}catch(e){a.error(e)}}var kE=te({name:"log_spa_refresh_sampling",allocations:[{percent:.1,value:!0}]});function Gp(t,e){kE&&le(t,{url:e})}var jp={SPA_REFRESH_ENABLED:"config.spa.refresh.enabled",SPA_REFRESH_DELAY:"config.spa.refresh.delay"};function nu(){if(!y()&&M(jp.SPA_REFRESH_ENABLED)){let t=M(jp.SPA_REFRESH_DELAY)||1e3;(e=>{if(e===void 0){a.error("Unable to setup SPA refresh: window.history is undefined");return}function r(i){Gp("history_intercepted_initial",i),_.setTimeout(()=>{Gp("history_intercepted_timeout",i),a.push({trigger:h.REFRESH})},t)}let o=e.pushState;e.pushState=function(){try{let c=arguments.length>=3?arguments[2]:"not passed";r(c)}catch(c){a.error(c)}return o.apply(e,arguments)};let n=e.replaceState;e.replaceState=function(){try{let c=arguments.length>=3?arguments[2]:"not passed";r(c)}catch(c){a.error(c)}return n.apply(e,arguments)}})(window.history)}}async function Hp(){let t=await Ie(()=>window?.Shopify,12e4);if(t)return t.customerPrivacy||await new Promise(e=>{t.loadFeatures?t.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],e):e(void 0)}),window?.Shopify?.customerPrivacy}async function CE(){let t=await A("_cmp_a");if(!t)return!1;let e=JSON.parse(decodeURIComponent(t));return!!(e?.purposes?.a&&e?.purposes?.m)}function OE(t){return new Promise(e=>CE().then(r=>{r&&(t(),e(!0))})).catch(e=>{})}function NE(t){window?.Shopify?.customerPrivacy?.userCanBeTracked?.()?t():_.addListener(document,"visitorConsentCollected",()=>{window?.Shopify?.customerPrivacy?.userCanBeTracked?.()&&t()})}function RE(t){return new Promise(e=>Hp().then(r=>{r&&(NE(t),e(!0))})).catch(e=>{})}async function zp(t){if(y())return t(),Promise.resolve(!0);let r=(o=>{let n=!1;return()=>{n||(n=!0,o())}})(t);return Promise.race([OE(r),RE(r),new Promise(o=>se(1e4).then(()=>{window?.Shopify?.customerPrivacy||(r(),o(!0))}))])}function Jp(){let t=M("config.events");return t&&t.purchase&&t.purchase.fbEventsToIntercept&&t.purchase.fbEventsToIntercept.length>0?t.purchase.fbEventsToIntercept:null}function Zp(){let t=M("config.events");return t&&t.view&&t.view.fbEventsToIntercept&&t.view.fbEventsToIntercept.length>0?t.view.fbEventsToIntercept:null}var LE=["load","error"],DE=te({name:"log_intercepted_fb_event",allocations:[{percent:.1,value:!0}]});function Kp(t,e){let r="Interepted FB event - ".concat(t.event,". Event fired - ",e.type);DE&&le(r)}function Yp(t,e){return t.find(r=>{let o=r.event,i=(r.filters||[]).map(s=>`.*${s}`).join(),c=`facebook.com/tr/\\?id=.*&ev=${o}${i}`;return e.src.match(c)})}function FE(t,e,r){let o=Yp(e,r);o&&(Kp(o,t),a.push({trigger:h.PURCHASE}))}function ME(t,e,r){let o=Yp(e,r);o&&(Kp(o,t),!Oe()&&o.event==="AddToCart"&&a.push({trigger:h.ADD_TO_CART}),a.push({trigger:h.VIEW,data:{page_id:o.page_id}}))}var $E=(t,e,r,o)=>{r&&FE(e,r,t),o&&ME(e,o,t)};function iu(){if(!y()){let t=Jp(),e=Zp();if(t||e){let r=Image;Image=function(...n){let i=new r(...n);return LE.forEach(c=>_.addListener(i,c,s=>{$E(i,s,t,e)})),i}}}}async function ji(t,e){try{if(await H(t)===!1)return!1;await Ed(e,!1)}catch(r){a.error(r)}return!0}async function Xp(){try{if(!y())return Sa()?Promise.resolve(await ji("loadBundleOnThankYouPage","loadWebPixelOnThankYouPage")):ba()?Promise.resolve(await ji("loadBundleOnCheckoutPage","loadWebPixelOnCheckoutPage")):Promise.resolve(!0);let t=w(window,"shopifyEvent.name")==="checkout_completed";return Sa()||t?Promise.resolve(await ji("loadWebPixelOnThankYouPage","loadBundleOnThankYouPage")):ba()?Promise.resolve(await ji("loadWebPixelOnCheckoutPage","loadBundleOnCheckoutPage")):Promise.resolve(!1)}catch(t){return a.error(t),Promise.resolve(!0)}}var au=class extends Error{constructor(){super(`Failed to fetch config from CDN - ${Ta()}`),this.status="warn"}},BE=8,UE=10;async function VE(){try{return await ht(Bu,BE,UE,!0)}catch{throw new au}}async function WE(t=()=>{},e=()=>{}){try{if(Lu(),Ru()||!await Xp())return;let o=await VE();if(await t(o),o?.config?.consentManager==="shopify"&&await new Promise(n=>{zp(n)}),a.SITE_NAME=d,Nu(),os(),a.coreStarted){a.push({trigger:h.REFRESH});return}a.coreStarted=!0,ns(),df(o.param_transforms),xf(),await ou(o),nu(),iu(),yf(),e()}catch(r){a.error(r)}}var Qp=WE;Qp();})();
}catch(e){try{e.message=e.name+':'+e.message;e.name='ParseError';if(blackcrow&&blackcrow.BUILD_NUMBER==='DEV')(blackcrow.error||console.error||console.log)(e);else(blackcrow&&blackcrow.error&&blackcrow.error(e));}catch(_){}}})();
